import{A as oa,B as ao,C as Km,D as Ym,E as M,F as Ge,G as Se,H as _u,I as Zm,J as lo,K as Ue,L as ln,M as sa,N as wu,O as Xm,P as Gr,Q as co,R as Jm,S as ey,T as xn,U as Qe,a as E,b as _e,c as Lm,d as ht,e as jm,f as na,g as Vm,h as Bm,i as m,j as qr,k as ra,l as Um,m as $m,n as Ne,o as Hm,p as vu,q as zm,r as Ut,s as Wm,t as qm,u as ia,v as De,w as Gm,x as Qm,y as pt,z as Mn}from"./chunk-VV4RBSCD.js";var ty=null;var Cu=1,ny=Symbol("SIGNAL");function ee(n){let e=ty;return ty=n,e}var ry={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function qb(n){if(!(Du(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Cu)){if(!n.producerMustRecompute(n)&&!Eu(n)){n.dirty=!1,n.lastCleanEpoch=Cu;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Cu}}function iy(n){return n&&(n.nextProducerIndex=0),ee(n)}function oy(n,e){if(ee(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Du(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)bu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Eu(n){aa(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(qb(t),r!==t.version))return!0}return!1}function sy(n){if(aa(n),Du(n))for(let e=0;e<n.producerNode.length;e++)bu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function bu(n,e){if(Gb(n),aa(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)bu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];aa(i),i.producerIndexOfThis[r]=e}}function Du(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function aa(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Gb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Qb(){throw new Error}var Kb=Qb;function ay(n){Kb=n}function F(n){return typeof n=="function"}function Qr(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var la=Qr(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function sr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ce=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(F(r))try{r()}catch(o){e=o instanceof la?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{ly(o)}catch(s){e=e??[],s instanceof la?e=[...e,...s.errors]:e.push(s)}}if(e)throw new la(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ly(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&sr(t,e)}remove(e){let{_finalizers:t}=this;t&&sr(t,e),e instanceof n&&e._removeParent(this)}};Ce.EMPTY=(()=>{let n=new Ce;return n.closed=!0,n})();var Iu=Ce.EMPTY;function ca(n){return n instanceof Ce||n&&"closed"in n&&F(n.remove)&&F(n.add)&&F(n.unsubscribe)}function ly(n){F(n)?n():n.unsubscribe()}var Mt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Kr={setTimeout(n,e,...t){let{delegate:r}=Kr;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Kr;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ua(n){Kr.setTimeout(()=>{let{onUnhandledError:e}=Mt;if(e)e(n);else throw n})}function ar(){}var cy=Su("C",void 0,void 0);function uy(n){return Su("E",void 0,n)}function dy(n){return Su("N",n,void 0)}function Su(n,e,t){return{kind:n,value:e,error:t}}var lr=null;function Yr(n){if(Mt.useDeprecatedSynchronousErrorHandling){let e=!lr;if(e&&(lr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=lr;if(lr=null,t)throw r}}else n()}function fy(n){Mt.useDeprecatedSynchronousErrorHandling&&lr&&(lr.errorThrown=!0,lr.error=n)}var cr=class extends Ce{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ca(e)&&e.add(this)):this.destination=Xb}static create(e,t,r){return new cn(e,t,r)}next(e){this.isStopped?Mu(dy(e),this):this._next(e)}error(e){this.isStopped?Mu(uy(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Mu(cy,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Yb=Function.prototype.bind;function Tu(n,e){return Yb.call(n,e)}var xu=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){da(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){da(r)}else da(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){da(t)}}},cn=class extends cr{constructor(e,t,r){super();let i;if(F(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Mt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Tu(e.next,o),error:e.error&&Tu(e.error,o),complete:e.complete&&Tu(e.complete,o)}):i=e}this.destination=new xu(i)}};function da(n){Mt.useDeprecatedSynchronousErrorHandling?fy(n):ua(n)}function Zb(n){throw n}function Mu(n,e){let{onStoppedNotification:t}=Mt;t&&Kr.setTimeout(()=>t(n,e))}var Xb={closed:!0,next:ar,error:Zb,complete:ar};var Zr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ke(n){return n}function Au(...n){return Nu(n)}function Nu(n){return n.length===0?ke:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Y=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=eD(t)?t:new cn(t,r,i);return Yr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=hy(r),new r((i,o)=>{let s=new cn({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Zr](){return this}pipe(...t){return Nu(t)(this)}toPromise(t){return t=hy(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function hy(n){var e;return(e=n??Mt.Promise)!==null&&e!==void 0?e:Promise}function Jb(n){return n&&F(n.next)&&F(n.error)&&F(n.complete)}function eD(n){return n&&n instanceof cr||Jb(n)&&ca(n)}function Ru(n){return F(n?.lift)}function j(n){return e=>{if(Ru(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function V(n,e,t,r,i){return new Pu(n,e,t,r,i)}var Pu=class extends cr{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Xr(){return j((n,e)=>{let t=null;n._refCount++;let r=V(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Jr=class extends Y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ru(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ce;let t=this.getSubject();e.add(this.source.subscribe(V(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ce.EMPTY)}return e}refCount(){return Xr()(this)}};var py=Qr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ee=(()=>{class n extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new fa(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new py}next(t){Yr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Yr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Yr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Iu:(this.currentObservers=null,o.push(t),new Ce(()=>{this.currentObservers=null,sr(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Y;return t.source=this,t}}return n.create=(e,t)=>new fa(e,t),n})(),fa=class extends Ee{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Iu}};var Te=class extends Ee{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var uo={now(){return(uo.delegate||Date).now()},delegate:void 0};var ha=class extends Ee{constructor(e=1/0,t=1/0,r=uo){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let l=1;l<r.length&&r[l]<=s;l+=2)a=l;a&&r.splice(0,a+1)}}};var pa=class extends Ce{constructor(e,t){super()}schedule(e,t=0){return this}};var fo={setInterval(n,e,...t){let{delegate:r}=fo;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=fo;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ei=class extends pa{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return fo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&fo.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,sr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ti=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ti.now=uo.now;var ni=class extends ti{constructor(e,t=ti.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ho=new ni(ei);var ga=class extends ei{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ma=class extends ni{};var Ou=new ma(ga);var $e=new Y(n=>n.complete());function gy(n){return n&&F(n.schedule)}function ku(n){return n[n.length-1]}function ya(n){return F(ku(n))?n.pop():void 0}function $t(n){return gy(ku(n))?n.pop():void 0}function my(n,e){return typeof ku(n)=="number"?n.pop():e}var va=n=>n&&typeof n.length=="number"&&typeof n!="function";function _a(n){return F(n?.then)}function wa(n){return F(n[Zr])}function Ca(n){return Symbol.asyncIterator&&F(n?.[Symbol.asyncIterator])}function Ea(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function tD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ba=tD();function Da(n){return F(n?.[ba])}function Ia(n){return Vm(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield na(t.read());if(i)return yield na(void 0);yield yield na(r)}}finally{t.releaseLock()}})}function Sa(n){return F(n?.getReader)}function ce(n){if(n instanceof Y)return n;if(n!=null){if(wa(n))return nD(n);if(va(n))return rD(n);if(_a(n))return iD(n);if(Ca(n))return yy(n);if(Da(n))return oD(n);if(Sa(n))return sD(n)}throw Ea(n)}function nD(n){return new Y(e=>{let t=n[Zr]();if(F(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function rD(n){return new Y(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function iD(n){return new Y(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ua)})}function oD(n){return new Y(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function yy(n){return new Y(e=>{aD(n,e).catch(t=>e.error(t))})}function sD(n){return yy(Ia(n))}function aD(n,e){var t,r,i,o;return jm(this,void 0,void 0,function*(){try{for(t=Bm(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ke(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function gt(n,e=0){return j((t,r)=>{t.subscribe(V(r,i=>Ke(r,n,()=>r.next(i),e),()=>Ke(r,n,()=>r.complete(),e),i=>Ke(r,n,()=>r.error(i),e)))})}function xt(n,e=0){return j((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function vy(n,e){return ce(n).pipe(xt(e),gt(e))}function _y(n,e){return ce(n).pipe(xt(e),gt(e))}function wy(n,e){return new Y(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Cy(n,e){return new Y(t=>{let r;return Ke(t,e,()=>{r=n[ba](),Ke(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>F(r?.return)&&r.return()})}function Ta(n,e){if(!n)throw new Error("Iterable cannot be null");return new Y(t=>{Ke(t,e,()=>{let r=n[Symbol.asyncIterator]();Ke(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Ey(n,e){return Ta(Ia(n),e)}function by(n,e){if(n!=null){if(wa(n))return vy(n,e);if(va(n))return wy(n,e);if(_a(n))return _y(n,e);if(Ca(n))return Ta(n,e);if(Da(n))return Cy(n,e);if(Sa(n))return Ey(n,e)}throw Ea(n)}function de(n,e){return e?by(n,e):ce(n)}function A(...n){let e=$t(n);return de(n,e)}function ri(n,e){let t=F(n)?n:()=>n,r=i=>i.error(t());return new Y(e?i=>e.schedule(r,0,i):r)}function Fu(n){return!!n&&(n instanceof Y||F(n.lift)&&F(n.subscribe))}var un=Qr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function N(n,e){return j((t,r)=>{let i=0;t.subscribe(V(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:lD}=Array;function cD(n,e){return lD(e)?n(...e):n(e)}function Dy(n){return N(e=>cD(n,e))}var{isArray:uD}=Array,{getPrototypeOf:dD,prototype:fD,keys:hD}=Object;function Iy(n){if(n.length===1){let e=n[0];if(uD(e))return{args:e,keys:null};if(pD(e)){let t=hD(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function pD(n){return n&&typeof n=="object"&&dD(n)===fD}function Sy(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ma(...n){let e=$t(n),t=ya(n),{args:r,keys:i}=Iy(n);if(r.length===0)return de([],e);let o=new Y(gD(r,e,i?s=>Sy(i,s):ke));return t?o.pipe(Dy(t)):o}function gD(n,e,t=ke){return r=>{Ty(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)Ty(e,()=>{let c=de(n[l],e),u=!1;c.subscribe(V(r,d=>{o[l]=d,u||(u=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Ty(n,e,t){n?Ke(t,n,e):e()}function My(n,e,t,r,i,o,s,a){let l=[],c=0,u=0,d=!1,f=()=>{d&&!l.length&&!c&&e.complete()},h=g=>c<r?p(g):l.push(g),p=g=>{o&&e.next(g),c++;let v=!1;ce(t(g,u++)).subscribe(V(e,C=>{i?.(C),o?h(C):e.next(C)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<r;){let C=l.shift();s?Ke(e,s,()=>p(C)):p(C)}f()}catch(C){e.error(C)}}))};return n.subscribe(V(e,h,()=>{d=!0,f()})),()=>{a?.()}}function Me(n,e,t=1/0){return F(e)?Me((r,i)=>N((o,s)=>e(r,o,i,s))(ce(n(r,i))),t):(typeof e=="number"&&(t=e),j((r,i)=>My(r,i,n,t)))}function po(n=1/0){return Me(ke,n)}function xy(){return po(1)}function ii(...n){return xy()(de(n,$t(n)))}function xa(n){return new Y(e=>{ce(n()).subscribe(e)})}function oi(...n){let e=$t(n),t=my(n,1/0),r=n;return r.length?r.length===1?ce(r[0]):po(t)(de(r,e)):$e}function tt(n,e){return j((t,r)=>{let i=0;t.subscribe(V(r,o=>n.call(e,o,i++)&&r.next(o)))})}function An(n){return j((e,t)=>{let r=null,i=!1,o;r=e.subscribe(V(t,void 0,void 0,s=>{o=ce(n(s,An(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Ay(n,e,t,r,i){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(V(s,u=>{let d=c++;l=a?n(l,u,d):(a=!0,u),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function si(n,e){return F(e)?Me(n,e,1):Me(n,1)}function Nn(n){return j((e,t)=>{let r=!1;e.subscribe(V(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function dn(n){return n<=0?()=>$e:j((e,t)=>{let r=0;e.subscribe(V(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Lu(n){return N(()=>n)}function ju(n,e=ke){return n=n??mD,j((t,r)=>{let i,o=!0;t.subscribe(V(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function mD(n,e){return n===e}function Aa(n=yD){return j((e,t)=>{let r=!1;e.subscribe(V(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function yD(){return new un}function go(n){return j((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function mt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?tt((i,o)=>n(i,o,r)):ke,dn(1),t?Nn(e):Aa(()=>new un))}function ai(n){return n<=0?()=>$e:j((e,t)=>{let r=[];e.subscribe(V(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Vu(n,e){let t=arguments.length>=2;return r=>r.pipe(n?tt((i,o)=>n(i,o,r)):ke,ai(1),t?Nn(e):Aa(()=>new un))}function li(n,e){return j(Ay(n,e,arguments.length>=2,!0))}function mo(n={}){let{connector:e=()=>new Ee,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,l,c=0,u=!1,d=!1,f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=l=void 0,u=d=!1},p=()=>{let g=s;h(),g?.unsubscribe()};return j((g,v)=>{c++,!d&&!u&&f();let C=l=l??e();v.add(()=>{c--,c===0&&!d&&!u&&(a=Bu(p,i))}),C.subscribe(v),!s&&c>0&&(s=new cn({next:k=>C.next(k),error:k=>{d=!0,f(),a=Bu(h,t,k),C.error(k)},complete:()=>{u=!0,f(),a=Bu(h,r),C.complete()}}),ce(g).subscribe(s))})(o)}}function Bu(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new cn({next:()=>{r.unsubscribe(),n()}});return ce(e(...t)).subscribe(r)}function Na(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,mo({connector:()=>new ha(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Uu(n){return j((e,t)=>{let r=!1,i=0;e.subscribe(V(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}function $u(...n){let e=$t(n);return j((t,r)=>{(e?ii(n,t,e):ii(n,t)).subscribe(r)})}function ge(n,e){return j((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(V(r,l=>{i?.unsubscribe();let c=0,u=o++;ce(n(l,u)).subscribe(i=V(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ra(n,e){return F(e)?ge(()=>n,e):ge(()=>n)}function Hu(n){return j((e,t)=>{ce(n).subscribe(V(t,()=>t.complete(),ar)),!t.closed&&e.subscribe(t)})}function be(n,e,t){let r=F(n)||e||t?{next:n,error:e,complete:t}:n;return r?j((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(V(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):ke}function zu(...n){let e=ya(n);return j((t,r)=>{let i=n.length,o=new Array(i),s=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)ce(n[l]).subscribe(V(r,c=>{o[l]=c,!a&&!s[l]&&(s[l]=!0,(a=s.every(ke))&&(s=null))},ar));t.subscribe(V(r,l=>{if(a){let c=[l,...o];r.next(e?e(...c):c)}}))})}var gv="https://g.co/ng/security#xss",y=class extends Error{constructor(e,t){super(Yd(e,t)),this.code=e}};function Yd(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function No(n){return{toString:n}.toString()}var Pa="__parameters__";function vD(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function mv(n,e,t){return No(()=>{let r=vD(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,c,u){let d=l.hasOwnProperty(Pa)?l[Pa]:Object.defineProperty(l,Pa,{value:[]})[Pa];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var yo=globalThis;function se(n){for(let e in n)if(n[e]===se)return e;throw Error("Could not find renamed property on target object.")}function He(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(He).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Ny(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var _D=se({__forward_ref__:se});function yv(n){return n.__forward_ref__=yv,n.toString=function(){return He(this())},n}function vt(n){return vv(n)?n():n}function vv(n){return typeof n=="function"&&n.hasOwnProperty(_D)&&n.__forward_ref__===yv}function D(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Kt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ol(n){return Ry(n,wv)||Ry(n,Cv)}function _v(n){return ol(n)!==null}function Ry(n,e){return n.hasOwnProperty(e)?n[e]:null}function wD(n){let e=n&&(n[wv]||n[Cv]);return e||null}function Py(n){return n&&(n.hasOwnProperty(Oy)||n.hasOwnProperty(CD))?n[Oy]:null}var wv=se({\u0275prov:se}),Oy=se({\u0275inj:se}),Cv=se({ngInjectableDef:se}),CD=se({ngInjectorDef:se}),R=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=D({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ev(n){return n&&!!n.\u0275providers}var ED=se({\u0275cmp:se}),bD=se({\u0275dir:se}),DD=se({\u0275pipe:se}),ID=se({\u0275mod:se}),Ua=se({\u0275fac:se}),vo=se({__NG_ELEMENT_ID__:se}),ky=se({__NG_ENV_ID__:se});function sl(n){return typeof n=="string"?n:n==null?"":String(n)}function SD(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():sl(n)}function TD(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new y(-200,n)}function Zd(n,e){throw new y(-201,!1)}var W=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(W||{}),id;function bv(){return id}function yt(n){let e=id;return id=n,e}function Dv(n,e,t){let r=ol(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&W.Optional)return null;if(e!==void 0)return e;Zd(n,"Injector")}var MD={},_o=MD,od="__NG_DI_FLAG__",$a="ngTempTokenPath",xD="ngTokenPath",AD=/\n/gm,ND="\u0275",Fy="__source",fi;function RD(){return fi}function Rn(n){let e=fi;return fi=n,e}function PD(n,e=W.Default){if(fi===void 0)throw new y(-203,!1);return fi===null?Dv(n,void 0,e):fi.get(n,e&W.Optional?null:void 0,e)}function _(n,e=W.Default){return(bv()||PD)(vt(n),e)}function w(n,e=W.Default){return _(n,al(e))}function al(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function sd(n){let e=[];for(let t=0;t<n.length;t++){let r=vt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new y(900,!1);let i,o=W.Default;for(let s=0;s<r.length;s++){let a=r[s],l=OD(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(_(i,o))}else e.push(_(r))}return e}function Iv(n,e){return n[od]=e,n.prototype[od]=e,n}function OD(n){return n[od]}function kD(n,e,t,r){let i=n[$a];throw e[Fy]&&i.unshift(e[Fy]),n.message=FD(`
`+n.message,i,t,r),n[xD]=i,n[$a]=null,n}function FD(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==ND?n.slice(2):n;let i=He(e);if(Array.isArray(e))i=e.map(He).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):He(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(AD,`
  `)}`}var Ci=Iv(mv("Optional"),8);var Xd=Iv(mv("SkipSelf"),4);function pi(n,e){let t=n.hasOwnProperty(Ua);return t?n[Ua]:null}function LD(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function jD(n){return n.flat(Number.POSITIVE_INFINITY)}function Jd(n,e){n.forEach(t=>Array.isArray(t)?Jd(t,e):e(t))}function Sv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ha(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function VD(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function BD(n,e,t){let r=Ro(n,e);return r>=0?n[r|1]=t:(r=~r,VD(n,r,e,t)),r}function Wu(n,e){let t=Ro(n,e);if(t>=0)return n[t|1]}function Ro(n,e){return UD(n,e,1)}function UD(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var wo={},Nt=[],gi=new R(""),Tv=new R("",-1),Mv=new R(""),za=class{get(e,t=_o){if(t===_o){let r=new Error(`NullInjectorError: No provider for ${He(e)}!`);throw r.name="NullInjectorError",r}return t}},xv=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(xv||{}),Wt=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Wt||{}),fn=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(fn||{});function $D(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function ad(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];zD(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function HD(n){return n===3||n===4||n===6}function zD(n){return n.charCodeAt(0)===64}function ef(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Ly(n,t,i,null,e[++r]):Ly(n,t,i,null,null))}}return n}function Ly(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var Av="ng-template";function WD(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&$D(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(tf(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function tf(n){return n.type===4&&n.value!==Av}function qD(n,e,t){let r=n.type===4&&!t?Av:n.value;return e===r}function GD(n,e,t){let r=4,i=n.attrs,o=i!==null?YD(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!At(r)&&!At(l))return!1;if(s&&At(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!qD(n,l,t)||l===""&&e.length===1){if(At(r))return!1;s=!0}}else if(r&8){if(i===null||!WD(n,i,l,t)){if(At(r))return!1;s=!0}}else{let c=e[++a],u=QD(l,i,tf(n),t);if(u===-1){if(At(r))return!1;s=!0;continue}if(c!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&c!==d){if(At(r))return!1;s=!0}}}}return At(r)||s}function At(n){return(n&1)===0}function QD(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return ZD(e,n)}function KD(n,e,t=!1){for(let r=0;r<e.length;r++)if(GD(n,e[r],t))return!0;return!1}function YD(n){for(let e=0;e<n.length;e++){let t=n[e];if(HD(t))return e}return n.length}function ZD(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function jy(n,e){return n?":not("+e.trim()+")":e}function XD(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!At(s)&&(e+=jy(o,i),i=""),r=s,o=o||!At(r);t++}return i!==""&&(e+=jy(o,i)),e}function JD(n){return n.map(XD).join(",")}function eI(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!At(i))break;i=o}r++}return{attrs:e,classes:t}}function Ln(n){return No(()=>{let e=kv(n),t=_e(E({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===xv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Wt.Emulated,styles:n.styles||Nt,_:null,schemas:n.schemas||null,tView:null,id:""});Fv(t);let r=n.dependencies;return t.directiveDefs=By(r,!1),t.pipeDefs=By(r,!0),t.id=rI(t),t})}function tI(n){return fr(n)||Nv(n)}function nI(n){return n!==null}function Yt(n){return No(()=>({type:n.type,bootstrap:n.bootstrap||Nt,declarations:n.declarations||Nt,imports:n.imports||Nt,exports:n.exports||Nt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Vy(n,e){if(n==null)return wo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=fn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==fn.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Cr(n){return No(()=>{let e=kv(n);return Fv(e),e})}function fr(n){return n[ED]||null}function Nv(n){return n[bD]||null}function Rv(n){return n[DD]||null}function Pv(n){let e=fr(n)||Nv(n)||Rv(n);return e!==null?e.standalone:!1}function Ov(n,e){let t=n[ID]||null;if(!t&&e===!0)throw new Error(`Type ${He(n)} does not have '\u0275mod' property.`);return t}function kv(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||wo,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Nt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Vy(n.inputs,e),outputs:Vy(n.outputs),debugInfo:null}}function Fv(n){n.features?.forEach(e=>e(n))}function By(n,e){if(!n)return null;let t=e?Rv:tI;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(nI)}function rI(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ll(n){return{\u0275providers:n}}function nf(...n){return{\u0275providers:Lv(!0,n),\u0275fromNgModule:!0}}function Lv(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Jd(e,s=>{let a=s;ld(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&jv(i,o),t}function jv(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];rf(i,o=>{e(o,r)})}}function ld(n,e,t,r){if(n=vt(n),!n)return!1;let i=null,o=Py(n),s=!o&&fr(n);if(!o&&!s){let l=n.ngModule;if(o=Py(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)ld(c,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{Jd(o.imports,u=>{ld(u,e,t,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&jv(c,e)}if(!a){let c=pi(i)||(()=>new i);e({provide:i,useFactory:c,deps:Nt},i),e({provide:Mv,useValue:i,multi:!0},i),e({provide:gi,useValue:()=>_(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=n;rf(l,u=>{e(u,c)})}}else return!1;return i!==n&&n.providers!==void 0}function rf(n,e){for(let t of n)Ev(t)&&(t=t.\u0275providers),Array.isArray(t)?rf(t,e):e(t)}var iI=se({provide:String,useValue:se});function Vv(n){return n!==null&&typeof n=="object"&&iI in n}function oI(n){return!!(n&&n.useExisting)}function sI(n){return!!(n&&n.useFactory)}function cd(n){return typeof n=="function"}var cl=new R(""),ka={},aI={},qu;function of(){return qu===void 0&&(qu=new za),qu}var wt=class{},Co=class extends wt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dd(e,s=>this.processProvider(s)),this.records.set(Tv,ci(void 0,this)),i.has("environment")&&this.records.set(wt,ci(void 0,this));let o=this.records.get(cl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Mv,Nt,W.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ee(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Rn(this),r=yt(void 0),i;try{return e()}finally{Rn(t),yt(r)}}get(e,t=_o,r=W.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ky))return e[ky](this);r=al(r);let i,o=Rn(this),s=yt(void 0);try{if(!(r&W.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=hI(e)&&ol(e);c&&this.injectableDefInScope(c)?l=ci(ud(e),ka):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&W.Self?of():this.parent;return t=r&W.Optional&&t===_o?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[$a]=a[$a]||[]).unshift(He(e)),o)throw a;return kD(a,e,"R3InjectorError",this.source)}else throw a}finally{yt(s),Rn(o)}}resolveInjectorInitializers(){let e=ee(null),t=Rn(this),r=yt(void 0),i;try{let o=this.get(gi,Nt,W.Self);for(let s of o)s()}finally{Rn(t),yt(r),ee(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(He(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new y(205,!1)}processProvider(e){e=vt(e);let t=cd(e)?e:vt(e&&e.provide),r=cI(e);if(!cd(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ci(void 0,ka,!0),i.factory=()=>sd(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ee(null);try{return t.value===ka&&(t.value=aI,t.value=t.factory()),typeof t.value=="object"&&t.value&&fI(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ee(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=vt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function ud(n){let e=ol(n),t=e!==null?e.factory:pi(n);if(t!==null)return t;if(n instanceof R)throw new y(204,!1);if(n instanceof Function)return lI(n);throw new y(204,!1)}function lI(n){if(n.length>0)throw new y(204,!1);let t=wD(n);return t!==null?()=>t.factory(n):()=>new n}function cI(n){if(Vv(n))return ci(void 0,n.useValue);{let e=uI(n);return ci(e,ka)}}function uI(n,e,t){let r;if(cd(n)){let i=vt(n);return pi(i)||ud(i)}else if(Vv(n))r=()=>vt(n.useValue);else if(sI(n))r=()=>n.useFactory(...sd(n.deps||[]));else if(oI(n))r=()=>_(vt(n.useExisting));else{let i=vt(n&&(n.useClass||n.provide));if(dI(n))r=()=>new i(...sd(n.deps));else return pi(i)||ud(i)}return r}function ci(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function dI(n){return!!n.deps}function fI(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function hI(n){return typeof n=="function"||typeof n=="object"&&n instanceof R}function dd(n,e){for(let t of n)Array.isArray(t)?dd(t,e):t&&Ev(t)?dd(t.\u0275providers,e):e(t)}function Er(n,e){n instanceof Co&&n.assertNotDestroyed();let t,r=Rn(n),i=yt(void 0);try{return e()}finally{Rn(r),yt(i)}}function pI(){return bv()!==void 0||RD()!=null}function gI(n){return typeof n=="function"}var mn=0,q=1,P=2,Fe=3,Rt=4,kt=5,Wa=6,Eo=7,Pt=8,mi=9,Ot=10,Re=11,bo=12,Uy=13,Ei=14,qt=15,Po=16,ui=17,hn=18,ul=19,Bv=20,Pn=21,Gu=22,hr=23,pn=25,Uv=1;var pr=7,qa=8,yi=9,nt=10,sf=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(sf||{});function ur(n){return Array.isArray(n)&&typeof n[Uv]=="object"}function yn(n){return Array.isArray(n)&&n[Uv]===!0}function af(n){return(n.flags&4)!==0}function dl(n){return n.componentOffset>-1}function fl(n){return(n.flags&1)===1}function Oo(n){return!!n.template}function mI(n){return(n[P]&512)!==0}var fd=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function $v(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function hl(){return Hv}function Hv(n){return n.type.prototype.ngOnChanges&&(n.setInput=vI),yI}hl.ngInherit=!0;function yI(){let n=Wv(this),e=n?.current;if(e){let t=n.previous;if(t===wo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function vI(n,e,t,r,i){let o=this.declaredInputs[r],s=Wv(n)||_I(n,{previous:wo,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new fd(c&&c.currentValue,t,l===wo),$v(n,e,i,t)}var zv="__ngSimpleChanges__";function Wv(n){return n[zv]||null}function _I(n,e){return n[zv]=e}var $y=null;var Ht=function(n,e,t){$y?.(n,e,t)},qv="svg",wI="math",CI=!1;function EI(){return CI}function Gt(n){for(;Array.isArray(n);)n=n[mn];return n}function Gv(n,e){return Gt(e[n])}function Ct(n,e){return Gt(e[n.index])}function Qv(n,e){return n.data[e]}function jn(n,e){let t=e[n];return ur(t)?t:t[mn]}function bI(n){return(n[P]&4)===4}function lf(n){return(n[P]&128)===128}function DI(n){return yn(n[Fe])}function vi(n,e){return e==null?null:n[e]}function Kv(n){n[ui]=0}function II(n){n[P]&1024||(n[P]|=1024,lf(n)&&Do(n))}function SI(n,e){for(;n>0;)e=e[Ei],n--;return e}function cf(n){return!!(n[P]&9216||n[hr]?.dirty)}function hd(n){n[Ot].changeDetectionScheduler?.notify(1),cf(n)?Do(n):n[P]&64&&(EI()?(n[P]|=1024,Do(n)):n[Ot].changeDetectionScheduler?.notify())}function Do(n){n[Ot].changeDetectionScheduler?.notify();let e=Io(n);for(;e!==null&&!(e[P]&8192||(e[P]|=8192,!lf(e)));)e=Io(e)}function Yv(n,e){if((n[P]&256)===256)throw new y(911,!1);n[Pn]===null&&(n[Pn]=[]),n[Pn].push(e)}function TI(n,e){if(n[Pn]===null)return;let t=n[Pn].indexOf(e);t!==-1&&n[Pn].splice(t,1)}function Io(n){let e=n[Fe];return yn(e)?e[Fe]:e}var U={lFrame:i_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function MI(){return U.lFrame.elementDepthCount}function xI(){U.lFrame.elementDepthCount++}function AI(){U.lFrame.elementDepthCount--}function Zv(){return U.bindingsEnabled}function NI(){return U.skipHydrationRootTNode!==null}function RI(n){return U.skipHydrationRootTNode===n}function PI(){U.skipHydrationRootTNode=null}function oe(){return U.lFrame.lView}function rt(){return U.lFrame.tView}function vn(n){return U.lFrame.contextLView=n,n[Pt]}function _n(n){return U.lFrame.contextLView=null,n}function Et(){let n=Xv();for(;n!==null&&n.type===64;)n=n.parent;return n}function Xv(){return U.lFrame.currentTNode}function OI(){let n=U.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function br(n,e){let t=U.lFrame;t.currentTNode=n,t.isParent=e}function uf(){return U.lFrame.isParent}function Jv(){U.lFrame.isParent=!1}function e_(){let n=U.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function kI(n){return U.lFrame.bindingIndex=n}function df(){return U.lFrame.bindingIndex++}function FI(n){let e=U.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function LI(){return U.lFrame.inI18n}function jI(n,e){let t=U.lFrame;t.bindingIndex=t.bindingRootIndex=n,pd(e)}function VI(){return U.lFrame.currentDirectiveIndex}function pd(n){U.lFrame.currentDirectiveIndex=n}function BI(n){let e=U.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function t_(){return U.lFrame.currentQueryIndex}function ff(n){U.lFrame.currentQueryIndex=n}function UI(n){let e=n[q];return e.type===2?e.declTNode:e.type===1?n[kt]:null}function n_(n,e,t){if(t&W.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&W.Host);)if(i=UI(o),i===null||(o=o[Ei],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=U.lFrame=r_();return r.currentTNode=e,r.lView=n,!0}function hf(n){let e=r_(),t=n[q];U.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function r_(){let n=U.lFrame,e=n===null?null:n.child;return e===null?i_(n):e}function i_(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function o_(){let n=U.lFrame;return U.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var s_=o_;function pf(){let n=o_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function $I(n){return(U.lFrame.contextLView=SI(n,U.lFrame.contextLView))[Pt]}function bi(){return U.lFrame.selectedIndex}function gr(n){U.lFrame.selectedIndex=n}function a_(){let n=U.lFrame;return Qv(n.tView,n.selectedIndex)}function pl(){U.lFrame.currentNamespace=qv}function gf(){HI()}function HI(){U.lFrame.currentNamespace=null}function zI(){return U.lFrame.currentNamespace}var l_=!0;function gl(){return l_}function ml(n){l_=n}function WI(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Hv(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function yl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Fa(n,e,t){c_(n,e,3,t)}function La(n,e,t,r){(n[P]&3)===t&&c_(n,e,t,r)}function Qu(n,e){let t=n[P];(t&3)===e&&(t&=16383,t+=1,n[P]=t)}function c_(n,e,t,r){let i=r!==void 0?n[ui]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[ui]+=65536),(a<o||o==-1)&&(qI(n,t,e,l),n[ui]=(n[ui]&4294901760)+l+2),l++}function Hy(n,e){Ht(4,n,e);let t=ee(null);try{e.call(n)}finally{ee(t),Ht(5,n,e)}}function qI(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[P]>>14<n[ui]>>16&&(n[P]&3)===e&&(n[P]+=16384,Hy(a,o)):Hy(a,o)}var hi=-1,So=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function GI(n){return n instanceof So}function QI(n){return(n.flags&8)!==0}function KI(n){return(n.flags&16)!==0}function u_(n){return n!==hi}function Ga(n){return n&32767}function YI(n){return n>>16}function Qa(n,e){let t=YI(n),r=e;for(;t>0;)r=r[Ei],t--;return r}var gd=!0;function zy(n){let e=gd;return gd=n,e}var ZI=256,d_=ZI-1,f_=5,XI=0,zt={};function JI(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(vo)&&(r=t[vo]),r==null&&(r=t[vo]=XI++);let i=r&d_,o=1<<i;e.data[n+(i>>f_)]|=o}function h_(n,e){let t=p_(n,e);if(t!==-1)return t;let r=e[q];r.firstCreatePass&&(n.injectorIndex=e.length,Ku(r.data,n),Ku(e,null),Ku(r.blueprint,null));let i=mf(n,e),o=n.injectorIndex;if(u_(i)){let s=Ga(i),a=Qa(i,e),l=a[q].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function Ku(n,e){n.push(0,0,0,0,0,0,0,0,e)}function p_(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function mf(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=__(i),r===null)return hi;if(t++,i=i[Ei],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return hi}function eS(n,e,t){JI(n,e,t)}function g_(n,e,t){if(t&W.Optional||n!==void 0)return n;Zd(e,"NodeInjector")}function m_(n,e,t,r){if(t&W.Optional&&r===void 0&&(r=null),!(t&(W.Self|W.Host))){let i=n[mi],o=yt(void 0);try{return i?i.get(e,r,t&W.Optional):Dv(e,r,t&W.Optional)}finally{yt(o)}}return g_(r,e,t)}function y_(n,e,t,r=W.Default,i){if(n!==null){if(e[P]&2048&&!(r&W.Self)){let s=iS(n,e,t,r,zt);if(s!==zt)return s}let o=v_(n,e,t,r,zt);if(o!==zt)return o}return m_(e,t,r,i)}function v_(n,e,t,r,i){let o=nS(t);if(typeof o=="function"){if(!n_(e,n,r))return r&W.Host?g_(i,t,r):m_(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&W.Optional))Zd(t);else return s}finally{s_()}}else if(typeof o=="number"){let s=null,a=p_(n,e),l=hi,c=r&W.Host?e[qt][kt]:null;for((a===-1||r&W.SkipSelf)&&(l=a===-1?mf(n,e):e[a+8],l===hi||!qy(r,!1)?a=-1:(s=e[q],a=Ga(l),e=Qa(l,e)));a!==-1;){let u=e[q];if(Wy(o,a,u.data)){let d=tS(a,e,t,s,r,c);if(d!==zt)return d}l=e[a+8],l!==hi&&qy(r,e[q].data[a+8]===c)&&Wy(o,a,e)?(s=u,a=Ga(l),e=Qa(l,e)):a=-1}}return i}function tS(n,e,t,r,i,o){let s=e[q],a=s.data[n+8],l=r==null?dl(a)&&gd:r!=s&&(a.type&3)!==0,c=i&W.Host&&o===a,u=ja(a,s,t,l,c);return u!==null?_i(e,s,u,a):zt}function ja(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,c=n.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:c;for(let h=d;h<f;h++){let p=s[h];if(h<l&&t===p||h>=l&&p.type===t)return h}if(i){let h=s[l];if(h&&Oo(h)&&h.type===t)return l}return null}function _i(n,e,t,r){let i=n[t],o=e.data;if(GI(i)){let s=i;s.resolving&&TD(SD(o[t]));let a=zy(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?yt(s.injectImpl):null,u=n_(n,r,W.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&WI(t,o[t],e)}finally{c!==null&&yt(c),zy(a),s.resolving=!1,s_()}}return i}function nS(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(vo)?n[vo]:void 0;return typeof e=="number"?e>=0?e&d_:rS:e}function Wy(n,e,t){let r=1<<n;return!!(t[e+(n>>f_)]&r)}function qy(n,e){return!(n&W.Self)&&!(n&W.Host&&e)}var dr=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return y_(this._tNode,this._lView,e,al(r),t)}};function rS(){return new dr(Et(),oe())}function yf(n){return No(()=>{let e=n.prototype.constructor,t=e[Ua]||md(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ua]||md(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function md(n){return vv(n)?()=>{let e=md(vt(n));return e&&e()}:pi(n)}function iS(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[P]&2048&&!(s[P]&512);){let a=v_(o,s,t,r|W.Self,zt);if(a!==zt)return a;let l=o.parent;if(!l){let c=s[Bv];if(c){let u=c.get(t,zt,r);if(u!==zt)return u}l=__(s),s=s[Ei]}o=l}return i}function __(n){let e=n[q],t=e.type;return t===2?e.declTNode:t===1?n[kt]:null}function Gy(n,e=null,t=null,r){let i=w_(n,e,t,r);return i.resolveInjectorInitializers(),i}function w_(n,e=null,t=null,r,i=new Set){let o=[t||Nt,nf(n)];return r=r||(typeof n=="object"?void 0:He(n)),new Co(o,e||of(),r||null,i)}var ko=(()=>{class n{static{this.THROW_IF_NOT_FOUND=_o}static{this.NULL=new za}static create(t,r){if(Array.isArray(t))return Gy({name:""},r,t,"");{let i=t.name??"";return Gy({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=D({token:n,providedIn:"any",factory:()=>_(Tv)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var oS="ngOriginalError";function Yu(n){return n[oS]}var gn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Yu(e);for(;t&&Yu(t);)t=Yu(t);return t||null}},C_=new R("",{providedIn:"root",factory:()=>w(gn).handleError.bind(void 0)}),E_=(()=>{class n{static{this.__NG_ELEMENT_ID__=sS}static{this.__NG_ENV_ID__=t=>t}}return n})(),yd=class extends E_{constructor(e){super(),this._lView=e}onDestroy(e){return Yv(this._lView,e),()=>TI(this._lView,e)}};function sS(){return new yd(oe())}function aS(){return Di(Et(),oe())}function Di(n,e){return new wn(Ct(n,e))}var wn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=aS}}return n})();function lS(n){return n instanceof wn?n.nativeElement:n}var vd=class extends Ee{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,pI()&&(this.destroyRef=w(E_,{optional:!0})??void 0)}emit(e){let t=ee(null);try{super.next(e)}finally{ee(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=Zu(o),i&&(i=Zu(i)),s&&(s=Zu(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ce&&e.add(a),a}};function Zu(n){return e=>{setTimeout(n,void 0,e)}}var _t=vd;function cS(){return this._results[Symbol.iterator]()}var _d=class n{get changes(){return this._changes??=new _t}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=cS)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=jD(e);(this._changesDetected=!LD(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function b_(n){return(n.flags&128)===128}var D_=new Map,uS=0;function dS(){return uS++}function fS(n){D_.set(n[ul],n)}function hS(n){D_.delete(n[ul])}var Qy="__ngContext__";function On(n,e){ur(e)?(n[Qy]=e[ul],fS(e)):n[Qy]=e}function I_(n){return T_(n[bo])}function S_(n){return T_(n[Rt])}function T_(n){for(;n!==null&&!yn(n);)n=n[Rt];return n}var wd;function M_(n){wd=n}function pS(){if(wd!==void 0)return wd;if(typeof document<"u")return document;throw new y(210,!1)}var vf=new R("",{providedIn:"root",factory:()=>gS}),gS="ng",_f=new R(""),Ye=new R("",{providedIn:"platform",factory:()=>"unknown"});var wf=new R(""),Cf=new R("",{providedIn:"root",factory:()=>pS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var mS="h",yS="b";var vS=()=>null;function Ef(n,e,t=!1){return vS(n,e,t)}var x_=!1,_S=new R("",{providedIn:"root",factory:()=>x_});var Ka=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gv})`}};function vl(n){return n instanceof Ka?n.changingThisBreaksApplicationSecurity:n}function A_(n,e){let t=wS(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${gv})`)}return t===e}function wS(n){return n instanceof Ka&&n.getTypeName()||null}var CS=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function N_(n){return n=String(n),n.match(CS)?n:"unsafe:"+n}var bf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(bf||{});function Fo(n){let e=ES();return e?e.sanitize(bf.URL,n)||"":A_(n,"URL")?vl(n):N_(sl(n))}function ES(){let n=oe();return n&&n[Ot].sanitizer}var bS=/^>|^->|<!--|-->|--!>|<!-$/g,DS=/(<|>)/g,IS="\u200B$1\u200B";function SS(n){return n.replace(bS,e=>e.replace(DS,IS))}function _l(n){return n.ownerDocument.defaultView}function R_(n){return n instanceof Function?n():n}var Qt=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Qt||{}),TS;function Df(n,e){return TS(n,e)}function di(n,e,t,r,i){if(r!=null){let o,s=!1;yn(r)?o=r:ur(r)&&(s=!0,r=r[mn]);let a=Gt(r);n===0&&t!==null?i==null?L_(e,t,a):Ya(e,t,a,i||null,!0):n===1&&t!==null?Ya(e,t,a,i||null,!0):n===2?WS(e,a,s):n===3&&e.destroyNode(a),o!=null&&GS(e,n,o,t,i)}}function MS(n,e){return n.createText(e)}function xS(n,e,t){n.setValue(e,t)}function AS(n,e){return n.createComment(SS(e))}function P_(n,e,t){return n.createElement(e,t)}function NS(n,e){O_(n,e),e[mn]=null,e[kt]=null}function RS(n,e,t,r,i,o){r[mn]=i,r[kt]=e,Cl(n,r,t,1,i,o)}function O_(n,e){e[Ot].changeDetectionScheduler?.notify(1),Cl(n,e,e[Re],2,null,null)}function PS(n){let e=n[bo];if(!e)return Xu(n[q],n);for(;e;){let t=null;if(ur(e))t=e[bo];else{let r=e[nt];r&&(t=r)}if(!t){for(;e&&!e[Rt]&&e!==n;)ur(e)&&Xu(e[q],e),e=e[Fe];e===null&&(e=n),ur(e)&&Xu(e[q],e),t=e&&e[Rt]}e=t}}function OS(n,e,t,r){let i=nt+r,o=t.length;r>0&&(t[i-1][Rt]=e),r<o-nt?(e[Rt]=t[i],Sv(t,nt+r,e)):(t.push(e),e[Rt]=null),e[Fe]=t;let s=e[Po];s!==null&&t!==s&&kS(s,e);let a=e[hn];a!==null&&a.insertView(n),hd(e),e[P]|=128}function kS(n,e){let t=n[yi],i=e[Fe][Fe][qt];e[qt]!==i&&(n[P]|=sf.HasTransplantedViews),t===null?n[yi]=[e]:t.push(e)}function k_(n,e){let t=n[yi],r=t.indexOf(e);t.splice(r,1)}function Cd(n,e){if(n.length<=nt)return;let t=nt+e,r=n[t];if(r){let i=r[Po];i!==null&&i!==n&&k_(i,r),e>0&&(n[t-1][Rt]=r[Rt]);let o=Ha(n,nt+e);NS(r[q],r);let s=o[hn];s!==null&&s.detachView(o[q]),r[Fe]=null,r[Rt]=null,r[P]&=-129}return r}function F_(n,e){if(!(e[P]&256)){let t=e[Re];t.destroyNode&&Cl(n,e,t,3,null,null),PS(e)}}function Xu(n,e){if(e[P]&256)return;let t=ee(null);try{e[P]&=-129,e[P]|=256,e[hr]&&sy(e[hr]),LS(n,e),FS(n,e),e[q].type===1&&e[Re].destroy();let r=e[Po];if(r!==null&&yn(e[Fe])){r!==e[Fe]&&k_(r,e);let i=e[hn];i!==null&&i.detachView(n)}hS(e)}finally{ee(t)}}function FS(n,e){let t=n.cleanup,r=e[Eo];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Eo]=null);let i=e[Pn];if(i!==null){e[Pn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function LS(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof So)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Ht(4,a,l);try{l.call(a)}finally{Ht(5,a,l)}}else{Ht(4,i,o);try{o.call(i)}finally{Ht(5,i,o)}}}}}function jS(n,e,t){return VS(n,e.parent,t)}function VS(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[mn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Wt.None||o===Wt.Emulated)return null}return Ct(r,t)}}function Ya(n,e,t,r,i){n.insertBefore(e,t,r,i)}function L_(n,e,t){n.appendChild(e,t)}function Ky(n,e,t,r,i){r!==null?Ya(n,e,t,r,i):L_(n,e,t)}function BS(n,e,t,r){n.removeChild(e,t,r)}function If(n,e){return n.parentNode(e)}function US(n,e){return n.nextSibling(e)}function $S(n,e,t){return zS(n,e,t)}function HS(n,e,t){return n.type&40?Ct(n,t):null}var zS=HS,Yy;function wl(n,e,t,r){let i=jS(n,r,e),o=e[Re],s=r.parent||e[kt],a=$S(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)Ky(o,i,t[l],a,!1);else Ky(o,i,t,a,!1);Yy!==void 0&&Yy(o,r,e,t,i)}function Va(n,e){if(e!==null){let t=e.type;if(t&3)return Ct(e,n);if(t&4)return Ed(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Va(n,r);{let i=n[e.index];return yn(i)?Ed(-1,i):Gt(i)}}else{if(t&32)return Df(e,n)()||Gt(n[e.index]);{let r=j_(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Io(n[qt]);return Va(i,r)}else return Va(n,e.next)}}}return null}function j_(n,e){if(e!==null){let r=n[qt][kt],i=e.projection;return r.projection[i]}return null}function Ed(n,e){let t=nt+n+1;if(t<e.length){let r=e[t],i=r[q].firstChild;if(i!==null)return Va(r,i)}return e[pr]}function WS(n,e,t){let r=If(n,e);r&&BS(n,r,e,t)}function Sf(n,e,t,r,i,o,s){for(;t!=null;){let a=r[t.index],l=t.type;if(s&&e===0&&(a&&On(Gt(a),r),t.flags|=2),(t.flags&32)!==32)if(l&8)Sf(n,e,t.child,r,i,o,!1),di(e,n,i,a,o);else if(l&32){let c=Df(t,r),u;for(;u=c();)di(e,n,i,u,o);di(e,n,i,a,o)}else l&16?qS(n,e,r,t,i,o):di(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Cl(n,e,t,r,i,o){Sf(t,r,n.firstChild,e,i,o,!1)}function qS(n,e,t,r,i,o){let s=t[qt],l=s[kt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];di(e,n,i,u,o)}else{let c=l,u=s[Fe];b_(r)&&(c.flags|=128),Sf(n,e,c,u,i,o,!0)}}function GS(n,e,t,r,i){let o=t[pr],s=Gt(t);o!==s&&di(e,n,r,o,i);for(let a=nt;a<t.length;a++){let l=t[a];Cl(l[q],l,n,e,r,o)}}function QS(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Qt.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Qt.Important),n.setStyle(t,r,i,o))}}function KS(n,e,t){n.setAttribute(e,"style",t)}function V_(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function B_(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&ad(n,e,r),i!==null&&V_(n,e,i),o!==null&&KS(n,e,o)}var Dr={};function G(n=1){U_(rt(),oe(),bi()+n,!1)}function U_(n,e,t,r){if(!r)if((e[P]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Fa(e,o,t)}else{let o=n.preOrderHooks;o!==null&&La(e,o,0,t)}gr(t)}function ue(n,e=W.Default){let t=oe();if(t===null)return _(n,e);let r=Et();return y_(r,t,vt(n),e)}function $_(n,e,t,r,i,o){let s=ee(null);try{let a=null;i&fn.SignalBased&&(a=e[r][ny]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&fn.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):$v(e,a,r,o)}finally{ee(s)}}function YS(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)gr(~i);else{let o=i,s=t[++r],a=t[++r];jI(s,o);let l=e[o];a(2,l)}}}finally{gr(-1)}}function El(n,e,t,r,i,o,s,a,l,c,u){let d=e.blueprint.slice();return d[mn]=i,d[P]=r|4|128|8|64,(c!==null||n&&n[P]&2048)&&(d[P]|=2048),Kv(d),d[Fe]=d[Ei]=n,d[Pt]=t,d[Ot]=s||n&&n[Ot],d[Re]=a||n&&n[Re],d[mi]=l||n&&n[mi]||null,d[kt]=o,d[ul]=dS(),d[Wa]=u,d[Bv]=c,d[qt]=e.type==2?n[qt]:d,d}function Lo(n,e,t,r,i){let o=n.data[e];if(o===null)o=ZS(n,e,t,r,i),LI()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=OI();o.injectorIndex=s===null?-1:s.injectorIndex}return br(o,!0),o}function ZS(n,e,t,r,i){let o=Xv(),s=uf(),a=s?o:o&&o.parent,l=n.data[e]=rT(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function H_(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function z_(n,e,t,r,i){let o=bi(),s=r&2;try{gr(-1),s&&e.length>pn&&U_(n,e,pn,!1),Ht(s?2:0,i),t(r,i)}finally{gr(o),Ht(s?3:1,i)}}function Tf(n,e,t){if(af(e)){let r=ee(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{ee(r)}}}function Mf(n,e,t){Zv()&&(uT(n,e,t,Ct(t,e)),(t.flags&64)===64&&G_(n,e,t))}function xf(n,e,t=Ct){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function W_(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Af(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Af(n,e,t,r,i,o,s,a,l,c,u){let d=pn+r,f=d+i,h=XS(d,f),p=typeof c=="function"?c():c;return h[q]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function XS(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Dr);return t}function JS(n,e,t,r){let o=r.get(_S,x_)||t===Wt.ShadowDom,s=n.selectRootElement(e,o);return eT(s),s}function eT(n){tT(n)}var tT=()=>null;function nT(n,e,t,r){let i=Y_(e);i.push(t),n.firstCreatePass&&Z_(n).push(r,i.length-1)}function rT(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return NI()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Zy(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,l=fn.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}n===0?Xy(r,t,c,a,l):Xy(r,t,c,a)}return r}function Xy(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function iT(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],l=null,c=null;for(let u=r;u<i;u++){let d=o[u],f=t?t.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;l=Zy(0,d.inputs,u,l,h),c=Zy(1,d.outputs,u,c,p);let g=l!==null&&s!==null&&!tf(e)?CT(l,u,s):null;a.push(g)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function oT(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function sT(n,e,t,r,i,o,s,a){let l=Ct(e,t),c=e.inputs,u;!a&&c!=null&&(u=c[r])?(Rf(n,t,u,r,i),dl(e)&&aT(t,e.index)):e.type&3?(r=oT(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)):e.type&12}function aT(n,e){let t=jn(e,n);t[P]&16||(t[P]|=64)}function Nf(n,e,t,r){if(Zv()){let i=r===null?null:{"":-1},o=fT(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&q_(n,e,t,s,i,a),i&&hT(t,r,i)}t.mergedAttrs=ef(t.mergedAttrs,t.attrs)}function q_(n,e,t,r,i,o){for(let c=0;c<r.length;c++)eS(h_(t,e),n,r[c].type);gT(t,n.data.length,r.length);for(let c=0;c<r.length;c++){let u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=H_(n,e,r.length,null);for(let c=0;c<r.length;c++){let u=r[c];t.mergedAttrs=ef(t.mergedAttrs,u.hostAttrs),mT(n,t,e,l,u),pT(l,u,i),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}iT(n,t,o)}function lT(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;cT(s)!=a&&s.push(a),s.push(t,r,o)}}function cT(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function uT(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;dl(t)&&yT(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||h_(t,e),On(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let l=n.data[a],c=_i(e,n,a,t);if(On(c,e),s!==null&&wT(e,a-i,c,l,t,s),Oo(l)){let u=jn(t.index,e);u[Pt]=_i(e,n,a,t)}}}function G_(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=VI();try{gr(o);for(let a=r;a<i;a++){let l=n.data[a],c=e[a];pd(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&dT(l,c)}}finally{gr(-1),pd(s)}}function dT(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function fT(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(KD(e,s.selectors,!1))if(r||(r=[]),Oo(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let l=a.length;bd(n,e,l)}else r.unshift(s),bd(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function bd(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function hT(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new y(-301,!1);r.push(e[i],o)}}}function pT(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Oo(e)&&(t[""]=n)}}function gT(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function mT(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=pi(i.type,!0)),s=new So(o,Oo(i),ue);n.blueprint[r]=s,t[r]=s,lT(n,e,r,H_(n,t,i.hostVars,Dr),i)}function yT(n,e,t){let r=Ct(e,n),i=W_(t),o=n[Ot].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=bl(n,El(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function vT(n,e,t,r,i,o){let s=Ct(n,e);_T(e[Re],s,o,n.value,t,r,i)}function _T(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?sl(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function wT(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],u=s[a++],d=s[a++];$_(r,t,l,c,u,d)}}function CT(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function Q_(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function K_(n,e){let t=n.contentQueries;if(t!==null){let r=ee(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];ff(o),a.contentQueries(2,e[s],s)}}}finally{ee(r)}}}function bl(n,e){return n[bo]?n[Uy][Rt]=e:n[bo]=e,n[Uy]=e,e}function Dd(n,e,t){ff(0);let r=ee(null);try{e(n,t)}finally{ee(r)}}function Y_(n){return n[Eo]||(n[Eo]=[])}function Z_(n){return n.cleanup||(n.cleanup=[])}function X_(n,e){let t=n[mi],r=t?t.get(gn,null):null;r&&r.handleError(e)}function Rf(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],l=t[o++],c=e[s],u=n.data[s];$_(u,c,r,a,l,i)}}function ET(n,e,t){let r=Gv(e,n);xS(n[Re],r,t)}function bT(n,e){let t=jn(e,n),r=t[q];DT(r,t);let i=t[mn];i!==null&&t[Wa]===null&&(t[Wa]=Ef(i,t[mi])),Pf(r,t,t[Pt])}function DT(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Pf(n,e,t){hf(e);try{let r=n.viewQuery;r!==null&&Dd(1,r,t);let i=n.template;i!==null&&z_(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[hn]?.finishViewCreation(n),n.staticContentQueries&&K_(n,e),n.staticViewQueries&&Dd(2,n.viewQuery,t);let o=n.components;o!==null&&IT(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[P]&=-5,pf()}}function IT(n,e){for(let t=0;t<e.length;t++)bT(n,e[t])}function ST(n,e,t,r){let i=ee(null);try{let o=e.tView,a=n[P]&4096?4096:16,l=El(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[e.index];l[Po]=c;let u=n[hn];return u!==null&&(l[hn]=u.createEmbeddedView(o)),Pf(o,l,t),l}finally{ee(i)}}function Jy(n,e){return!e||e.firstChild===null||b_(n)}function TT(n,e,t,r=!0){let i=e[q];if(OS(i,e,n,t),r){let s=Ed(t,n),a=e[Re],l=If(a,n[pr]);l!==null&&RS(i,n[kt],a,e,l,s)}let o=e[Wa];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Za(n,e,t,r,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&r.push(Gt(o)),yn(o)&&MT(o,r);let s=t.type;if(s&8)Za(n,e,t.child,r);else if(s&32){let a=Df(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=j_(e,t);if(Array.isArray(a))r.push(...a);else{let l=Io(e[qt]);Za(l[q],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function MT(n,e){for(let t=nt;t<n.length;t++){let r=n[t],i=r[q].firstChild;i!==null&&Za(r[q],r,i,e)}n[pr]!==n[mn]&&e.push(n[pr])}var J_=[];function xT(n){return n[hr]??AT(n)}function AT(n){let e=J_.pop()??Object.create(RT);return e.lView=n,e}function NT(n){n.lView[hr]!==n&&(n.lView=null,J_.push(n))}var RT=_e(E({},ry),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Do(n.lView)},consumerOnSignalRead(){this.lView[hr]=this}}),ew=100;function tw(n,e=!0,t=0){let r=n[Ot],i=r.rendererFactory,o=!1;o||i.begin?.();try{PT(n,t)}catch(s){throw e&&X_(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function PT(n,e){Id(n,e);let t=0;for(;cf(n);){if(t===ew)throw new y(103,!1);t++,Id(n,1)}}function OT(n,e,t,r){let i=e[P];if((i&256)===256)return;let o=!1;!o&&e[Ot].inlineEffectRunner?.flush(),hf(e);let s=null,a=null;!o&&kT(n)&&(a=xT(e),s=iy(a));try{Kv(e),kI(n.bindingStartIndex),t!==null&&z_(n,e,t,2,r);let l=(i&3)===3;if(!o)if(l){let d=n.preOrderCheckHooks;d!==null&&Fa(e,d,null)}else{let d=n.preOrderHooks;d!==null&&La(e,d,0,null),Qu(e,0)}if(FT(e),nw(e,0),n.contentQueries!==null&&K_(n,e),!o)if(l){let d=n.contentCheckHooks;d!==null&&Fa(e,d)}else{let d=n.contentHooks;d!==null&&La(e,d,1),Qu(e,1)}YS(n,e);let c=n.components;c!==null&&iw(e,c,0);let u=n.viewQuery;if(u!==null&&Dd(2,u,r),!o)if(l){let d=n.viewCheckHooks;d!==null&&Fa(e,d)}else{let d=n.viewHooks;d!==null&&La(e,d,2),Qu(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Gu]){for(let d of e[Gu])d();e[Gu]=null}o||(e[P]&=-73)}catch(l){throw Do(e),l}finally{a!==null&&(oy(a,s),NT(a)),pf()}}function kT(n){return n.type!==2}function nw(n,e){for(let t=I_(n);t!==null;t=S_(t))for(let r=nt;r<t.length;r++){let i=t[r];rw(i,e)}}function FT(n){for(let e=I_(n);e!==null;e=S_(e)){if(!(e[P]&sf.HasTransplantedViews))continue;let t=e[yi];for(let r=0;r<t.length;r++){let i=t[r],o=i[Fe];II(i)}}}function LT(n,e,t){let r=jn(e,n);rw(r,t)}function rw(n,e){lf(n)&&Id(n,e)}function Id(n,e){let r=n[q],i=n[P],o=n[hr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Eu(o)),o&&(o.dirty=!1),n[P]&=-9217,s)OT(r,n,r.template,n[Pt]);else if(i&8192){nw(n,1);let a=r.components;a!==null&&iw(n,a,1)}}function iw(n,e,t){for(let r=0;r<e.length;r++)LT(n,e[r],t)}function Of(n){for(n[Ot].changeDetectionScheduler?.notify();n;){n[P]|=64;let e=Io(n);if(mI(n)&&!e)return n;n=e}return null}var mr=class{get rootNodes(){let e=this._lView,t=e[q];return Za(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Pt]}set context(e){this._lView[Pt]=e}get destroyed(){return(this._lView[P]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Fe];if(yn(e)){let t=e[qa],r=t?t.indexOf(this):-1;r>-1&&(Cd(e,r),Ha(t,r))}this._attachedToViewContainer=!1}F_(this._lView[q],this._lView)}onDestroy(e){Yv(this._lView,e)}markForCheck(){Of(this._cdRefInjectingView||this._lView)}detach(){this._lView[P]&=-129}reattach(){hd(this._lView),this._lView[P]|=128}detectChanges(){this._lView[P]|=1024,tw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,O_(this._lView[q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new y(902,!1);this._appRef=e,hd(this._lView)}},yr=(()=>{class n{static{this.__NG_ELEMENT_ID__=BT}}return n})(),jT=yr,VT=class extends jT{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=ST(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new mr(i)}};function BT(){return kf(Et(),oe())}function kf(n,e){return n.type&4?new VT(e,n,Di(n,e)):null}var N$=new RegExp(`^(\\d+)*(${yS}|${mS})*(.*)`);var UT=()=>null;function ev(n,e){return UT(n,e)}var To=class{},Sd=class{},Xa=class{};function $T(n){let e=Error(`No component factory found for ${He(n)}.`);return e[HT]=n,e}var HT="ngComponent";var Td=class{resolveComponentFactory(e){throw $T(e)}},Dl=(()=>{class n{static{this.NULL=new Td}}return n})(),vr=class{},jo=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>zT()}}return n})();function zT(){let n=oe(),e=Et(),t=jn(e.index,n);return(ur(t)?t:n)[Re]}var WT=(()=>{class n{static{this.\u0275prov=D({token:n,providedIn:"root",factory:()=>null})}}return n})(),Ju={};var tv=new Set;function Il(n){tv.has(n)||(tv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function nv(...n){}function qT(){let n=typeof yo.requestAnimationFrame=="function",e=yo[n?"requestAnimationFrame":"setTimeout"],t=yo[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var ne=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _t(!1),this.onMicrotaskEmpty=new _t(!1),this.onStable=new _t(!1),this.onError=new _t(!1),typeof Zone>"u")throw new y(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=qT().nativeRequestAnimationFrame,KT(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new y(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new y(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,GT,nv,nv);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},GT={};function Ff(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function QT(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(yo,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Md(n),n.isCheckStableRunning=!0,Ff(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Md(n))}function KT(n){let e=()=>{QT(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(YT(a))return t.invokeTask(i,o,s,a);try{return rv(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),iv(n)}},onInvoke:(t,r,i,o,s,a,l)=>{try{return rv(n),t.invoke(i,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),iv(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Md(n),Ff(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Md(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function rv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function iv(n){n._nesting--,Ff(n)}function YT(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var ow=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=D({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Ja(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Ny(i,a);else if(o==2){let l=a,c=e[++s];r=Ny(r,l+": "+c+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var el=class extends Dl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=fr(e);return new Mo(t,this.ngModule)}};function ov(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function ZT(n){let e=n.toLowerCase();return e==="svg"?qv:e==="math"?wI:null}var xd=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=al(r);let i=this.injector.get(e,Ju,r);return i!==Ju||t===Ju?i:this.parentInjector.get(e,t,r)}},Mo=class extends Xa{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=ov(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return ov(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=JD(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=ee(null);try{i=i||this.ngModule;let s=i instanceof wt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new xd(e,s):e,l=a.get(vr,null);if(l===null)throw new y(407,!1);let c=a.get(WT,null),u=a.get(ow,null),d=a.get(To,null),f={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},h=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=r?JS(h,r,this.componentDef.encapsulation,a):P_(h,p,ZT(p)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let C=null;g!==null&&(C=Ef(g,a,!0));let k=Af(0,null,null,1,0,null,null,null,null,null,null),S=El(null,k,null,v,null,null,f,h,a,null,C);hf(S);let $,we;try{let ye=this.componentDef,ve,xe=null;ye.findHostDirectiveDefs?(ve=[],xe=new Map,ye.findHostDirectiveDefs(ye,ve,xe),ve.push(ye)):ve=[ye];let an=XT(S,g),Sn=JT(an,g,ye,ve,S,f,h);we=Qv(k,pn),g&&nM(h,ye,g,r),t!==void 0&&rM(we,this.ngContentSelectors,t),$=tM(Sn,ye,ve,xe,S,[iM]),Pf(k,S,null)}finally{pf()}return new Ad(this.componentType,$,Di(we,S),S,we)}finally{ee(o)}}},Ad=class extends Sd{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new mr(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Rf(o[q],o,i,e,t),this.previousInputValues.set(e,t);let s=jn(this._tNode.index,o);Of(s)}}get injector(){return new dr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function XT(n,e){let t=n[q],r=pn;return n[r]=e,Lo(t,r,2,"#host",null)}function JT(n,e,t,r,i,o,s){let a=i[q];eM(r,n,e,s);let l=null;e!==null&&(l=Ef(e,i[mi]));let c=o.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=El(i,W_(t),null,u,i[n.index],n,o,c,null,null,l);return a.firstCreatePass&&bd(a,n,r.length-1),bl(i,d),i[n.index]=d}function eM(n,e,t,r){for(let i of n)e.mergedAttrs=ef(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Ja(e,e.mergedAttrs,!0),t!==null&&B_(r,t,e))}function tM(n,e,t,r,i,o){let s=Et(),a=i[q],l=Ct(s,i);q_(a,i,s,t,null,r);for(let u=0;u<t.length;u++){let d=s.directiveStart+u,f=_i(i,a,d,s);On(f,i)}G_(a,i,s),l&&On(l,i);let c=_i(i,a,s.directiveStart+s.componentOffset,s);if(n[Pt]=i[Pt]=c,o!==null)for(let u of o)u(c,e);return Tf(a,s,i),c}function nM(n,e,t,r){if(r)ad(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=eI(e.selectors[0]);i&&ad(n,t,i),o&&o.length>0&&V_(n,t,o.join(" "))}}function rM(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function iM(){let n=Et();yl(oe()[q],n)}var Vn=(()=>{class n{static{this.__NG_ELEMENT_ID__=oM}}return n})();function oM(){let n=Et();return aw(n,oe())}var sM=Vn,sw=class extends sM{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Di(this._hostTNode,this._hostLView)}get injector(){return new dr(this._hostTNode,this._hostLView)}get parentInjector(){let e=mf(this._hostTNode,this._hostLView);if(u_(e)){let t=Qa(e,this._hostLView),r=Ga(e),i=t[q].data[r+8];return new dr(i,t)}else return new dr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=sv(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-nt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=ev(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Jy(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!gI(e),a;if(s)a=t;else{let p=t||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let l=s?e:new Mo(fr(e)),c=r||this.parentInjector;if(!o&&l.ngModule==null){let g=(s?c:this.parentInjector).get(wt,null);g&&(o=g)}let u=fr(l.componentType??{}),d=ev(this._lContainer,u?.id??null),f=d?.firstChild??null,h=l.create(c,i,f,o);return this.insertImpl(h.hostView,a,Jy(this._hostTNode,d)),h}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(DI(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[Fe],c=new sw(l,l[kt],l[Fe]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return TT(s,i,o,r),e.attachToViewContainerRef(),Sv(ed(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=sv(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Cd(this._lContainer,t);r&&(Ha(ed(this._lContainer),t),F_(r[q],r))}detach(e){let t=this._adjustIndex(e,-1),r=Cd(this._lContainer,t);return r&&Ha(ed(this._lContainer),t)!=null?new mr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function sv(n){return n[qa]}function ed(n){return n[qa]||(n[qa]=[])}function aw(n,e){let t,r=e[n.index];return yn(r)?t=r:(t=Q_(r,e,null,n),e[n.index]=t,bl(e,t)),lM(t,e,n,r),new sw(t,n,e)}function aM(n,e){let t=n[Re],r=t.createComment(""),i=Ct(e,n),o=If(t,i);return Ya(t,o,r,US(t,i),!1),r}var lM=dM,cM=()=>!1;function uM(n,e,t){return cM(n,e,t)}function dM(n,e,t,r){if(n[pr])return;let i;t.type&8?i=Gt(r):i=aM(e,t),n[pr]=i}var Nd=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Rd=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Lf(e,t).matches!==null&&this.queries[t].setDirty()}},Pd=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=_M(e):this.predicate=e}},Od=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},kd=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,fM(t,o)),this.matchTNodeWithReadOption(e,t,ja(t,e,o,!1,!1))}else r===yr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ja(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===wn||i===Vn||i===yr&&t.type&4)this.addMatch(t.index,-2);else{let o=ja(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function fM(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function hM(n,e){return n.type&11?Di(n,e):n.type&4?kf(n,e):null}function pM(n,e,t,r){return t===-1?hM(e,n):t===-2?gM(n,e,r):_i(n,n[q],t,e)}function gM(n,e,t){if(t===wn)return Di(e,n);if(t===yr)return kf(e,n);if(t===Vn)return aw(e,n)}function lw(n,e,t,r){let i=e[hn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(pM(e,u,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function Fd(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=lw(n,e,i,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],u=e[-l];for(let d=nt;d<u.length;d++){let f=u[d];f[Po]===f[Fe]&&Fd(f[q],f,c,r)}if(u[yi]!==null){let d=u[yi];for(let f=0;f<d.length;f++){let h=d[f];Fd(h[q],h,c,r)}}}}}return r}function mM(n,e){return n[hn].queries[e].queryList}function yM(n,e,t){let r=new _d((t&4)===4);return nT(n,e,r,r.destroy),(e[hn]??=new Rd).queries.push(new Nd(r))-1}function vM(n,e,t){let r=rt();return r.firstCreatePass&&(wM(r,new Pd(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),yM(r,oe(),e)}function _M(n){return n.split(",").map(e=>e.trim())}function wM(n,e,t){n.queries===null&&(n.queries=new Od),n.queries.track(new kd(e,t))}function Lf(n,e){return n.queries.getByIndex(e)}function CM(n,e){let t=n[q],r=Lf(t,e);return r.crossesNgTemplate?Fd(t,n,e,[]):lw(t,n,r,e)}var kn=class{},xo=class{};var Ld=class extends kn{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new el(this);let i=Ov(e);this._bootstrapComponents=R_(i.bootstrap),this._r3Injector=w_(e,t,[{provide:kn,useValue:this},{provide:Dl,useValue:this.componentFactoryResolver},...r],He(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},jd=class extends xo{constructor(e){super(),this.moduleType=e}create(e){return new Ld(this.moduleType,e,[])}};var tl=class extends kn{constructor(e){super(),this.componentFactoryResolver=new el(this),this.instance=null;let t=new Co([...e.providers,{provide:kn,useValue:this},{provide:Dl,useValue:this.componentFactoryResolver}],e.parent||of(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function jf(n,e,t=null){return new tl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Sl=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Te(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cw(n){return Vf(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function EM(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Vf(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function uw(n,e,t){return n[e]=t}function _r(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function bM(n,e,t,r){let i=_r(n,e,t);return _r(n,e+1,r)||i}function DM(n){return(n.flags&32)===32}function IM(n,e,t,r,i,o,s,a,l){let c=e.consts,u=Lo(e,n,4,s||null,vi(c,a));Nf(e,t,u,vi(c,l)),yl(e,u);let d=u.tView=Af(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Le(n,e,t,r,i,o,s,a){let l=oe(),c=rt(),u=n+pn,d=c.firstCreatePass?IM(u,c,l,e,t,r,i,o,s):c.data[u];br(d,!1);let f=SM(c,l,d,n);gl()&&wl(c,l,f,d),On(f,l);let h=Q_(f,l,f,d);return l[u]=h,bl(l,h),uM(h,d,l),fl(d)&&Mf(c,l,d),s!=null&&xf(l,d,a),Le}var SM=TM;function TM(n,e,t,r){return ml(!0),e[Re].createComment("")}function Tl(n,e,t,r){let i=oe(),o=df();if(_r(i,o,e)){let s=rt(),a=a_();vT(a,i,n,e,t,r)}return Tl}function MM(n,e,t,r){return _r(n,df(),t)?e+sl(t)+r:Dr}function Oa(n,e){return n<<17|e<<2}function wr(n){return n>>17&32767}function xM(n){return(n&2)==2}function AM(n,e){return n&131071|e<<17}function Vd(n){return n|2}function wi(n){return(n&131068)>>2}function td(n,e){return n&-131069|e<<2}function NM(n){return(n&1)===1}function Bd(n){return n|1}function RM(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=wr(s),l=wi(s);n[r]=t;let c=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||Ro(d,u)>0)&&(c=!0)}else u=t;if(i)if(l!==0){let f=wr(n[a+1]);n[r+1]=Oa(f,a),f!==0&&(n[f+1]=td(n[f+1],r)),n[a+1]=AM(n[a+1],r)}else n[r+1]=Oa(a,0),a!==0&&(n[a+1]=td(n[a+1],r)),a=r;else n[r+1]=Oa(l,0),a===0?a=r:n[l+1]=td(n[l+1],r),l=r;c&&(n[r+1]=Vd(n[r+1])),av(n,u,r,!0),av(n,u,r,!1),PM(e,u,n,r,o),s=Oa(a,l),o?e.classBindings=s:e.styleBindings=s}function PM(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ro(o,e)>=0&&(t[r+1]=Bd(t[r+1]))}function av(n,e,t,r){let i=n[t+1],o=e===null,s=r?wr(i):wi(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],c=n[s+1];OM(l,e)&&(a=!0,n[s+1]=r?Bd(c):Vd(c)),s=r?wr(c):wi(c)}a&&(n[t+1]=r?Vd(i):Bd(i))}function OM(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ro(n,e)>=0:!1}function te(n,e,t){let r=oe(),i=df();if(_r(r,i,e)){let o=rt(),s=a_();sT(o,s,r,n,e,r[Re],t,!1)}return te}function lv(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Rf(n,t,o[s],s,r)}function Ir(n,e){return kM(n,e,null,!0),Ir}function kM(n,e,t,r){let i=oe(),o=rt(),s=FI(2);if(o.firstUpdatePass&&LM(o,n,s,r),e!==Dr&&_r(i,s,e)){let a=o.data[bi()];$M(o,a,i,i[Re],n,i[s+1]=HM(e,t),r,s)}}function FM(n,e){return e>=n.expandoStartIndex}function LM(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[bi()],s=FM(n,t);zM(o,r)&&e===null&&!s&&(e=!1),e=jM(i,o,e,r),RM(i,o,e,t,s,r)}}function jM(n,e,t,r){let i=BI(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=nd(null,n,e,t,r),t=Ao(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=nd(i,n,e,t,r),o===null){let l=VM(n,e,r);l!==void 0&&Array.isArray(l)&&(l=nd(null,n,e,l[1],r),l=Ao(l,e.attrs,r),BM(n,e,r,l))}else o=UM(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function VM(n,e,t){let r=t?e.classBindings:e.styleBindings;if(wi(r)!==0)return n[wr(r)]}function BM(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[wr(i)]=r}function UM(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ao(r,s,t)}return Ao(r,e.attrs,t)}function nd(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ao(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ao(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),BD(n,s,t?!0:e[++o]))}return n===void 0?null:n}function $M(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],u=NM(c)?cv(l,e,t,i,wi(c),s):void 0;if(!nl(u)){nl(o)||xM(c)&&(o=cv(l,null,t,i,a,s));let d=Gv(bi(),t);QS(r,s,d,i,o)}}function cv(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,f=t[i+1];f===Dr&&(f=d?Nt:void 0);let h=d?Wu(f,r):u===r?f:void 0;if(c&&!nl(h)&&(h=Wu(l,r)),nl(h)&&(a=h,s))return a;let p=n[i+1];i=s?wr(p):wi(p)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Wu(l,r))}return a}function nl(n){return n!==void 0}function HM(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=He(vl(n)))),n}function zM(n,e){return(n.flags&(e?8:16))!==0}function WM(n,e,t,r,i,o){let s=e.consts,a=vi(s,i),l=Lo(e,n,2,r,a);return Nf(e,t,l,vi(s,o)),l.attrs!==null&&Ja(l,l.attrs,!1),l.mergedAttrs!==null&&Ja(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function I(n,e,t,r){let i=oe(),o=rt(),s=pn+n,a=i[Re],l=o.firstCreatePass?WM(s,o,i,e,t,r):o.data[s],c=qM(o,i,l,a,e,n);i[s]=c;let u=fl(l);return br(l,!0),B_(a,c,l),!DM(l)&&gl()&&wl(o,i,c,l),MI()===0&&On(c,i),xI(),u&&(Mf(o,i,l),Tf(o,l,i)),r!==null&&xf(i,l),I}function O(){let n=Et();uf()?Jv():(n=n.parent,br(n,!1));let e=n;RI(e)&&PI(),AI();let t=rt();return t.firstCreatePass&&(yl(t,n),af(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&QI(e)&&lv(t,e,oe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&KI(e)&&lv(t,e,oe(),e.stylesWithoutHost,!1),O}function fe(n,e,t,r){return I(n,e,t,r),O(),fe}var qM=(n,e,t,r,i,o)=>(ml(!0),P_(r,i,zI()));function GM(n,e,t,r,i){let o=e.consts,s=vi(o,r),a=Lo(e,n,8,"ng-container",s);s!==null&&Ja(a,s,!0);let l=vi(o,i);return Nf(e,t,a,l),e.queries!==null&&e.queries.elementStart(e,a),a}function Bf(n,e,t){let r=oe(),i=rt(),o=n+pn,s=i.firstCreatePass?GM(o,i,r,e,t):i.data[o];br(s,!0);let a=QM(i,r,s,n);return r[o]=a,gl()&&wl(i,r,a,s),On(a,r),fl(s)&&(Mf(i,r,s),Tf(i,s,r)),t!=null&&xf(r,s),Bf}function Uf(){let n=Et(),e=rt();return uf()?Jv():(n=n.parent,br(n,!1)),e.firstCreatePass&&(yl(e,n),af(n)&&e.queries.elementEnd(n)),Uf}var QM=(n,e,t,r)=>(ml(!0),AS(e[Re],""));function Ii(){return oe()}var rl="en-US";var KM=rl;function YM(n){typeof n=="string"&&(KM=n.toLowerCase().replace(/_/g,"-"))}function Ze(n,e,t,r){let i=oe(),o=rt(),s=Et();return XM(o,i,i[Re],s,n,e,r),Ze}function ZM(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Eo],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function XM(n,e,t,r,i,o,s){let a=fl(r),c=n.firstCreatePass&&Z_(n),u=e[Pt],d=Y_(e),f=!0;if(r.type&3||s){let g=Ct(r,e),v=s?s(g):g,C=d.length,k=s?$=>s(Gt($[r.index])):r.index,S=null;if(!s&&a&&(S=ZM(n,e,i,r.index)),S!==null){let $=S.__ngLastListenerFn__||S;$.__ngNextListenerFn__=o,S.__ngLastListenerFn__=o,f=!1}else{o=dv(r,e,u,o,!1);let $=t.listen(v,i,o);d.push(o,$),c&&c.push(i,k,C,C+1)}}else o=dv(r,e,u,o,!1);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let g=p.length;if(g)for(let v=0;v<g;v+=2){let C=p[v],k=p[v+1],we=e[C][k].subscribe(o),ye=d.length;d.push(o,we),c&&c.push(i,r.index,ye,-(ye+1))}}}function uv(n,e,t,r){let i=ee(null);try{return Ht(6,e,t),t(r)!==!1}catch(o){return X_(n,o),!1}finally{Ht(7,e,t),ee(i)}}function dv(n,e,t,r,i){return function o(s){if(s===Function)return r;let a=n.componentOffset>-1?jn(n.index,e):e;Of(a);let l=uv(e,t,r,s),c=o.__ngNextListenerFn__;for(;c;)l=uv(e,t,c,s)&&l,c=c.__ngNextListenerFn__;return i&&l===!1&&s.preventDefault(),l}}function Ie(n=1){return $I(n)}function Vo(n,e,t){vM(n,e,t)}function Si(n){let e=oe(),t=rt(),r=t_();ff(r+1);let i=Lf(t,r);if(n.dirty&&bI(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=CM(e,r);n.reset(o,lS),n.notifyOnChanges()}return!0}return!1}function Ti(){return mM(oe(),t_())}function re(n,e=""){let t=oe(),r=rt(),i=n+pn,o=r.firstCreatePass?Lo(r,i,1,e,null):r.data[i],s=JM(r,t,o,e,n);t[i]=s,gl()&&wl(r,t,s,o),br(o,!1)}var JM=(n,e,t,r,i)=>(ml(!0),MS(e[Re],r));function Sr(n){return Mi("",n,""),Sr}function Mi(n,e,t){let r=oe(),i=MM(r,n,e,t);return i!==Dr&&ET(r,bi(),i),Mi}var ex=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Lv(!1,t.type),i=r.length>0?jf([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=D({token:n,providedIn:"environment",factory:()=>new n(_(wt))})}}return n})();function Bn(n){Il("NgStandalone"),n.getStandaloneInjector=e=>e.get(ex).getOrCreateStandaloneInjector(n)}function dw(n,e,t,r){return tx(oe(),e_(),n,e,t,r)}function Ml(n,e,t,r,i){return nx(oe(),e_(),n,e,t,r,i)}function fw(n,e){let t=n[e];return t===Dr?void 0:t}function tx(n,e,t,r,i,o){let s=e+t;return _r(n,s,i)?uw(n,s+1,o?r.call(o,i):r(i)):fw(n,s+1)}function nx(n,e,t,r,i,o,s){let a=e+t;return bM(n,a,i,o)?uw(n,a+2,s?r.call(s,i,o):r(i,o)):fw(n,a+2)}var Fn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},hw=new Fn("17.3.12"),xl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var pw=new R("");function Bo(n){return!!n&&typeof n.then=="function"}function gw(n){return!!n&&typeof n.subscribe=="function"}var mw=new R(""),yw=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=w(mw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Bo(o))t.push(o);else if(gw(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$f=new R("");function rx(){ay(()=>{throw new y(600,!1)})}function ix(n){return n.isBoundToModule}function ox(n,e,t){try{let r=t();return Bo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Uo=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=w(C_),this.afterRenderEffectManager=w(ow),this.externalTestViews=new Set,this.beforeRender=new Ee,this.afterTick=new Ee,this.componentTypes=[],this.components=[],this.isStable=w(Sl).hasPendingTasks.pipe(N(t=>!t)),this._injector=w(wt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Xa;if(!this._injector.get(yw).done){let f=!i&&Pv(t),h=!1;throw new y(405,h)}let s;i?s=t:s=this._injector.get(Dl).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=ix(s)?void 0:this._injector.get(kn),l=r||s.selector,c=s.create(ko.NULL,[],l,a),u=c.location.nativeElement,d=c.injector.get(pw,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),rd(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new y(101,!1);let r=ee(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,ee(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===ew)throw new y(103,!1);if(t){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)sx(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ud(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ud(o))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;rd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get($f,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>rd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new y(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function rd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function sx(n,e,t){!e&&!Ud(n)||ax(n,t,e)}function Ud(n){return cf(n)}function ax(n,e,t){let r;t?(r=0,n[P]|=1024):n[P]&64?r=0:r=1,tw(n,e,r)}var $d=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Hf=(()=>{class n{compileModuleSync(t){return new jd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Ov(t),o=R_(i.declarations).reduce((s,a)=>{let l=fr(a);return l&&s.push(new Mo(l)),s},[]);return new $d(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var lx=(()=>{class n{constructor(){this.zone=w(ne),this.applicationRef=w(Uo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cx(n){return[{provide:ne,useFactory:n},{provide:gi,multi:!0,useFactory:()=>{let e=w(lx,{optional:!0});return()=>e.initialize()}},{provide:gi,multi:!0,useFactory:()=>{let e=w(hx);return()=>{e.initialize()}}},{provide:C_,useFactory:ux}]}function ux(){let n=w(ne),e=w(gn);return t=>n.runOutsideAngular(()=>e.handleError(t))}function dx(n){let e=cx(()=>new ne(fx(n)));return ll([[],e])}function fx(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var hx=(()=>{class n{constructor(){this.subscription=new Ce,this.initialized=!1,this.zone=w(ne),this.pendingTasks=w(Sl)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ne.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ne.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function px(){return typeof $localize<"u"&&$localize.locale||rl}var zf=new R("",{providedIn:"root",factory:()=>w(zf,W.Optional|W.SkipSelf)||px()});var vw=new R("");var Ba=null;function gx(n=[],e){return ko.create({name:e,providers:[{provide:cl,useValue:"platform"},{provide:vw,useValue:new Set([()=>Ba=null])},...n]})}function mx(n=[]){if(Ba)return Ba;let e=gx(n);return Ba=e,rx(),yx(e),e}function yx(n){n.get(_f,null)?.forEach(t=>t())}function Wf(){return!1}var $o=(()=>{class n{static{this.__NG_ELEMENT_ID__=vx}}return n})();function vx(n){return _x(Et(),oe(),(n&16)===16)}function _x(n,e,t){if(dl(n)&&!t){let r=jn(n.index,e);return new mr(r,r)}else if(n.type&47){let r=e[qt];return new mr(r,e)}return null}var Hd=class{constructor(){}supports(e){return cw(e)}create(e){return new zd(e)}},wx=(n,e)=>e,zd=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||wx}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<fv(r,i,o)?t:r,a=fv(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let c=a-i,u=l-i;if(c!=u){for(let f=0;f<c;f++){let h=f<o.length?o[f]:o[f]=0,p=h+f;u<=p&&p<c&&(o[f]=h+1)}let d=s.previousIndex;o[d]=u-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!cw(e))throw new y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,EM(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Wd(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new il),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new il),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Wd=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},qd=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},il=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new qd,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function fv(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var Gd=class{constructor(){}supports(e){return e instanceof Map||Vf(e)}create(){return new Qd}},Qd=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Vf(e)))throw new y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new Kd(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Kd=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function hv(){return new qf([new Hd])}var qf=(()=>{class n{static{this.\u0275prov=D({token:n,providedIn:"root",factory:hv})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||hv()),deps:[[n,new Xd,new Ci]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new y(901,!1)}}return n})();function pv(){return new Gf([new Gd])}var Gf=(()=>{class n{static{this.\u0275prov=D({token:n,providedIn:"root",factory:pv})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||pv()),deps:[[n,new Xd,new Ci]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new y(901,!1)}}return n})();function _w(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=mx(r),o=[dx(),...t||[]],a=new tl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(ne);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(gn,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:h=>{c.handleError(h)}})});let d=()=>a.destroy(),f=i.get(vw);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),ox(c,l,()=>{let h=a.get(yw);return h.runInitializers(),h.donePromise.then(()=>{let p=a.get(zf,rl);YM(p||rl);let g=a.get(Uo);return e!==void 0&&g.bootstrap(e),g})})})}catch(e){return Promise.reject(e)}}var Iw=null;function xi(){return Iw}function Sw(n){Iw??=n}var Al=class{};var Je=new R(""),Tw=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:()=>w(Dx),providedIn:"platform"})}}return n})();var Dx=(()=>{class n extends Tw{constructor(){super(),this._doc=w(Je),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xi().getBaseHref(this._doc)}onPopState(t){let r=xi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=xi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Mw(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function ww(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Tr(n){return n&&n[0]!=="?"?"?"+n:n}var Rl=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:()=>w(xw),providedIn:"root"})}}return n})(),Ix=new R(""),xw=(()=>{class n extends Rl{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??w(Je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Mw(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Tr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Tr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Tr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(_(Tw),_(Ix,8))}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ho=(()=>{class n{constructor(t){this._subject=new _t,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Mx(ww(Cw(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Tr(r))}normalize(t){return n.stripTrailingSlash(Tx(this._basePath,Cw(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Tr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Tr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Tr}static{this.joinWithSlash=Mw}static{this.stripTrailingSlash=ww}static{this.\u0275fac=function(r){return new(r||n)(_(Rl))}}static{this.\u0275prov=D({token:n,factory:()=>Sx(),providedIn:"root"})}}return n})();function Sx(){return new Ho(_(Rl))}function Tx(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Cw(n){return n.replace(/\/index.html$/,"")}function Mx(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Aw(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Qf=/\s+/,Ew=[],Pl=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=Ew,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(Qf):Ew}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Qf):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Qf).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(ue(wn),ue(jo))}}static{this.\u0275dir=Cr({type:n,selectors:[["","ngClass",""]],inputs:{klass:[fn.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Kf=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ol=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Kf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),bw(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);bw(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ue(Vn),ue(yr),ue(qf))}}static{this.\u0275dir=Cr({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function bw(n,e){n.context.$implicit=e.item}var kl=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Yf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Dw("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Dw("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ue(Vn),ue(yr))}}static{this.\u0275dir=Cr({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Yf=class{constructor(){this.$implicit=null,this.ngIf=null}};function Dw(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${He(e)}'.`)}var Nw=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),s=i.indexOf("-")===-1?void 0:Qt.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(ue(wn),ue(Gf),ue(jo))}}static{this.\u0275dir=Cr({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();var zo=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Yt({type:n})}static{this.\u0275inj=Kt({})}}return n})(),Zf="browser",xx="server";function Rw(n){return n===Zf}function Wo(n){return n===xx}var Nl=class{};var eh=class extends Al{constructor(){super(...arguments),this.supportsDOMEvents=!0}},th=class n extends eh{static makeCurrent(){Sw(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Ax();return t==null?null:Nx(t)}resetBaseElement(){qo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Aw(document.cookie,e)}},qo=null;function Ax(){return qo=qo||document.querySelector("base"),qo?qo.getAttribute("href"):null}function Nx(n){return new URL(n,document.baseURI).pathname}var Rx=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac})}}return n})(),nh=new R(""),Fw=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new y(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(_(nh),_(ne))}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac})}}return n})(),Fl=class{constructor(e){this._doc=e}},Xf="ng-app-id",Lw=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Wo(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Xf}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Xf),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Xf,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(_(Je),_(vf),_(Cf,8),_(Ye))}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac})}}return n})(),Jf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ih=/%COMP%/g,jw="%COMP%",Px=`_nghost-${jw}`,Ox=`_ngcontent-${jw}`,kx=!0,Fx=new R("",{providedIn:"root",factory:()=>kx});function Lx(n){return Ox.replace(ih,n)}function jx(n){return Px.replace(ih,n)}function Vw(n,e){return e.map(t=>t.replace(ih,n))}var Ll=(()=>{class n{constructor(t,r,i,o,s,a,l,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=Wo(a),this.defaultRenderer=new Go(t,s,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Wt.ShadowDom&&(r=_e(E({},r),{encapsulation:Wt.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof jl?i.applyToHost(t):i instanceof Qo&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Wt.Emulated:o=new jl(l,c,r,this.appId,u,s,a,d);break;case Wt.ShadowDom:return new rh(l,c,t,r,s,a,this.nonce,d);default:o=new Qo(l,c,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(_(Fw),_(Lw),_(vf),_(Fx),_(Je),_(Ye),_(ne),_(Cf))}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac})}}return n})(),Go=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Jf[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Ow(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ow(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new y(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Jf[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Jf[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Qt.DashCase|Qt.Important)?e.style.setProperty(t,r,i&Qt.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Qt.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=xi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Ow(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var rh=class extends Go{constructor(e,t,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Vw(i.id,i.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qo=class extends Go{constructor(e,t,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?Vw(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},jl=class extends Qo{constructor(e,t,r,i,o,s,a,l){let c=i+"-"+r.id;super(e,t,r,o,s,a,l,c),this.contentAttr=Lx(c),this.hostAttr=jx(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Vx=(()=>{class n extends Fl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(_(Je))}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac})}}return n})(),kw=["alt","control","meta","shift"],Bx={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ux={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},$x=(()=>{class n extends Fl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),kw.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=Bx[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),kw.forEach(s=>{if(s!==i){let a=Ux[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(_(Je))}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac})}}return n})();function Bw(n,e){return _w(E({rootComponent:n},Hx(e)))}function Hx(n){return{appProviders:[...Qx,...n?.providers??[]],platformProviders:Gx}}function zx(){th.makeCurrent()}function Wx(){return new gn}function qx(){return M_(document),document}var Gx=[{provide:Ye,useValue:Zf},{provide:_f,useValue:zx,multi:!0},{provide:Je,useFactory:qx,deps:[]}];var Qx=[{provide:cl,useValue:"root"},{provide:gn,useFactory:Wx,deps:[]},{provide:nh,useClass:Vx,multi:!0,deps:[Je,ne,Ye]},{provide:nh,useClass:$x,multi:!0,deps:[Je]},Ll,Lw,Fw,{provide:vr,useExisting:Ll},{provide:Nl,useClass:Rx,deps:[]},[]];var Uw=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(_(Je))}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var B="primary",cs=Symbol("RouteTitle"),ch=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Oi(n){return new ch(n)}function Yx(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Zx(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zt(n[t],e[t]))return!1;return!0}function Zt(n,e){let t=n?uh(n):void 0,r=e?uh(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Gw(n[i],e[i]))return!1;return!0}function uh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Gw(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function Qw(n){return n.length>0?n[n.length-1]:null}function zn(n){return Fu(n)?n:Bo(n)?de(Promise.resolve(n)):A(n)}var Xx={exact:Yw,subset:Zw},Kw={exact:Jx,subset:eA,ignored:()=>!0};function $w(n,e,t){return Xx[t.paths](n.root,e.root,t.matrixParams)&&Kw[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Jx(n,e){return Zt(n,e)}function Yw(n,e,t){if(!xr(n.segments,e.segments)||!Ul(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Yw(n.children[r],e.children[r],t))return!1;return!0}function eA(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Gw(n[t],e[t]))}function Zw(n,e,t){return Xw(n,e,e.segments,t)}function Xw(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!xr(i,t)||e.hasChildren()||!Ul(i,t,r))}else if(n.segments.length===t.length){if(!xr(n.segments,t)||!Ul(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Zw(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!xr(n.segments,i)||!Ul(n.segments,i,r)||!n.children[B]?!1:Xw(n.children[B],e,o,r)}}function Ul(n,e,t){return e.every((r,i)=>Kw[t](n[i].parameters,r.parameters))}var Un=class{constructor(e=new ie([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Oi(this.queryParams),this._queryParamMap}toString(){return rA.serialize(this)}},ie=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $l(this)}},Mr=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Oi(this.parameters),this._parameterMap}toString(){return eC(this)}};function tA(n,e){return xr(n,e)&&n.every((t,r)=>Zt(t.parameters,e[r].parameters))}function xr(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function nA(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===B&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==B&&(t=t.concat(e(i,r)))}),t}var Fh=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:()=>new zl,providedIn:"root"})}}return n})(),zl=class{parse(e){let t=new fh(e);return new Un(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ko(e.root,!0)}`,r=sA(e.queryParams),i=typeof e.fragment=="string"?`#${iA(e.fragment)}`:"";return`${t}${r}${i}`}},rA=new zl;function $l(n){return n.segments.map(e=>eC(e)).join("/")}function Ko(n,e){if(!n.hasChildren())return $l(n);if(e){let t=n.children[B]?Ko(n.children[B],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==B&&r.push(`${i}:${Ko(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=nA(n,(r,i)=>i===B?[Ko(n.children[B],!1)]:[`${i}:${Ko(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[B]!=null?`${$l(n)}/${t[0]}`:`${$l(n)}/(${t.join("//")})`}}function Jw(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vl(n){return Jw(n).replace(/%3B/gi,";")}function iA(n){return encodeURI(n)}function dh(n){return Jw(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hl(n){return decodeURIComponent(n)}function Hw(n){return Hl(n.replace(/\+/g,"%20"))}function eC(n){return`${dh(n.path)}${oA(n.parameters)}`}function oA(n){return Object.entries(n).map(([e,t])=>`;${dh(e)}=${dh(t)}`).join("")}function sA(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Vl(t)}=${Vl(i)}`).join("&"):`${Vl(t)}=${Vl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var aA=/^[^\/()?;#]+/;function oh(n){let e=n.match(aA);return e?e[0]:""}var lA=/^[^\/()?;=#]+/;function cA(n){let e=n.match(lA);return e?e[0]:""}var uA=/^[^=?&#]+/;function dA(n){let e=n.match(uA);return e?e[0]:""}var fA=/^[^&#]+/;function hA(n){let e=n.match(fA);return e?e[0]:""}var fh=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ie([],{}):new ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[B]=new ie(e,t)),r}parseSegment(){let e=oh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new y(4009,!1);return this.capture(e),new Mr(Hl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=cA(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=oh(this.remaining);i&&(r=i,this.capture(r))}e[Hl(t)]=Hl(r)}parseQueryParam(e){let t=dA(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=hA(this.remaining);s&&(r=s,this.capture(r))}let i=Hw(t),o=Hw(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=oh(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new y(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=B);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[B]:new ie([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new y(4011,!1)}};function tC(n){return n.segments.length>0?new ie([],{[B]:n}):n}function nC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=nC(i);if(r===B&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ie(n.segments,e);return pA(t)}function pA(n){if(n.numberOfChildren===1&&n.children[B]){let e=n.children[B];return new ie(n.segments.concat(e.segments),e.children)}return n}function ki(n){return n instanceof Un}function gA(n,e,t=null,r=null){let i=rC(n);return iC(i,e,t,r)}function rC(n){let e;function t(o){let s={};for(let l of o.children){let c=t(l);s[l.outlet]=c}let a=new ie(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=tC(r);return e??i}function iC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return sh(i,i,i,t,r);let o=mA(e);if(o.toRoot())return sh(i,i,new ie([],{}),t,r);let s=yA(o,i,n),a=s.processChildren?Xo(s.segmentGroup,s.index,o.commands):sC(s.segmentGroup,s.index,o.commands);return sh(i,s.segmentGroup,a,t,r)}function Wl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ts(n){return typeof n=="object"&&n!=null&&n.outlets}function sh(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;n===e?s=t:s=oC(n,e,t);let a=tC(nC(s));return new Un(a,o,i)}function oC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=oC(o,e,t)}),new ie(n.segments,r)}var ql=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wl(r[0]))throw new y(4003,!1);let i=r.find(ts);if(i&&i!==Qw(r))throw new y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function mA(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ql(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ql(t,e,r)}var Ri=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function yA(n,e,t){if(n.isAbsolute)return new Ri(e,!0,0);if(!t)return new Ri(e,!1,NaN);if(t.parent===null)return new Ri(t,!0,0);let r=Wl(n.commands[0])?0:1,i=t.segments.length-1+r;return vA(t,i,n.numberOfDoubleDots)}function vA(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new y(4005,!1);i=r.segments.length}return new Ri(r,!1,i-o)}function _A(n){return ts(n[0])?n[0].outlets:{[B]:n}}function sC(n,e,t){if(n??=new ie([],{}),n.segments.length===0&&n.hasChildren())return Xo(n,e,t);let r=wA(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ie(n.segments.slice(0,r.pathIndex),{});return o.children[B]=new ie(n.segments.slice(r.pathIndex),n.children),Xo(o,0,i)}else return r.match&&i.length===0?new ie(n.segments,{}):r.match&&!n.hasChildren()?hh(n,e,t):r.match?Xo(n,0,i):hh(n,e,t)}function Xo(n,e,t){if(t.length===0)return new ie(n.segments,{});{let r=_A(t),i={};if(Object.keys(r).some(o=>o!==B)&&n.children[B]&&n.numberOfChildren===1&&n.children[B].segments.length===0){let o=Xo(n.children[B],e,t);return new ie(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=sC(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ie(n.segments,i)}}function wA(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ts(a))break;let l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Ww(l,c,s))return o;r+=2}else{if(!Ww(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function hh(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ts(o)){let l=CA(o.outlets);return new ie(r,l)}if(i===0&&Wl(t[0])){let l=n.segments[e];r.push(new Mr(l.path,zw(t[0]))),i++;continue}let s=ts(o)?o.outlets[B]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Wl(a)?(r.push(new Mr(s,zw(a))),i+=2):(r.push(new Mr(s,{})),i++)}return new ie(r,{})}function CA(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=hh(new ie([],{}),0,r))}),e}function zw(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Ww(n,e,t){return n==t.path&&Zt(e,t.parameters)}var Jo="imperative",je=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(je||{}),bt=class{constructor(e,t){this.id=e,this.url=t}},ns=class extends bt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=je.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Cn=class extends bt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=je.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ot=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ot||{}),ph=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ph||{}),$n=class extends bt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=je.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ar=class extends bt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=je.NavigationSkipped}},rs=class extends bt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=je.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Gl=class extends bt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=je.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gh=class extends bt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=je.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mh=class extends bt{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=je.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},yh=class extends bt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=je.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vh=class extends bt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=je.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_h=class{constructor(e){this.route=e,this.type=je.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},wh=class{constructor(e){this.route=e,this.type=je.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ch=class{constructor(e){this.snapshot=e,this.type=je.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Eh=class{constructor(e){this.snapshot=e,this.type=je.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bh=class{constructor(e){this.snapshot=e,this.type=je.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dh=class{constructor(e){this.snapshot=e,this.type=je.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var is=class{},os=class{constructor(e){this.url=e}};var Ih=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Li,this.attachRef=null}},Li=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ih,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ql=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Sh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Sh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Th(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Th(e,this._root).map(t=>t.value)}};function Sh(n,e){if(n===e.value)return e;for(let t of e.children){let r=Sh(n,t);if(r)return r}return null}function Th(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Th(n,t);if(r.length)return r.unshift(e),r}return[]}var it=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ni(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Kl=class extends Ql{constructor(e,t){super(e),this.snapshot=t,jh(this,e)}toString(){return this.snapshot.toString()}};function aC(n){let e=EA(n),t=new Te([new Mr("",{})]),r=new Te({}),i=new Te({}),o=new Te({}),s=new Te(""),a=new Hn(t,r,o,s,i,B,n,e.root);return a.snapshot=e.root,new Kl(new it(a,[]),e)}function EA(n){let e={},t={},r={},i="",o=new ss([],e,r,i,t,B,n,null,{});return new Yl("",new it(o,[]))}var Hn=class{constructor(e,t,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(N(c=>c[cs]))??A(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(N(e=>Oi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(N(e=>Oi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Lh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:E(E({},e.params),n.params),data:E(E({},e.data),n.data),resolve:E(E(E(E({},n.data),e.data),i?.data),n._resolvedData)}:r={params:E({},n.params),data:E({},n.data),resolve:E(E({},n.data),n._resolvedData??{})},i&&cC(i)&&(r.resolve[cs]=i.title),r}var ss=class{get title(){return this.data?.[cs]}constructor(e,t,r,i,o,s,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Oi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Oi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Yl=class extends Ql{constructor(e,t){super(t),this.url=e,jh(this,t)}toString(){return lC(this._root)}};function jh(n,e){e.value._routerState=n,e.children.forEach(t=>jh(n,t))}function lC(n){let e=n.children.length>0?` { ${n.children.map(lC).join(", ")} } `:"";return`${n.value}${e}`}function ah(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Zt(e.params,t.params)||n.paramsSubject.next(t.params),Zx(e.url,t.url)||n.urlSubject.next(t.url),Zt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Mh(n,e){let t=Zt(n.params,e.params)&&tA(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Mh(n.parent,e.parent))}function cC(n){return typeof n.title=="string"||n.title===null}var Vh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=B,this.activateEvents=new _t,this.deactivateEvents=new _t,this.attachEvents=new _t,this.detachEvents=new _t,this.parentContexts=w(Li),this.location=w(Vn),this.changeDetector=w($o),this.environmentInjector=w(wt),this.inputBinder=w(Bh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new y(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new xh(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Cr({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[hl]})}}return n})(),xh=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Hn?this.route:e===Li?this.childContexts:this.parent.get(e,t)}},Bh=new R("");function bA(n,e,t){let r=as(n,e._root,t?t._root:void 0);return new Kl(r,e)}function as(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=DA(n,e,t);return new it(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>as(n,a)),s}}let r=IA(e.value),i=e.children.map(o=>as(n,o));return new it(r,i)}}function DA(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return as(n,r,i);return as(n,r)})}function IA(n){return new Hn(new Te(n.url),new Te(n.params),new Te(n.queryParams),new Te(n.fragment),new Te(n.data),n.outlet,n.component,n)}var uC="ngNavigationCancelingError";function dC(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ki(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=fC(!1,ot.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function fC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[uC]=!0,t.cancellationCode=e,t}function SA(n){return hC(n)&&ki(n.url)}function hC(n){return!!n&&n[uC]}var TA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ln({type:n,selectors:[["ng-component"]],standalone:!0,features:[Bn],decls:1,vars:0,template:function(r,i){r&1&&fe(0,"router-outlet")},dependencies:[Vh],encapsulation:2})}}return n})();function MA(n,e){return n.providers&&!n._injector&&(n._injector=jf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Uh(n){let e=n.children&&n.children.map(Uh),t=e?_e(E({},n),{children:e}):E({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==B&&(t.component=TA),t}function Xt(n){return n.outlet||B}function xA(n,e){let t=n.filter(r=>Xt(r)===e);return t.push(...n.filter(r=>Xt(r)!==e)),t}function us(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var AA=(n,e,t,r)=>N(i=>(new Ah(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Ah=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ah(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ni(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ni(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ni(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ni(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Dh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Eh(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(ah(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ah(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=us(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Zl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Pi=class{constructor(e,t){this.component=e,this.route=t}};function NA(n,e,t){let r=n._root,i=e?e._root:null;return Yo(r,i,t,[r.value])}function RA(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ji(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!_v(n)?n:e.get(n):r}function Yo(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ni(e);return n.children.forEach(s=>{PA(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>es(a,t.getContext(s),i)),i}function PA(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=OA(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Zl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Yo(n,e,a?a.children:null,r,i):Yo(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Pi(a.outlet.component,s))}else s&&es(e,a,i),i.canActivateChecks.push(new Zl(r)),o.component?Yo(n,null,a?a.children:null,r,i):Yo(n,null,t,r,i);return i}function OA(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!xr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xr(n.url,e.url)||!Zt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mh(n,e)||!Zt(n.queryParams,e.queryParams);case"paramsChange":default:return!Mh(n,e)}}function es(n,e,t){let r=Ni(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?es(s,e.children.getContext(o),t):es(s,null,t):es(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Pi(e.outlet.component,i)):t.canDeactivateChecks.push(new Pi(null,i)):t.canDeactivateChecks.push(new Pi(null,i))}function ds(n){return typeof n=="function"}function kA(n){return typeof n=="boolean"}function FA(n){return n&&ds(n.canLoad)}function LA(n){return n&&ds(n.canActivate)}function jA(n){return n&&ds(n.canActivateChild)}function VA(n){return n&&ds(n.canDeactivate)}function BA(n){return n&&ds(n.canMatch)}function pC(n){return n instanceof un||n?.name==="EmptyError"}var Bl=Symbol("INITIAL_VALUE");function Fi(){return ge(n=>Ma(n.map(e=>e.pipe(dn(1),$u(Bl)))).pipe(N(e=>{for(let t of e)if(t!==!0){if(t===Bl)return Bl;if(t===!1||t instanceof Un)return t}return!0}),tt(e=>e!==Bl),dn(1)))}function UA(n,e){return Me(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?A(_e(E({},t),{guardsResult:!0})):$A(s,r,i,n).pipe(Me(a=>a&&kA(a)?HA(r,o,n,e):A(a)),N(a=>_e(E({},t),{guardsResult:a})))})}function $A(n,e,t,r){return de(n).pipe(Me(i=>QA(i.component,i.route,t,e,r)),mt(i=>i!==!0,!0))}function HA(n,e,t,r){return de(e).pipe(si(i=>ii(WA(i.route.parent,r),zA(i.route,r),GA(n,i.path,t),qA(n,i.route,t))),mt(i=>i!==!0,!0))}function zA(n,e){return n!==null&&e&&e(new bh(n)),A(!0)}function WA(n,e){return n!==null&&e&&e(new Ch(n)),A(!0)}function qA(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return A(!0);let i=r.map(o=>xa(()=>{let s=us(e)??t,a=ji(o,s),l=LA(a)?a.canActivate(e,n):Er(s,()=>a(e,n));return zn(l).pipe(mt())}));return A(i).pipe(Fi())}function GA(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>RA(s)).filter(s=>s!==null).map(s=>xa(()=>{let a=s.guards.map(l=>{let c=us(s.node)??t,u=ji(l,c),d=jA(u)?u.canActivateChild(r,n):Er(c,()=>u(r,n));return zn(d).pipe(mt())});return A(a).pipe(Fi())}));return A(o).pipe(Fi())}function QA(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return A(!0);let s=o.map(a=>{let l=us(e)??i,c=ji(a,l),u=VA(c)?c.canDeactivate(n,e,t,r):Er(l,()=>c(n,e,t,r));return zn(u).pipe(mt())});return A(s).pipe(Fi())}function KA(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return A(!0);let o=i.map(s=>{let a=ji(s,n),l=FA(a)?a.canLoad(e,t):Er(n,()=>a(e,t));return zn(l)});return A(o).pipe(Fi(),gC(r))}function gC(n){return Au(be(e=>{if(ki(e))throw dC(n,e)}),N(e=>e===!0))}function YA(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return A(!0);let o=i.map(s=>{let a=ji(s,n),l=BA(a)?a.canMatch(e,t):Er(n,()=>a(e,t));return zn(l)});return A(o).pipe(Fi(),gC(r))}var ls=class{constructor(e){this.segmentGroup=e||null}},Xl=class extends Error{constructor(e){super(),this.urlTree=e}};function Ai(n){return ri(new ls(n))}function ZA(n){return ri(new y(4e3,!1))}function XA(n){return ri(fC(!1,ot.GuardRejected))}var Nh=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return A(r);if(i.numberOfChildren>1||!i.children[B])return ZA(e.redirectTo);i=i.children[B]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new Xl(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Un(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new ie(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new y(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Rh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function JA(n,e,t,r,i){let o=$h(n,e,t);return o.matched?(r=MA(e,r),YA(r,e,t,i).pipe(N(s=>s===!0?o:E({},Rh)))):A(o)}function $h(n,e,t){if(e.path==="**")return eN(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?E({},Rh):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Yx)(t,n,e);if(!i)return E({},Rh);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?E(E({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function eN(n){return{matched:!0,parameters:n.length>0?Qw(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function qw(n,e,t,r){return t.length>0&&rN(n,t,r)?{segmentGroup:new ie(e,nN(r,new ie(t,n.children))),slicedSegments:[]}:t.length===0&&iN(n,t,r)?{segmentGroup:new ie(n.segments,tN(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ie(n.segments,n.children),slicedSegments:t}}function tN(n,e,t,r){let i={};for(let o of t)if(Jl(n,e,o)&&!r[Xt(o)]){let s=new ie([],{});i[Xt(o)]=s}return E(E({},r),i)}function nN(n,e){let t={};t[B]=e;for(let r of n)if(r.path===""&&Xt(r)!==B){let i=new ie([],{});t[Xt(r)]=i}return t}function rN(n,e,t){return t.some(r=>Jl(n,e,r)&&Xt(r)!==B)}function iN(n,e,t){return t.some(r=>Jl(n,e,r))}function Jl(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function oN(n,e,t,r){return Xt(n)!==r&&(r===B||!Jl(e,t,n))?!1:$h(e,n,t).matched}function sN(n,e,t){return e.length===0&&!n.children[t]}var Ph=class{};function aN(n,e,t,r,i,o,s="emptyOnly"){return new Oh(n,e,t,r,i,s,o).recognize()}var lN=31,Oh=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Nh(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new y(4002,`'${e.segmentGroup}'`)}recognize(){let e=qw(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(N(t=>{let r=new ss([],Object.freeze({}),Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,{},B,this.rootComponentType,null,{}),i=new it(r,t),o=new Yl("",i),s=gA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,B).pipe(An(r=>{if(r instanceof Xl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ls?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=Lh(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(N(o=>o instanceof it?[o]:[]))}processChildren(e,t,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return de(i).pipe(si(o=>{let s=r.children[o],a=xA(t,o);return this.processSegmentGroup(e,a,s,o)}),li((o,s)=>(o.push(...s),o)),Nn(null),Vu(),Me(o=>{if(o===null)return Ai(r);let s=mC(o);return cN(s),A(s)}))}processSegment(e,t,r,i,o,s){return de(t).pipe(si(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,o,s).pipe(An(l=>{if(l instanceof ls)return A(null);throw l}))),mt(a=>!!a),An(a=>{if(pC(a))return sN(r,i,o)?A(new Ph):Ai(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,o,s,a){return oN(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s):Ai(i):Ai(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=$h(t,i,o);if(!a)return Ai(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>lN&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,d).pipe(Me(f=>this.processSegment(e,r,t,f.concat(u),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){let s=JA(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),s.pipe(ge(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ge(({routes:l})=>{let c=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:f}=a,h=new ss(u,f,Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,dN(r),Xt(r),r.component??r._loadedComponent??null,r,fN(r)),{segmentGroup:p,slicedSegments:g}=qw(t,u,d,l);if(g.length===0&&p.hasChildren())return this.processChildren(c,l,p).pipe(N(C=>C===null?null:new it(h,C)));if(l.length===0&&g.length===0)return A(new it(h,[]));let v=Xt(r)===o;return this.processSegment(c,l,p,g,v?B:o,!0).pipe(N(C=>new it(h,C instanceof it?[C]:[])))}))):Ai(t)))}getChildConfig(e,t,r){return t.children?A({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?A({routes:t._loadedRoutes,injector:t._loadedInjector}):KA(e,t,r,this.urlSerializer).pipe(Me(i=>i?this.configLoader.loadChildren(e,t).pipe(be(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):XA(t))):A({routes:[],injector:e})}};function cN(n){n.sort((e,t)=>e.value.outlet===B?-1:t.value.outlet===B?1:e.value.outlet.localeCompare(t.value.outlet))}function uN(n){let e=n.value.routeConfig;return e&&e.path===""}function mC(n){let e=[],t=new Set;for(let r of n){if(!uN(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=mC(r.children);e.push(new it(r.value,i))}return e.filter(r=>!t.has(r))}function dN(n){return n.data||{}}function fN(n){return n.resolve||{}}function hN(n,e,t,r,i,o){return Me(s=>aN(n,e,t,r,s.extractedUrl,i,o).pipe(N(({state:a,tree:l})=>_e(E({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function pN(n,e){return Me(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return A(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of yC(l))s.add(c);let a=0;return de(s).pipe(si(l=>o.has(l)?gN(l,r,n,e):(l.data=Lh(l,l.parent,n).resolve,A(void 0))),be(()=>a++),ai(1),Me(l=>a===s.size?A(t):$e))})}function yC(n){let e=n.children.map(t=>yC(t)).flat();return[n,...e]}function gN(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!cC(i)&&(o[cs]=i.title),mN(o,n,e,r).pipe(N(s=>(n._resolvedData=s,n.data=Lh(n,n.parent,t).resolve,null)))}function mN(n,e,t,r){let i=uh(n);if(i.length===0)return A({});let o={};return de(i).pipe(Me(s=>yN(n[s],e,t,r).pipe(mt(),be(a=>{o[s]=a}))),ai(1),Lu(o),An(s=>pC(s)?$e:ri(s)))}function yN(n,e,t,r){let i=us(e)??r,o=ji(n,i),s=o.resolve?o.resolve(e,t):Er(i,()=>o(e,t));return zn(s)}function lh(n){return ge(e=>{let t=n(e);return t?de(t).pipe(N(()=>e)):A(e)})}var vC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===B);return r}getResolvedTitleForRoute(t){return t.data[cs]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:()=>w(vN),providedIn:"root"})}}return n})(),vN=(()=>{class n extends vC{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(_(Uw))}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hh=new R("",{providedIn:"root",factory:()=>({})}),zh=new R(""),_N=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=w(Hf)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return A(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=zn(t.loadComponent()).pipe(N(_C),be(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),go(()=>{this.componentLoaders.delete(t)})),i=new Jr(r,()=>new Ee).pipe(Xr());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return A({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=wN(r,this.compiler,t,this.onLoadEndListener).pipe(go(()=>{this.childrenLoaders.delete(r)})),s=new Jr(o,()=>new Ee).pipe(Xr());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wN(n,e,t,r){return zn(n.loadChildren()).pipe(N(_C),Me(i=>i instanceof xo||Array.isArray(i)?A(i):de(e.compileModuleAsync(i))),N(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(zh,[],{optional:!0,self:!0}).flat()),{routes:s.map(Uh),injector:o}}))}function CN(n){return n&&typeof n=="object"&&"default"in n}function _C(n){return CN(n)?n.default:n}var Wh=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:()=>w(EN),providedIn:"root"})}}return n})(),EN=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bN=new R("");var DN=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ee,this.transitionAbortSubject=new Ee,this.configLoader=w(_N),this.environmentInjector=w(wt),this.urlSerializer=w(Fh),this.rootContexts=w(Li),this.location=w(Ho),this.inputBindingEnabled=w(Bh,{optional:!0})!==null,this.titleStrategy=w(vC),this.options=w(Hh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=w(Wh),this.createViewTransition=w(bN,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>A(void 0),this.rootComponentType=null;let t=i=>this.events.next(new _h(i)),r=i=>this.events.next(new wh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(_e(E(E({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Te({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Jo,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(tt(o=>o.id!==0),N(o=>_e(E({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ge(o=>{let s=!1,a=!1;return A(o).pipe(ge(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ot.SupersededByNewNavigation),$e;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?_e(E({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&u!=="reload"){let d="";return this.events.next(new Ar(l.id,this.urlSerializer.serialize(l.rawUrl),d,ph.IgnoredSameUrlNavigation)),l.resolve(null),$e}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return A(l).pipe(ge(d=>{let f=this.transitions?.getValue();return this.events.next(new ns(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?$e:Promise.resolve(d)}),hN(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),be(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=_e(E({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new Gl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:f,source:h,restoredState:p,extras:g}=l,v=new ns(d,this.urlSerializer.serialize(f),h,p);this.events.next(v);let C=aC(this.rootComponentType).snapshot;return this.currentTransition=o=_e(E({},l),{targetSnapshot:C,urlAfterRedirects:f,extras:_e(E({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,A(o)}else{let d="";return this.events.next(new Ar(l.id,this.urlSerializer.serialize(l.extractedUrl),d,ph.IgnoredByUrlHandlingStrategy)),l.resolve(null),$e}}),be(l=>{let c=new gh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),N(l=>(this.currentTransition=o=_e(E({},l),{guards:NA(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),UA(this.environmentInjector,l=>this.events.next(l)),be(l=>{if(o.guardsResult=l.guardsResult,ki(l.guardsResult))throw dC(this.urlSerializer,l.guardsResult);let c=new mh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),tt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",ot.GuardRejected),!1)),lh(l=>{if(l.guards.canActivateChecks.length)return A(l).pipe(be(c=>{let u=new yh(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),ge(c=>{let u=!1;return A(c).pipe(pN(this.paramsInheritanceStrategy,this.environmentInjector),be({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",ot.NoDataFromResolver)}}))}),be(c=>{let u=new vh(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),lh(l=>{let c=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(be(f=>{u.component=f}),N(()=>{})));for(let f of u.children)d.push(...c(f));return d};return Ma(c(l.targetSnapshot.root)).pipe(Nn(null),dn(1))}),lh(()=>this.afterPreactivation()),ge(()=>{let{currentSnapshot:l,targetSnapshot:c}=o,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?de(u).pipe(N(()=>o)):A(o)}),N(l=>{let c=bA(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=_e(E({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,o}),be(()=>{this.events.next(new is)}),AA(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),dn(1),be({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Cn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Hu(this.transitionAbortSubject.pipe(be(l=>{throw l}))),go(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",ot.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),An(l=>{if(a=!0,hC(l))this.events.next(new $n(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),SA(l)?this.events.next(new os(l.url)):o.resolve(!1);else{this.events.next(new rs(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(l))}catch(c){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(c)}}return $e}))}))}cancelNavigationTransition(t,r,i){let o=new $n(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function IN(n){return n!==Jo}var SN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:()=>w(TN),providedIn:"root"})}}return n})(),kh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},TN=(()=>{class n extends kh{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yf(n)))(i||n)}})()}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:()=>w(MN),providedIn:"root"})}}return n})(),MN=(()=>{class n extends wC{constructor(){super(...arguments),this.location=w(Ho),this.urlSerializer=w(Fh),this.options=w(Hh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=w(Wh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Un,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=aC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ns)this.stateMemento=this.createStateMemento();else if(t instanceof Ar)this.rawUrlTree=r.initialUrl;else if(t instanceof Gl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof is?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof $n&&(t.code===ot.GuardRejected||t.code===ot.NoDataFromResolver)?this.restoreHistory(r):t instanceof rs?this.restoreHistory(r,!0):t instanceof Cn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=E(E({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=E(E({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yf(n)))(i||n)}})()}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zo=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Zo||{});function xN(n,e){n.events.pipe(tt(t=>t instanceof Cn||t instanceof $n||t instanceof rs||t instanceof Ar),N(t=>t instanceof Cn||t instanceof Ar?Zo.COMPLETE:(t instanceof $n?t.code===ot.Redirect||t.code===ot.SupersededByNewNavigation:!1)?Zo.REDIRECTING:Zo.FAILED),tt(t=>t!==Zo.REDIRECTING),dn(1)).subscribe(()=>{e()})}function AN(n){throw n}var NN={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},RN={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Wn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=w(xl),this.stateManager=w(wC),this.options=w(Hh,{optional:!0})||{},this.pendingTasks=w(Sl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=w(DN),this.urlSerializer=w(Fh),this.location=w(Ho),this.urlHandlingStrategy=w(Wh),this._events=new Ee,this.errorHandler=this.options.errorHandler||AN,this.navigated=!1,this.routeReuseStrategy=w(SN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=w(zh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!w(Bh,{optional:!0}),this.eventsSubscription=new Ce,this.isNgZoneEnabled=w(ne)instanceof ne&&ne.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof $n&&r.code!==ot.Redirect&&r.code!==ot.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Cn)this.navigated=!0;else if(r instanceof os){let s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||IN(i.source)};this.scheduleNavigation(s,Jo,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}ON(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Jo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=E({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Uh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,u=null;switch(a){case"merge":u=E(E({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=rC(f)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return iC(d,t,u,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ki(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Jo,null,r)}navigate(t,r={skipLocationChange:!1}){return PN(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=E({},NN):r===!1?i=E({},RN):i=r,ki(t))return $w(this.currentUrlTree,t,i);let o=this.parseUrl(t);return $w(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,f)=>{a=d,l=f});let u=this.pendingTasks.add();return xN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function PN(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new y(4008,!1)}function ON(n){return!(n instanceof is)&&!(n instanceof os)}var kN=new R("");function CC(n,...e){return ll([{provide:zh,multi:!0,useValue:n},[],{provide:Hn,useFactory:FN,deps:[Wn]},{provide:$f,multi:!0,useFactory:LN},e.map(t=>t.\u0275providers)])}function FN(n){return n.routerState.root}function LN(){let n=w(ko);return e=>{let t=n.get(Uo);if(e!==t.components[0])return;let r=n.get(Wn),i=n.get(jN);n.get(VN)===1&&r.initialNavigation(),n.get(BN,null,W.Optional)?.setUpPreloading(),n.get(kN,null,W.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var jN=new R("",{factory:()=>new Ee}),VN=new R("",{providedIn:"root",factory:()=>1});var BN=new R("");var ec=(()=>{class n{constructor(){this.languageSubject=new Te("en"),this.language$=this.languageSubject.asObservable()}setLanguage(t){this.languageSubject.next(t)}getLanguage(){return this.languageSubject.value}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var UN=(n,e)=>({"footer-menu":n,"footer-default":e}),bC=(()=>{class n{constructor(t,r,i){this.platformId=t,this.contexts=r,this.languageService=i,this.title="area-51-website",this.screenWidth=0,this.router=w(Wn),this.selectedLanguage="en",this.isMenuPage=!1,this.languageService.language$.subscribe(o=>{this.selectedLanguage=o}),this.router.events.subscribe(o=>{o instanceof Cn&&(console.log("Navigation URL:",o.urlAfterRedirects),this.isMenuPage=o.urlAfterRedirects==="/",console.log("isMenuPage:",this.isMenuPage))})}ngOnInit(){Rw(this.platformId)&&(this.screenWidth=window.innerWidth)}onResize(t){this.screenWidth=window.innerWidth}reloadPage(){this.router.navigate(["/"])}getRouteAnimationData(){return this.contexts.getContext("primary")?.route?.snapshot?.data?.animation}static{this.\u0275fac=function(r){return new(r||n)(ue(Ye),ue(Li),ue(ec))}}static{this.\u0275cmp=Ln({type:n,selectors:[["app-root"]],hostBindings:function(r,i){r&1&&Ze("resize",function(s){return i.onResize(s)},!1,_l)},standalone:!0,features:[Bn],decls:10,vars:4,consts:[[1,"main"],[1,"content"],[1,"container"],[1,"site-footer",3,"ngClass"],[1,"footer-brand"]],template:function(r,i){r&1&&(I(0,"div",0)(1,"div",1)(2,"div",2),fe(3,"router-outlet"),O()(),I(4,"footer",3)(5,"span"),re(6," Powered by "),I(7,"span",4),re(8,"Libanux"),O(),re(9," | All rights reserved \xA9 2025 "),O()()()),r&2&&(G(4),te("ngClass",Ml(1,UN,i.isMenuPage,!i.isMenuPage)))},dependencies:[Vh,Pl],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#0a0a0a,#1a1a2e);color:#fff;min-height:100vh}.category-view[_ngcontent-%COMP%]{position:relative;min-height:100vh;overflow-x:hidden}.bg-particles[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;background:radial-gradient(circle at 20% 50%,rgba(33,204,147,.1) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(78,204,163,.1) 0%,transparent 50%),radial-gradient(circle at 40% 80%,rgba(33,204,147,.05) 0%,transparent 50%);animation:_ngcontent-%COMP%_particleFloat 20s ease-in-out infinite}@keyframes _ngcontent-%COMP%_particleFloat{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-20px) rotate(180deg)}}.menu-banner[_ngcontent-%COMP%]{position:relative;width:100vw;height:60vh;min-height:400px;overflow:hidden;margin-left:calc(50% - 50vw);margin-right:calc(50% - 50vw)}@supports (width: 100vw){.menu-banner[_ngcontent-%COMP%]{position:relative;width:100vw;height:60vh;min-height:400px;overflow:hidden;left:calc(-50vw + 50%);margin-left:0;margin-right:0}}.banner-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;object-position:center}.banner-overlay[_ngcontent-%COMP%], .banner-content[_ngcontent-%COMP%]{display:none}.category-title[_ngcontent-%COMP%]{font-size:clamp(2.5rem,6vw,4rem);font-weight:900;font-family:Inter,Helvetica Neue,Arial,sans-serif;margin:2.5rem 0 2rem;text-align:left;letter-spacing:-.02em;position:relative;background:linear-gradient(135deg,#00f5ff,#21cc93,#4ecca3,#00d4aa,#21cc93);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;background-size:200% 200%;animation:_ngcontent-%COMP%_gradientShift 4s ease-in-out infinite;filter:drop-shadow(0 4px 8px rgba(33,204,147,.3)) drop-shadow(0 8px 16px rgba(78,204,163,.2)) drop-shadow(0 12px 24px rgba(0,213,170,.1))}@keyframes _ngcontent-%COMP%_gradientShift{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.category-title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-10px;left:0;width:80px;height:4px;background:linear-gradient(90deg,#21cc93,#4ecca3);border-radius:2px;box-shadow:0 0 20px #21cc9366}.category-subtitle[_ngcontent-%COMP%]{display:none}.main-content[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto}.subcategories-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem}.subcategory-card[_ngcontent-%COMP%]{background:#ffffff0d;border-radius:20px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(33,204,147,.2);overflow:hidden;transition:all .3s ease}.subcategory-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 0 20px #21cc931a,0 0 40px #4ecca30d}.subcategory-header[_ngcontent-%COMP%]{padding:1.5rem;display:flex;justify-content:space-between;align-items:center;cursor:pointer;transition:all .3s ease}.subcategory-header[_ngcontent-%COMP%]:hover{background:#21cc931a}.subcategory-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.subcategory-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;object-fit:cover;box-shadow:0 0 20px #21cc9333,0 0 40px #4ecca31a}.subcategory-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#21cc93;text-shadow:0 0 30px rgba(33,204,147,.3),0 0 60px rgba(78,204,163,.2)}.expand-icon[_ngcontent-%COMP%]{font-size:1.2rem;color:#21cc93;transition:transform .3s ease;filter:drop-shadow(0 0 10px rgba(33,204,147,.3))}.expand-icon.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.items-container[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .5s ease;padding:0 1.5rem}.items-container.expanded[_ngcontent-%COMP%]{max-height:2000px;padding:0 1.5rem 1rem}.items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:.4rem;margin-top:.8rem}.item-card[_ngcontent-%COMP%]{background:#ffffff14;border-radius:15px;overflow:hidden;transition:all .3s ease;border:1px solid rgba(33,204,147,.1);max-width:320px;justify-self:center}.item-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 0 15px #21cc9314,0 0 30px #4ecca30a;border-color:#21cc9333}.item-image[_ngcontent-%COMP%]{height:150px;overflow:hidden}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.item-card[_ngcontent-%COMP%]:hover   .item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.1)}.item-content[_ngcontent-%COMP%]{padding:1rem}.item-name[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;font-family:Inter,Segoe UI,sans-serif;margin-bottom:.6rem;color:#f8fafc;line-height:1.3;letter-spacing:.3px;text-shadow:0 2px 8px rgba(0,0,0,.8),0 4px 16px rgba(0,0,0,.6);filter:drop-shadow(0 0 15px rgba(248,250,252,.3)) drop-shadow(0 0 30px rgba(255,255,255,.1))}.price[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#21cc93;margin-bottom:.4rem;text-shadow:0 0 30px rgba(33,204,147,.3),0 0 60px rgba(78,204,163,.2)}.description[_ngcontent-%COMP%]{font-size:.95rem;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-weight:400;opacity:1;line-height:1.5;color:#e2e8f0;word-wrap:break-word;overflow-wrap:break-word;hyphens:auto;text-align:left;margin-top:.3rem;font-style:normal;letter-spacing:.1px;text-shadow:0 1px 3px rgba(0,0,0,.7),0 2px 6px rgba(0,0,0,.5)}.loading-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;gap:1rem}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:3px solid rgba(33,204,147,.3);border-top:3px solid #21cc93;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;box-shadow:0 0 30px #21cc934d,0 0 60px #4ecca333}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.language-selector-wrapper[_ngcontent-%COMP%]{position:fixed;top:1.5rem;right:2rem;z-index:1000;background:#fff;border-radius:12px;box-shadow:0 2px 12px #4ecca31a;padding:.5rem 1.2rem;display:flex;align-items:center;gap:.7rem}.language-label[_ngcontent-%COMP%]{font-size:1rem;color:#4ecca3;font-weight:600;letter-spacing:1px}.language-select[_ngcontent-%COMP%]{border:1.5px solid #4ECCA3;border-radius:8px;padding:.4rem 1.2rem;font-size:1rem;color:#222;background:#f8f9fa;font-weight:500;outline:none;transition:border .2s}.language-select[_ngcontent-%COMP%]:focus{border-color:#393e46}.language-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#222;background:#fff}.site-footer[_ngcontent-%COMP%]{width:100%;text-align:center;padding:3rem 0 2rem;color:#111;font-family:Inter,Segoe UI,Arial,sans-serif;font-size:1rem;letter-spacing:.02em;font-style:italic;transition:background .3s}.site-footer[_ngcontent-%COMP%]   .footer-brand[_ngcontent-%COMP%]{color:#2176ff;font-weight:700;font-style:normal;letter-spacing:.04em}.footer-menu[_ngcontent-%COMP%]{background:#e9c10d1a}.footer-default[_ngcontent-%COMP%]{background:#fff;box-shadow:0 -4px 18px #21cc931a}@media (max-width: 768px){.main-content[_ngcontent-%COMP%], .subcategory-header[_ngcontent-%COMP%]{padding:1rem}.items-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:.5rem}.item-card[_ngcontent-%COMP%]{max-width:100%}.banner-content[_ngcontent-%COMP%]{padding:0 1rem}.category-title[_ngcontent-%COMP%]{font-size:clamp(2rem,8vw,3rem);margin:2rem 0 1.5rem}}@media (max-width: 480px){.items-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem}.subcategory-info[_ngcontent-%COMP%]{gap:.5rem}.subcategory-icon[_ngcontent-%COMP%]{width:40px;height:40px}.subcategory-name[_ngcontent-%COMP%]{font-size:1.2rem}.subcategories-container[_ngcontent-%COMP%]{gap:.6rem}}@media (max-width: 600px){.site-footer[_ngcontent-%COMP%]{font-size:.95rem;padding:.7rem 0;border-radius:0 0 10px 10px;word-break:break-word}}']})}}return n})();var fs=class{};var $N="firebase",HN="10.14.1";xn($N,HN,"app");var Vi=new Fn("ANGULARFIRE2_VERSION");var zN=(n,e)=>{let t=e?[e]:ey(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Nr=class{constructor(){return zN(WN)}},WN="app-check";function Gh(){}var tc=class{zone;delegate;constructor(e,t=Ou){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Qh=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Gh,{},Gh,Gh)),t.pipe(be({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},nc=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new tc(Zone.current)),this.insideAngular=t.run(()=>new tc(Zone.current,ho)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(_(ne))};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qN(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function En(n){return GN(qN())(n)}function GN(n){return function(t){return t=t.lift(new Qh(n.ngZone)),t.pipe(xt(n.outsideAngular),gt(n.insideAngular))}}var YN=new Map,ZN={activated:!1,tokenObservers:[]},XN={initialized:!1,enabled:!1};function Ft(n){return YN.get(n)||Object.assign({},ZN)}function xC(){return XN}var JN="https://content-firebaseappcheck.googleapis.com/v1";var eR="exchangeDebugToken",IC={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},IH=24*60*60*1e3;var Yh=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return ht(this,null,function*(){this.stop();try{this.pending=new Ne,this.pending.promise.catch(t=>{}),yield tR(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ne,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function tR(n){return new Promise(e=>{setTimeout(e,n)})}var nR={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},qn=new qm("appCheck","AppCheck",nR);function AC(n){if(!Ft(n).activated)throw qn.create("use-before-activation",{appName:n.name})}function NC(r,i){return ht(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let h=yield s.getHeartbeatsHeader();h&&(o["X-Firebase-Client"]=h)}let a={method:"POST",body:JSON.stringify(e),headers:o},l;try{l=yield fetch(n,a)}catch(h){throw qn.create("fetch-network-error",{originalErrorMessage:h?.message})}if(l.status!==200)throw qn.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(h){throw qn.create("fetch-parse-error",{originalErrorMessage:h?.message})}let u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw qn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let d=Number(u[1])*1e3,f=Date.now();return{token:c.token,expireTimeMillis:f+d,issuedAtTimeMillis:f}})}function RC(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${JN}/projects/${t}/apps/${r}:${eR}?key=${i}`,body:{debug_token:e}}}var rR="firebase-app-check-database",iR=1,Zh="firebase-app-check-store";var rc=null;function oR(){return rc||(rc=new Promise((n,e)=>{try{let t=indexedDB.open(rR,iR);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(qn.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Zh,{keyPath:"compositeKey"})}}}catch(t){e(qn.create("storage-open",{originalErrorMessage:t?.message}))}}),rc)}function sR(n,e){return aR(lR(n),e)}function aR(n,e){return ht(this,null,function*(){let r=(yield oR()).transaction(Zh,"readwrite"),o=r.objectStore(Zh).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=l=>{s()},r.onerror=l=>{var c;a(qn.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function lR(n){return`${n.options.appId}-${n.name}`}var Xh=new Gr("@firebase/app-check");function Kh(n,e){return Wm()?sR(n,e).catch(t=>{Xh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function PC(){return xC().enabled}function OC(){return ht(this,null,function*(){let n=xC();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var cR={error:"UNKNOWN_ERROR"};function uR(n){return ra.encodeString(JSON.stringify(n),!1)}function Jh(n,e=!1){return ht(this,null,function*(){let t=n.app;AC(t);let r=Ft(t),i=r.token,o;if(i&&!hs(i)&&(r.token=void 0,i=void 0),!i){let l=yield r.cachedTokenPromise;l&&(hs(l)?i=l:yield Kh(t,void 0))}if(!e&&i&&hs(i))return{token:i.token};let s=!1;if(PC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=NC(RC(t,yield OC()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let l=yield r.exchangeTokenPromise;return yield Kh(t,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Ft(t).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?Xh.warn(l.message):Xh.error(l),o=l}let a;return i?o?hs(i)?a={token:i.token,internalError:o}:a=TC(o):(a={token:i.token},r.token=i,yield Kh(t,i)):a=TC(o),s&&pR(t,a),a})}function dR(n){return ht(this,null,function*(){let e=n.app;AC(e);let{provider:t}=Ft(e);if(PC()){let r=yield OC(),{token:i}=yield NC(RC(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function fR(n,e,t,r){let{app:i}=n,o=Ft(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&hs(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),SC(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>SC(n))}function kC(n,e){let t=Ft(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function SC(n){let{app:e}=n,t=Ft(e),r=t.tokenRefresher;r||(r=hR(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function hR(n){let{app:e}=n;return new Yh(()=>ht(this,null,function*(){let t=Ft(e),r;if(t.token?r=yield Jh(n,!0):r=yield Jh(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Ft(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},IC.RETRIAL_MIN_WAIT,IC.RETRIAL_MAX_WAIT)}function pR(n,e){let t=Ft(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function hs(n){return n.expireTimeMillis-Date.now()>0}function TC(n){return{token:uR(cR),error:n}}var ep=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Ft(this.app);for(let t of e)kC(this.app,t.next);return Promise.resolve()}};function gR(n,e){return new ep(n,e)}function mR(n){return{getToken:e=>Jh(n,e),getLimitedUseToken:()=>dR(n),addTokenListener:e=>fR(n,"INTERNAL",e),removeTokenListener:e=>kC(n.app,e)}}var yR="@firebase/app-check",vR="0.8.8";var _R="app-check",MC="app-check-internal";function wR(){co(new ln(_R,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return gR(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(MC).initialize()})),co(new ln(MC,n=>{let e=n.getProvider("app-check").getImmediate();return mR(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),xn(yR,vR)}wR();var CR=["localhost","0.0.0.0","127.0.0.1"],LH=typeof window<"u"&&CR.includes(window.location.hostname);var ER="firebase",bR="10.14.1";Qe.registerVersion(ER,bR,"app-compat");var DR=["ngOnDestroy"],jC=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(DR.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let l=a?.[o];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>s[l],apply:(a,l,c)=>s.then(u=>{let d=u?.(...c);return r?.spy?.apply&&r.spy.apply(o,c,d),d})})})});var ic=class{constructor(e){return e}},Bi=new R("angularfire2.app.options"),Ui=new R("angularfire2.app.name");function ps(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Qe.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Qe.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;IR("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ic(s)}var IR=(n,...e)=>{Wf()&&typeof console<"u"&&console[n](...e)},SR={provide:ic,useFactory:ps,deps:[Bi,ne,[new Ci,Ui]]},VC=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Bi,useValue:t},{provide:Ui,useValue:r}]}}constructor(t){Qe.registerVersion("angularfire",Vi.full,"core"),Qe.registerVersion("angularfire",Vi.full,"app-compat"),Qe.registerVersion("angular",hw.full,t.toString())}static \u0275fac=function(r){return new(r||n)(_(Ye))};static \u0275mod=Yt({type:n});static \u0275inj=Kt({providers:[SR]})}return n})();function oc(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return TR(i,s)||(LC("error",`${e} was already initialized on the ${t} Firebase App with different settings.${MR?" You may need to reload as Firebase is not HMR aware.":""}`),LC("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function TR(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var MR=typeof module<"u"&&!!module.hot,LC=(n,...e)=>{Wf()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var tp=new R("angularfire2.auth.use-emulator"),np=new R("angularfire2.auth.settings"),rp=new R("angularfire2.auth.tenant-id"),ip=new R("angularfire2.auth.langugage-code"),op=new R("angularfire2.auth.use-device-language"),sp=new R("angularfire.auth.persistence"),ap=(n,e,t,r,i,o,s,a)=>oc(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,o&&l.useDeviceLanguage(),s)for(let[c,u]of Object.entries(s))l.settings[c]=u;return a&&l.setPersistence(a),l},[t,r,i,o,s,a]),BC=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,l,c,u,d,f,h){let p=new Ee,g=A(void 0).pipe(gt(s.outsideAngular),ge(()=>o.runOutsideAngular(()=>import("./chunk-DWD5WBU4.js"))),N(()=>ps(t,o,r)),N(v=>ap(v,o,a,c,u,d,l,f)),Na({bufferSize:1,refCount:!1}));if(Wo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=A(null);else{g.pipe(mt()).subscribe();let v=g.pipe(ge(S=>S.getRedirectResult().then($=>$,()=>null)),En,Na({bufferSize:1,refCount:!1})),C=g.pipe(ge(S=>new Y($=>({unsubscribe:o.runOutsideAngular(()=>S.onAuthStateChanged(we=>$.next(we),we=>$.error(we),()=>$.complete()))})))),k=g.pipe(ge(S=>new Y($=>({unsubscribe:o.runOutsideAngular(()=>S.onIdTokenChanged(we=>$.next(we),we=>$.error(we),()=>$.complete()))}))));this.authState=v.pipe(Ra(C),xt(s.outsideAngular),gt(s.insideAngular)),this.user=v.pipe(Ra(k),xt(s.outsideAngular),gt(s.insideAngular)),this.idToken=this.user.pipe(ge(S=>S?de(S.getIdToken()):A(null))),this.idTokenResult=this.user.pipe(ge(S=>S?de(S.getIdTokenResult()):A(null))),this.credential=oi(v,p,this.authState.pipe(tt(S=>!S))).pipe(N(S=>S?.user?S:null),xt(s.outsideAngular),gt(s.insideAngular))}return jC(this,g,o,{spy:{apply:(v,C,k)=>{(v.startsWith("signIn")||v.startsWith("createUser"))&&k.then(S=>p.next(S))}}})}static \u0275fac=function(r){return new(r||n)(_(Bi),_(Ui,8),_(Ye),_(ne),_(nc),_(tp,8),_(np,8),_(rp,8),_(ip,8),_(op,8),_(sp,8),_(Nr,8))};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var UC="@firebase/database",$C="1.0.8";var _g="";function wg(n){_g=n}var gp=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),De(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:ia(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var mp=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return pt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var _0=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new gp(e)}}catch{}return new mp},Pr=_0("localStorage"),yp=_0("sessionStorage");var Wi=new Gr("@firebase/database"),w0=function(){let n=1;return function(){return n++}}(),C0=function(n){let e=Zm(n),t=new Ym;t.update(e);let r=t.digest();return ra.encodeByteArray(r)},js=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=js.apply(null,r):typeof r=="object"?e+=De(r):e+=r,e+=" "}return e},Or=null,HC=!0,E0=function(n,e){m(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Wi.logLevel=Xm.VERBOSE,Or=Wi.log.bind(Wi),e&&yp.set("logging_enabled",!0)):typeof n=="function"?Or=n:(Or=null,yp.remove("logging_enabled"))},Pe=function(...n){if(HC===!0&&(HC=!1,Or===null&&yp.get("logging_enabled")===!0&&E0(!0)),Or){let e=js.apply(null,n);Or(e)}},Vs=function(n){return function(...e){Pe(n,...e)}},vp=function(...n){let e="FIREBASE INTERNAL ERROR: "+js(...n);Wi.error(e)},tn=function(...n){let e=`FIREBASE FATAL ERROR: ${js(...n)}`;throw Wi.error(e),new Error(e)},Be=function(...n){let e="FIREBASE WARNING: "+js(...n);Wi.warn(e)},AR=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Be("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Pc=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},NR=function(n){if(Ut()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Yn="[MIN_NAME]",bn="[MAX_NAME]",Fr=function(n,e){if(n===e)return 0;if(n===Yn||e===bn)return-1;if(e===Yn||n===bn)return 1;{let t=zC(n),r=zC(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},RR=function(n,e){return n===e?0:n<e?-1:1},gs=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+De(e))},Cg=function(n){if(typeof n!="object"||n===null)return De(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=De(e[r]),t+=":",t+=Cg(n[e[r]]);return t+="}",t},b0=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Oe(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var D0=function(n){m(!Pc(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,o,s,a,l;n===0?(o=0,s=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(o=0,s=Math.round(n/Math.pow(2,1-r-t))));let c=[];for(l=t;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=e;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(i?1:0),c.reverse();let u=c.join(""),d="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},PR=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},OR=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function kR(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var FR=new RegExp("^-?(0*)\\d{1,10}$"),LR=-2147483648,jR=2147483647,zC=function(n){if(FR.test(n)){let e=Number(n);if(e>=LR&&e<=jR)return e}return null},eo=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Be("Exception was thrown by user callback.",t),e},Math.floor(0))}},VR=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},_s=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var _p=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Be(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var wp=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Pe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Be(e)}},ws=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),ac="5",I0="v",S0="s",T0="r",M0="f",x0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,A0="ls",N0="p",Cp="ac",R0="websocket",P0="long_polling";var lc=class{constructor(e,t,r,i,o=!1,s="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Pr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Pr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function BR(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function O0(n,e,t){m(typeof e=="string","typeof type must == string"),m(typeof t=="object","typeof params must == object");let r;if(e===R0)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===P0)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);BR(n)&&(t.ns=n.namespace);let i=[];return Oe(t,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Ep=class{constructor(){this.counters_={}}incrementCounter(e,t=1){pt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return $m(this.counters_)}};var lp={},cp={};function Eg(n){let e=n.toString();return lp[e]||(lp[e]=new Ep),lp[e]}function UR(n,e){let t=n.toString();return cp[t]||(cp[t]=e()),cp[t]}var bp=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&eo(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var WC="start",$R="close",HR="pLPCommand",zR="pRTLPCB",k0="id",F0="pw",L0="ser",WR="cb",qR="seg",GR="ts",QR="d",KR="dframe",j0=1870,V0=30,YR=j0-V0,ZR=25e3,XR=3e4,Ds=class n{constructor(e,t,r,i,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vs(e),this.stats_=Eg(t),this.urlFn=l=>(this.appCheckToken&&(l[Cp]=this.appCheckToken),O0(t,P0,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new bp(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(XR)),NR(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Dp((...o)=>{let[s,a,l,c,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===WC)this.id=a,this.password=l;else if(s===$R)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[WC]="t",r[L0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[WR]=this.scriptTagHolder.uniqueCallbackIdentifier),r[I0]=ac,this.transportSessionId&&(r[S0]=this.transportSessionId),this.lastSessionId&&(r[A0]=this.lastSessionId),this.applicationId&&(r[N0]=this.applicationId),this.appCheckToken&&(r[Cp]=this.appCheckToken),typeof location<"u"&&location.hostname&&x0.test(location.hostname)&&(r[T0]=M0);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Ut()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!PR()&&!OR()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=De(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=Um(t),i=b0(r,YR);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Ut())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[KR]="t",r[k0]=e,r[F0]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=De(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Dp=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ut())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=w0(),window[HR+this.uniqueCallbackIdentifier]=e,window[zR+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Pe("frame writing exception"),a.stack&&Pe(a.stack),Pe(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Pe("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[k0]=this.myID,e[F0]=this.myPW,e[L0]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+V0+r.length<=j0;){let s=this.pendingSegs.shift();r=r+"&"+qR+i+"="+s.seg+"&"+GR+i+"="+s.ts+"&"+QR+i+"="+s.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(ZR)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,t){Ut()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Pe("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var JR=16384,eP=45e3,cc=null;typeof MozWebSocket<"u"?cc=MozWebSocket:typeof WebSocket<"u"&&(cc=WebSocket);var Hi=(()=>{class n{constructor(t,r,i,o,s,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vs(this.connId),this.stats_=Eg(r),this.connURL=n.connectionURL_(r,a,l,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,s){let a={};return a[I0]=ac,!Ut()&&typeof location<"u"&&location.hostname&&x0.test(location.hostname)&&(a[T0]=M0),r&&(a[S0]=r),i&&(a[A0]=i),o&&(a[Cp]=o),s&&(a[N0]=s),O0(t,R0,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Pr.set("previous_websocket_failure",!0);try{let i;if(Ut()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${ac}/${_g}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new cc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&cc!==null&&!n.forceDisallow_}static previouslyFailed(){return Pr.isInMemoryStorage||Pr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Pr.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ia(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(m(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=De(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=b0(r,JR);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(eP))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),B0=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ds,Hi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=Hi&&Hi.isAvailable(),i=r&&!Hi.previouslyFailed();if(t.webSocketOnly&&(r||Be("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Hi];else{let o=this.transports_=[];for(let s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),tP=6e4,nP=5e3,rP=10*1024,iP=100*1024,up="t",qC="d",oP="s",GC="r",sP="e",QC="o",KC="a",YC="n",ZC="p",aP="h",Ip=class{constructor(e,t,r,i,o,s,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vs("c:"+this.id+":"),this.transportManager_=new B0(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=_s(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>iP?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>rP?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(up in e){let t=e[up];t===KC?this.upgradeIfSecondaryHealthy_():t===GC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===QC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=gs("t",e),r=gs("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ZC,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:KC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:YC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=gs("t",e),r=gs("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=gs(up,e);if(qC in e){let r=e[qC];if(t===aP){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===YC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===oP?this.onConnectionShutdown_(r):t===GC?this.onReset_(r):t===sP?vp("Server Error: "+r):t===QC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vp("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ac!==r&&Be("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),_s(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(tP))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):_s(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(nP))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ZC,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Pr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var uc=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var dc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},m(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){m(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var fc=class n extends dc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!vu()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return m(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var XC=32,JC=768,J=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function X(){return new J("")}function H(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Zn(n){return n.pieces_.length-n.pieceNum_}function ae(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new J(n.pieces_,e)}function bg(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function lP(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Is(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function U0(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new J(e,0)}function he(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof J)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new J(t,0)}function z(n){return n.pieceNum_>=n.pieces_.length}function ze(n,e){let t=H(n),r=H(e);if(t===null)return e;if(t===r)return ze(ae(n),ae(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function cP(n,e){let t=Is(n,0),r=Is(e,0);for(let i=0;i<t.length&&i<r.length;i++){let o=Fr(t[i],r[i]);if(o!==0)return o}return t.length===r.length?0:t.length<r.length?-1:1}function Dg(n,e){if(Zn(n)!==Zn(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Dt(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Zn(n)>Zn(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var Sp=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Is(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=lo(this.parts_[r]);$0(this)}};function uP(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=lo(e),$0(n)}function dP(n){let e=n.parts_.pop();n.byteLength_-=lo(e),n.parts_.length>0&&(n.byteLength_-=1)}function $0(n){if(n.byteLength_>JC)throw new Error(n.errorPrefix_+"has a key path longer than "+JC+" bytes ("+n.byteLength_+").");if(n.parts_.length>XC)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+XC+") or object contains a cycle "+Rr(n))}function Rr(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var Tp=class n extends dc{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return m(e==="visible","Unknown event type: "+e),[this.visible_]}};var ms=1e3,fP=60*5*1e3,e0=30*1e3,hP=1.3,pP=3e4,gP="server_kill",t0=3,Ig=(()=>{class n extends uc{constructor(t,r,i,o,s,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=Vs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ms,this.maxReconnectDelay_=fP,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Ut())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Tp.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&fc.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_(De(s)),m(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();let r=new Ne,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?r.resolve(l):r.reject(l)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(t,r,i,o){this.initConnection_();let s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),m(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),m(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let l={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(a,s,l=>{let c=l.d,u=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(i,o),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&pt(t,"w")){let i=Mn(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Be(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Qm(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=e0)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=Gm(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),m(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);let s={p:t},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+De(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):vp("Unrecognized action received from server: "+De(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){m(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ms,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ms,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>pP&&(this.reconnectDelay_=ms),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*hP)}this.onConnectStatus_(!1)}establishConnection_(){return ht(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,i())},u=function(f){m(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:c,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Pe("getToken() completed but was canceled"):(Pe("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,l=new Ip(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,p=>{Be(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(gP)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Be(f),c())}}})}interrupt(t){Pe("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Pe("Resuming connection for reason: "+t),delete this.interruptReasons_[t],oa(this.interruptReasons_)&&(this.reconnectDelay_=ms,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(s=>Cg(s)).join("$"):i="default";let o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){let i=new J(t).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Pe("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=t0&&(this.reconnectDelay_=e0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Pe("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=t0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Ut()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+_g.replace(/\./g,"-")]=1,vu()?t["framework.cordova"]=1:zm()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=fc.getInstance().currentlyOnline();return oa(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Q=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var qi=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Q(Yn,e),i=new Q(Yn,t);return this.compare(r,i)!==0}minPost(){return Q.MIN}};var sc,hc=class extends qi{static get __EMPTY_NODE(){return sc}static set __EMPTY_NODE(e){sc=e}compare(e,t){return Fr(e.name,t.name)}isDefinedOn(e){throw qr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Q.MIN}maxPost(){return new Q(bn,sc)}makePost(e,t){return m(typeof e=="string","KeyIndex indexValue must always be a string."),new Q(e,sc)}toString(){return".key"}},en=new hc;var zi=class{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?r(e.key,t):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Lt=(()=>{class n{constructor(t,r,i,o,s){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??It.EMPTY_NODE,this.right=s??It.EMPTY_NODE}copy(t,r,i,o,s){return new n(t??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this,s=i(t,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(t,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return It.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return It.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),Mp=class{copy(e,t,r,i,o){return this}insert(e,t,r){return new Lt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},It=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Lt.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Lt.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new zi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new zi(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new zi(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new zi(this.root_,null,this.comparator_,!0,e)}};It.EMPTY_NODE=new Mp;function mP(n,e){return Fr(n.name,e.name)}function Sg(n,e){return Fr(n,e)}var xp;function yP(n){xp=n}var H0=function(n){return typeof n=="number"?"number:"+D0(n):"string:"+n},z0=function(n){if(n.isLeafNode()){let e=n.val();m(typeof e=="string"||typeof e=="number"||typeof e=="object"&&pt(e,".sv"),"Priority must be a string or number.")}else m(n===xp||n.isEmpty(),"priority of unexpected type.");m(n===xp||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var n0,Gi=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,m(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),z0(this.priorityNode_)}static set __childrenNodeConstructor(t){n0=t}static get __childrenNodeConstructor(){return n0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return z(t)?this:H(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=H(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(m(i!==".priority"||Zn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ae(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+H0(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=D0(this.value_):t+=this.value_,this.lazyHash_=C0(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(m(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return m(o>=0,"Unknown leaf type: "+r),m(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),W0,q0;function vP(n){W0=n}function _P(n){q0=n}var Ap=class extends qi{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?Fr(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Q.MIN}maxPost(){return new Q(bn,new Gi("[PRIORITY-POST]",q0))}makePost(e,t){let r=W0(e);return new Q(t,new Gi("[PRIORITY-POST]",r))}toString(){return".priority"}},le=new Ap;var wP=Math.log(2),Np=class{constructor(e){let t=o=>parseInt(Math.log(o)/wP,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},pc=function(n,e,t,r){n.sort(e);let i=function(l,c){let u=c-l,d,f;if(u===0)return null;if(u===1)return d=n[l],f=t?t(d):d,new Lt(f,d.node,Lt.BLACK,null,null);{let h=parseInt(u/2,10)+l,p=i(l,h),g=i(h+1,c);return d=n[h],f=t?t(d):d,new Lt(f,d.node,Lt.BLACK,p,g)}},o=function(l){let c=null,u=null,d=n.length,f=function(p,g){let v=d-p,C=d;d-=p;let k=i(v+1,C),S=n[v],$=t?t(S):S;h(new Lt($,S.node,g,null,k))},h=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){let g=l.nextBitIsOne(),v=Math.pow(2,l.count-(p+1));g?f(v,Lt.BLACK):(f(v,Lt.BLACK),f(v,Lt.RED))}return u},s=new Np(n.length),a=o(s);return new It(r||e,a)};var dp,$i={},Qi=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return m($i&&le,"ChildrenNode.ts has not been loaded"),dp=dp||new n({".priority":$i},{".priority":le}),dp}get(e){let t=Mn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof It?t:null}hasIndex(e){return pt(this.indexSet_,e.toString())}addIndex(e,t){m(e!==en,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator(Q.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=pc(r,e.getCompare()):a=$i;let l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;let u=Object.assign({},this.indexes_);return u[l]=a,new n(u,c)}addToIndexes(e,t){let r=ao(this.indexes_,(i,o)=>{let s=Mn(this.indexSet_,o);if(m(s,"Missing index implementation for "+o),i===$i)if(s.isDefinedOn(e.node)){let a=[],l=t.getIterator(Q.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),pc(a,s.getCompare())}else return $i;else{let a=t.get(e.name),l=i;return a&&(l=l.remove(new Q(e.name,a))),l.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=ao(this.indexes_,i=>{if(i===$i)return i;{let o=t.get(e.name);return o?i.remove(new Q(e.name,o)):i}});return new n(r,this.indexSet_)}};var ys,L=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&z0(this.priorityNode_),this.children_.isEmpty()&&m(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ys||(ys=new n(new It(Sg),null,Qi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ys}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?ys:r}}getChild(t){let r=H(t);return r===null?this:this.getImmediateChild(r).getChild(ae(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(m(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Q(t,r),o,s;r.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?ys:this.priorityNode_;return new n(o,a,s)}}updateChild(t,r){let i=H(t);if(i===null)return r;{m(H(t)!==".priority"||Zn(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ae(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(le,(a,l)=>{r[a]=l.val(t),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*i){let a=[];for(let l in r)a[l]=r[l];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+H0(this.getPriority().val())+":"),this.forEachChild(le,(r,i)=>{let o=i.hash();o!==""&&(t+=":"+r+":"+o)}),this.lazyHash_=t===""?"":C0(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new Q(t,r));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Q(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Q(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,Q.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,Q.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Bs?-1:0}withIndex(t){if(t===en||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===en||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(le),o=r.getIterator(le),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===en?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),Rp=class extends L{constructor(){super(new It(Sg),L.EMPTY_NODE,Qi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return L.EMPTY_NODE}isEmpty(){return!1}},Bs=new Rp;Object.defineProperties(Q,{MIN:{value:new Q(Yn,L.EMPTY_NODE)},MAX:{value:new Q(bn,Bs)}});hc.__EMPTY_NODE=L.EMPTY_NODE;Gi.__childrenNodeConstructor=L;yP(Bs);_P(Bs);var CP=!0;function me(n,e=null){if(n===null)return L.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),m(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new Gi(t,me(e))}if(!(n instanceof Array)&&CP){let t=[],r=!1;if(Oe(n,(s,a)=>{if(s.substring(0,1)!=="."){let l=me(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new Q(s,l)))}}),t.length===0)return L.EMPTY_NODE;let o=pc(t,mP,s=>s.name,Sg);if(r){let s=pc(t,le.getCompare());return new L(o,me(e),new Qi({".priority":s},{".priority":le}))}else return new L(o,me(e),Qi.Default)}else{let t=L.EMPTY_NODE;return Oe(n,(r,i)=>{if(pt(n,r)&&r.substring(0,1)!=="."){let o=me(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(me(e))}}vP(me);var Ss=class extends qi{constructor(e){super(),this.indexPath_=e,m(!z(e)&&H(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?Fr(e.name,t.name):o}makePost(e,t){let r=me(e),i=L.EMPTY_NODE.updateChild(this.indexPath_,r);return new Q(t,i)}maxPost(){let e=L.EMPTY_NODE.updateChild(this.indexPath_,Bs);return new Q(bn,e)}toString(){return Is(this.indexPath_,0).join("/")}};var Pp=class extends qi{compare(e,t){let r=e.node.compareTo(t.node);return r===0?Fr(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Q.MIN}maxPost(){return Q.MAX}makePost(e,t){let r=me(e);return new Q(t,r)}toString(){return".value"}},Tg=new Pp;function G0(n){return{type:"value",snapshotNode:n}}function Ki(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Ts(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ms(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function EP(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var xs=class{constructor(e){this.index_=e}updateChild(e,t,r,i,o,s){m(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(t)?s.trackChildChange(Ts(t,a)):m(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Ki(t,r)):s.trackChildChange(Ms(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(le,(i,o)=>{t.hasChild(i)||r.trackChildChange(Ts(i,o))}),t.isLeafNode()||t.forEachChild(le,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(Ms(i,o,s))}else r.trackChildChange(Ki(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?L.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var gc=class n{constructor(e){this.indexedFilter_=new xs(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,s){return this.matches(new Q(t,r))||(r=L.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,s)}updateFullNode(e,t,r){t.isLeafNode()&&(t=L.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(L.EMPTY_NODE);let o=this;return t.forEachChild(le,(s,a)=>{o.matches(new Q(s,a))||(i=i.updateImmediateChild(s,L.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var Op=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new gc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,s){return this.rangedFilter_.matches(new Q(t,r))||(r=L.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,s):this.fullLimitUpdateChild_(e,t,r,o,s)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=L.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=L.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(L.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,L.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=e;m(a.numChildren()===this.limit_,"");let l=new Q(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){let d=a.getImmediateChild(t),f=i.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===t||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,l);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(Ms(t,r,d)),a.updateImmediateChild(t,r);{o?.trackChildChange(Ts(t,d));let g=a.updateImmediateChild(t,L.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(Ki(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}}else return r.isEmpty()?e:u&&s(c,l)>=0?(o!=null&&(o.trackChildChange(Ts(c.name,c.node)),o.trackChildChange(Ki(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,L.EMPTY_NODE)):e}};var As=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=le}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return m(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return m(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Yn}hasEnd(){return this.endSet_}getIndexEndValue(){return m(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return m(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:bn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return m(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===le}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function bP(n){return n.loadsAllData()?new xs(n.getIndex()):n.hasLimit()?new Op(n):new gc(n)}function DP(n,e){let t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}function IP(n,e){let t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}function kp(n,e,t){let r=n.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,t!=null?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function SP(n,e,t){let r;return n.index_===en||t?r=kp(n,e,t):r=kp(n,e,bn),r.startAfterSet_=!0,r}function Fp(n,e,t){let r=n.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,t!==void 0?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function TP(n,e,t){let r;return n.index_===en||t?r=Fp(n,e,t):r=Fp(n,e,Yn),r.endBeforeSet_=!0,r}function Oc(n,e){let t=n.copy();return t.index_=e,t}function r0(n){let e={};if(n.isDefault())return e;let t;if(n.index_===le?t="$priority":n.index_===Tg?t="$value":n.index_===en?t="$key":(m(n.index_ instanceof Ss,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=De(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=De(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+De(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=De(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+De(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function i0(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==le&&(e.i=n.index_.toString()),e}var Lp=class n extends uc{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Vs("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(m(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=n.getListenId_(e,r),a={};this.listens_[s]=a;let l=r0(e._queryParams);this.restRequest_(o+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(o,d,!1,r),Mn(this.listens_,s)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",i(f,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=r0(e._queryParams),r=e._path.toString(),i=new Ne;return this.restRequest_(r+".json",t,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Km(t);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=ia(a.responseText)}catch{Be("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Be("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var jp=class{constructor(){this.rootNode_=L.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function mc(){return{value:null,children:new Map}}function to(n,e,t){if(z(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=H(e);n.children.has(r)||n.children.set(r,mc());let i=n.children.get(r);e=ae(e),to(i,e,t)}}function Vp(n,e){if(z(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{let t=n.value;return n.value=null,t.forEachChild(le,(r,i)=>{to(n,new J(r),i)}),Vp(n,e)}}else if(n.children.size>0){let t=H(e);return e=ae(e),n.children.has(t)&&Vp(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function Bp(n,e,t){n.value!==null?t(e,n.value):MP(n,(r,i)=>{let o=new J(e.toString()+"/"+r);Bp(i,o,t)})}function MP(n,e){n.children.forEach((t,r)=>{e(r,t)})}var Up=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Oe(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var o0=10*1e3,xP=30*1e3,AP=5*60*1e3,$p=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Up(e);let r=o0+(xP-o0)*Math.random();_s(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;Oe(e,(i,o)=>{o>0&&pt(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),_s(this.reportStats_.bind(this),Math.floor(Math.random()*2*AP))}};var Jt=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Jt||{});function Mg(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function xg(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ag(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var Hp=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Jt.ACK_USER_WRITE,this.source=Mg()}operationForChild(e){if(z(this.path)){if(this.affectedTree.value!=null)return m(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new J(e));return new n(X(),t,this.revert)}}else return m(H(this.path)===e,"operationForChild called for unrelated child."),new n(ae(this.path),this.affectedTree,this.revert)}};var yc=class n{constructor(e,t){this.source=e,this.path=t,this.type=Jt.LISTEN_COMPLETE}operationForChild(e){return z(this.path)?new n(this.source,X()):new n(this.source,ae(this.path))}};var Yi=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Jt.OVERWRITE}operationForChild(e){return z(this.path)?new n(this.source,X(),this.snap.getImmediateChild(e)):new n(this.source,ae(this.path),this.snap)}};var Ns=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Jt.MERGE}operationForChild(e){if(z(this.path)){let t=this.children.subtree(new J(e));return t.isEmpty()?null:t.value?new Yi(this.source,X(),t.value):new n(this.source,X(),t)}else return m(H(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,ae(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var nn=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(z(e))return this.isFullyInitialized()&&!this.filtered_;let t=H(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var zp=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function NP(n,e,t,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(EP(s.childName,s.snapshotNode))}),vs(n,i,"child_removed",e,r,t),vs(n,i,"child_added",e,r,t),vs(n,i,"child_moved",o,r,t),vs(n,i,"child_changed",e,r,t),vs(n,i,"value",e,r,t),i}function vs(n,e,t,r,i,o){let s=r.filter(a=>a.type===t);s.sort((a,l)=>PP(n,a,l)),s.forEach(a=>{let l=RP(n,a,o);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function RP(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function PP(n,e,t){if(e.childName==null||t.childName==null)throw qr("Should only compare child_ events.");let r=new Q(e.childName,e.snapshotNode),i=new Q(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function kc(n,e){return{eventCache:n,serverCache:e}}function Cs(n,e,t,r){return kc(new nn(e,t,r),n.serverCache)}function Q0(n,e,t,r){return kc(n.eventCache,new nn(e,t,r))}function vc(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function kr(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var fp,OP=()=>(fp||(fp=new It(RR)),fp),We=class n{constructor(e,t=OP()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return Oe(e,(r,i)=>{t=t.set(new J(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:X(),value:this.value};if(z(e))return null;{let r=H(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ae(e),t);return o!=null?{path:he(new J(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(z(e))return this;{let t=H(e),r=this.children.get(t);return r!==null?r.subtree(ae(e)):new n(null)}}set(e,t){if(z(e))return new n(t,this.children);{let r=H(e),o=(this.children.get(r)||new n(null)).set(ae(e),t),s=this.children.insert(r,o);return new n(this.value,s)}}remove(e){if(z(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=H(e),r=this.children.get(t);if(r){let i=r.remove(ae(e)),o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new n(null):new n(this.value,o)}else return this}}get(e){if(z(e))return this.value;{let t=H(e),r=this.children.get(t);return r?r.get(ae(e)):null}}setTree(e,t){if(z(e))return t;{let r=H(e),o=(this.children.get(r)||new n(null)).setTree(ae(e),t),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new n(this.value,s)}}fold(e){return this.fold_(X(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(he(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,X(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(z(e))return null;{let o=H(e),s=this.children.get(o);return s?s.findOnPath_(ae(e),he(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,X(),t)}foreachOnPath_(e,t,r){if(z(e))return this;{this.value&&r(t,this.value);let i=H(e),o=this.children.get(i);return o?o.foreachOnPath_(ae(e),he(t,i),r):new n(null)}}foreach(e){this.foreach_(X(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(he(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var jt=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new We(null))}};function Es(n,e,t){if(z(e))return new jt(new We(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=ze(i,e);return o=o.updateChild(s,t),new jt(n.writeTree_.set(i,o))}else{let i=new We(t),o=n.writeTree_.setTree(e,i);return new jt(o)}}}function Wp(n,e,t){let r=n;return Oe(t,(i,o)=>{r=Es(r,he(e,i),o)}),r}function s0(n,e){if(z(e))return jt.empty();{let t=n.writeTree_.setTree(e,new We(null));return new jt(t)}}function qp(n,e){return Lr(n,e)!=null}function Lr(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(ze(t.path,e)):null}function a0(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(le,(r,i)=>{e.push(new Q(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Q(r,i.value))}),e}function Qn(n,e){if(z(e))return n;{let t=Lr(n,e);return t!=null?new jt(new We(t)):new jt(n.writeTree_.subtree(e))}}function Gp(n){return n.writeTree_.isEmpty()}function Zi(n,e){return K0(X(),n.writeTree_,e)}function K0(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(m(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=K0(he(n,i),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(he(n,".priority"),r)),t}}function Fc(n,e){return J0(e,n)}function kP(n,e,t,r,i){m(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Es(n.visibleWrites,e,t)),n.lastWriteId=r}function FP(n,e,t,r){m(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Wp(n.visibleWrites,e,t),n.lastWriteId=r}function LP(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function jP(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);m(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){let a=n.allWrites[s];a.visible&&(s>=t&&VP(a,r.path)?i=!1:Dt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return BP(n),!0;if(r.snap)n.visibleWrites=s0(n.visibleWrites,r.path);else{let a=r.children;Oe(a,l=>{n.visibleWrites=s0(n.visibleWrites,he(r.path,l))})}return!0}else return!1}function VP(n,e){if(n.snap)return Dt(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Dt(he(n.path,t),e))return!0;return!1}function BP(n){n.visibleWrites=Y0(n.allWrites,UP,X()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function UP(n){return n.visible}function Y0(n,e,t){let r=jt.empty();for(let i=0;i<n.length;++i){let o=n[i];if(e(o)){let s=o.path,a;if(o.snap)Dt(t,s)?(a=ze(t,s),r=Es(r,a,o.snap)):Dt(s,t)&&(a=ze(s,t),r=Es(r,X(),o.snap.getChild(a)));else if(o.children){if(Dt(t,s))a=ze(t,s),r=Wp(r,a,o.children);else if(Dt(s,t))if(a=ze(s,t),z(a))r=Wp(r,X(),o.children);else{let l=Mn(o.children,H(a));if(l){let c=l.getChild(ae(a));r=Es(r,X(),c)}}}else throw qr("WriteRecord should have .snap or .children")}}return r}function Z0(n,e,t,r,i){if(!r&&!i){let o=Lr(n.visibleWrites,e);if(o!=null)return o;{let s=Qn(n.visibleWrites,e);if(Gp(s))return t;if(t==null&&!qp(s,X()))return null;{let a=t||L.EMPTY_NODE;return Zi(s,a)}}}else{let o=Qn(n.visibleWrites,e);if(!i&&Gp(o))return t;if(!i&&t==null&&!qp(o,X()))return null;{let s=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Dt(c.path,e)||Dt(e,c.path))},a=Y0(n.allWrites,s,e),l=t||L.EMPTY_NODE;return Zi(a,l)}}}function $P(n,e,t){let r=L.EMPTY_NODE,i=Lr(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(le,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(t){let o=Qn(n.visibleWrites,e);return t.forEachChild(le,(s,a)=>{let l=Zi(Qn(o,new J(s)),a);r=r.updateImmediateChild(s,l)}),a0(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Qn(n.visibleWrites,e);return a0(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function HP(n,e,t,r,i){m(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=he(e,t);if(qp(n.visibleWrites,o))return null;{let s=Qn(n.visibleWrites,o);return Gp(s)?i.getChild(t):Zi(s,i.getChild(t))}}function zP(n,e,t,r){let i=he(e,t),o=Lr(n.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){let s=Qn(n.visibleWrites,i);return Zi(s,r.getNode().getImmediateChild(t))}else return null}function WP(n,e){return Lr(n.visibleWrites,e)}function qP(n,e,t,r,i,o,s){let a,l=Qn(n.visibleWrites,e),c=Lr(l,X());if(c!=null)a=c;else if(t!=null)a=Zi(l,t);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function GP(){return{visibleWrites:jt.empty(),allWrites:[],lastWriteId:-1}}function _c(n,e,t,r){return Z0(n.writeTree,n.treePath,e,t,r)}function Ng(n,e){return $P(n.writeTree,n.treePath,e)}function l0(n,e,t,r){return HP(n.writeTree,n.treePath,e,t,r)}function wc(n,e){return WP(n.writeTree,he(n.treePath,e))}function QP(n,e,t,r,i,o){return qP(n.writeTree,n.treePath,e,t,r,i,o)}function Rg(n,e,t){return zP(n.writeTree,n.treePath,e,t)}function X0(n,e){return J0(he(n.treePath,e),n.writeTree)}function J0(n,e){return{treePath:n,writeTree:e}}var Qp=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;m(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),m(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,Ms(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,Ts(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,Ki(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,Ms(r,e.snapshotNode,i.oldSnap));else throw qr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Kp=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},eE=new Kp,Rs=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new nn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Rg(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:kr(this.viewCache_),o=QP(this.writes_,i,t,1,r,e);return o.length===0?null:o[0]}};function KP(n){return{filter:n}}function YP(n,e){m(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),m(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function ZP(n,e,t,r,i){let o=new Qp,s,a;if(t.type===Jt.OVERWRITE){let c=t;c.source.fromUser?s=Yp(n,e,c.path,c.snap,r,i,o):(m(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!z(c.path),s=Cc(n,e,c.path,c.snap,r,i,a,o))}else if(t.type===Jt.MERGE){let c=t;c.source.fromUser?s=JP(n,e,c.path,c.children,r,i,o):(m(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),s=Zp(n,e,c.path,c.children,r,i,a,o))}else if(t.type===Jt.ACK_USER_WRITE){let c=t;c.revert?s=nO(n,e,c.path,r,i,o):s=eO(n,e,c.path,c.affectedTree,r,i,o)}else if(t.type===Jt.LISTEN_COMPLETE)s=tO(n,e,t.path,r,o);else throw qr("Unknown operation type: "+t.type);let l=o.getChanges();return XP(e,s,l),{viewCache:s,changes:l}}function XP(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=vc(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(G0(vc(e)))}}function tE(n,e,t,r,i,o){let s=e.eventCache;if(wc(r,t)!=null)return e;{let a,l;if(z(t))if(m(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=kr(e),u=c instanceof L?c:L.EMPTY_NODE,d=Ng(r,u);a=n.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let c=_c(r,kr(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{let c=H(t);if(c===".priority"){m(Zn(t)===1,"Can't have a priority with additional path components");let u=s.getNode();l=e.serverCache.getNode();let d=l0(r,t,u,l);d!=null?a=n.filter.updatePriority(u,d):a=s.getNode()}else{let u=ae(t),d;if(s.isCompleteForChild(c)){l=e.serverCache.getNode();let f=l0(r,t,s.getNode(),l);f!=null?d=s.getNode().getImmediateChild(c).updateChild(u,f):d=s.getNode().getImmediateChild(c)}else d=Rg(r,c,e.serverCache);d!=null?a=n.filter.updateChild(s.getNode(),c,d,u,i,o):a=s.getNode()}}return Cs(e,a,s.isFullyInitialized()||z(t),n.filter.filtersNodes())}}function Cc(n,e,t,r,i,o,s,a){let l=e.serverCache,c,u=s?n.filter:n.filter.getIndexedFilter();if(z(t))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){let h=l.getNode().updateChild(t,r);c=u.updateFullNode(l.getNode(),h,null)}else{let h=H(t);if(!l.isCompleteForPath(t)&&Zn(t)>1)return e;let p=ae(t),v=l.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?c=u.updatePriority(l.getNode(),v):c=u.updateChild(l.getNode(),h,v,p,eE,null)}let d=Q0(e,c,l.isFullyInitialized()||z(t),u.filtersNodes()),f=new Rs(i,d,o);return tE(n,d,t,i,f,a)}function Yp(n,e,t,r,i,o,s){let a=e.eventCache,l,c,u=new Rs(i,e,o);if(z(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,s),l=Cs(e,c,!0,n.filter.filtersNodes());else{let d=H(t);if(d===".priority")c=n.filter.updatePriority(e.eventCache.getNode(),r),l=Cs(e,c,a.isFullyInitialized(),a.isFiltered());else{let f=ae(t),h=a.getNode().getImmediateChild(d),p;if(z(f))p=r;else{let g=u.getCompleteChild(d);g!=null?bg(f)===".priority"&&g.getChild(U0(f)).isEmpty()?p=g:p=g.updateChild(f,r):p=L.EMPTY_NODE}if(h.equals(p))l=e;else{let g=n.filter.updateChild(a.getNode(),d,p,f,u,s);l=Cs(e,g,a.isFullyInitialized(),n.filter.filtersNodes())}}}return l}function c0(n,e){return n.eventCache.isCompleteForChild(e)}function JP(n,e,t,r,i,o,s){let a=e;return r.foreach((l,c)=>{let u=he(t,l);c0(e,H(u))&&(a=Yp(n,a,u,c,i,o,s))}),r.foreach((l,c)=>{let u=he(t,l);c0(e,H(u))||(a=Yp(n,a,u,c,i,o,s))}),a}function u0(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Zp(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;z(t)?c=r:c=new We(null).setTree(t,r);let u=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=u0(n,h,f);l=Cc(n,l,new J(d),p,i,o,s,a)}}),c.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),g=u0(n,p,f);l=Cc(n,l,new J(d),g,i,o,s,a)}}),l}function eO(n,e,t,r,i,o,s){if(wc(i,t)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(z(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Cc(n,e,t,l.getNode().getChild(t),i,o,a,s);if(z(t)){let c=new We(null);return l.getNode().forEachChild(en,(u,d)=>{c=c.set(new J(u),d)}),Zp(n,e,t,c,i,o,a,s)}else return e}else{let c=new We(null);return r.foreach((u,d)=>{let f=he(t,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),Zp(n,e,t,c,i,o,a,s)}}function tO(n,e,t,r,i){let o=e.serverCache,s=Q0(e,o.getNode(),o.isFullyInitialized()||z(t),o.isFiltered());return tE(n,s,t,r,eE,i)}function nO(n,e,t,r,i,o){let s;if(wc(r,t)!=null)return e;{let a=new Rs(r,e,i),l=e.eventCache.getNode(),c;if(z(t)||H(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=_c(r,kr(e));else{let d=e.serverCache.getNode();m(d instanceof L,"serverChildren would be complete if leaf node"),u=Ng(r,d)}u=u,c=n.filter.updateFullNode(l,u,o)}else{let u=H(t),d=Rg(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=n.filter.updateChild(l,u,d,ae(t),a,o):e.eventCache.getNode().hasChild(u)?c=n.filter.updateChild(l,u,L.EMPTY_NODE,ae(t),a,o):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=_c(r,kr(e)),s.isLeafNode()&&(c=n.filter.updateFullNode(c,s,o)))}return s=e.serverCache.isFullyInitialized()||wc(r,X())!=null,Cs(e,c,s,n.filter.filtersNodes())}}var Xp=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new xs(r.getIndex()),o=bP(r);this.processor_=KP(o);let s=t.serverCache,a=t.eventCache,l=i.updateFullNode(L.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(L.EMPTY_NODE,a.getNode(),null),u=new nn(l,s.isFullyInitialized(),i.filtersNodes()),d=new nn(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=kc(d,u),this.eventGenerator_=new zp(this.query_)}get query(){return this.query_}};function rO(n){return n.viewCache_.serverCache.getNode()}function iO(n){return vc(n.viewCache_)}function oO(n,e){let t=kr(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!z(e)&&!t.getImmediateChild(H(e)).isEmpty())?t.getChild(e):null}function d0(n){return n.eventRegistrations_.length===0}function sO(n,e){n.eventRegistrations_.push(e)}function f0(n,e,t){let r=[];if(t){m(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(t,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){let s=n.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function h0(n,e,t,r){e.type===Jt.MERGE&&e.source.queryId!==null&&(m(kr(n.viewCache_),"We should always have a full cache before handling merges"),m(vc(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,o=ZP(n.processor_,i,e,t,r);return YP(n.processor_,o.viewCache),m(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,nE(n,o.changes,o.viewCache.eventCache.getNode(),null)}function aO(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(le,(o,s)=>{r.push(Ki(o,s))}),t.isFullyInitialized()&&r.push(G0(t.getNode())),nE(n,r,t.getNode(),e)}function nE(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return NP(n.eventGenerator_,e,t,i)}var Ec,bc=class{constructor(){this.views=new Map}};function lO(n){m(!Ec,"__referenceConstructor has already been defined"),Ec=n}function cO(){return m(Ec,"Reference.ts has not been loaded"),Ec}function uO(n){return n.views.size===0}function Pg(n,e,t,r){let i=e.source.queryId;if(i!==null){let o=n.views.get(i);return m(o!=null,"SyncTree gave us an op for an invalid query."),h0(o,e,t,r)}else{let o=[];for(let s of n.views.values())o=o.concat(h0(s,e,t,r));return o}}function rE(n,e,t,r,i){let o=e._queryIdentifier,s=n.views.get(o);if(!s){let a=_c(t,i?r:null),l=!1;a?l=!0:r instanceof L?(a=Ng(t,r),l=!1):(a=L.EMPTY_NODE,l=!1);let c=kc(new nn(a,l,!1),new nn(r,i,!1));return new Xp(e,c)}return s}function dO(n,e,t,r,i,o){let s=rE(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,s),sO(s,t),aO(s,t)}function fO(n,e,t,r){let i=e._queryIdentifier,o=[],s=[],a=Xn(n);if(i==="default")for(let[l,c]of n.views.entries())s=s.concat(f0(c,t,r)),d0(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{let l=n.views.get(i);l&&(s=s.concat(f0(l,t,r)),d0(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!Xn(n)&&o.push(new(cO())(e._repo,e._path)),{removed:o,events:s}}function iE(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Kn(n,e){let t=null;for(let r of n.views.values())t=t||oO(r,e);return t}function oE(n,e){if(e._queryParams.loadsAllData())return Lc(n);{let r=e._queryIdentifier;return n.views.get(r)}}function sE(n,e){return oE(n,e)!=null}function Xn(n){return Lc(n)!=null}function Lc(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Dc;function hO(n){m(!Dc,"__referenceConstructor has already been defined"),Dc=n}function pO(){return m(Dc,"Reference.ts has not been loaded"),Dc}var gO=1,Ic=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new We(null),this.pendingWriteTree_=GP(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Og(n,e,t,r,i){return kP(n.pendingWriteTree_,e,t,r,i),i?no(n,new Yi(Mg(),e,t)):[]}function mO(n,e,t,r){FP(n.pendingWriteTree_,e,t,r);let i=We.fromObject(t);return no(n,new Ns(Mg(),e,i))}function Gn(n,e,t=!1){let r=LP(n.pendingWriteTree_,e);if(jP(n.pendingWriteTree_,e)){let o=new We(null);return r.snap!=null?o=o.set(X(),!0):Oe(r.children,s=>{o=o.set(new J(s),!0)}),no(n,new Hp(r.path,o,t))}else return[]}function Us(n,e,t){return no(n,new Yi(xg(),e,t))}function yO(n,e,t){let r=We.fromObject(t);return no(n,new Ns(xg(),e,r))}function vO(n,e){return no(n,new yc(xg(),e))}function _O(n,e,t){let r=kg(n,t);if(r){let i=Fg(r),o=i.path,s=i.queryId,a=ze(o,e),l=new yc(Ag(s),a);return Lg(n,o,l)}else return[]}function Sc(n,e,t,r,i=!1){let o=e._path,s=n.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||sE(s,e))){let l=fO(s,e,t,r);uO(s)&&(n.syncPointTree_=n.syncPointTree_.remove(o));let c=l.removed;if(a=l.events,!i){let u=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=n.syncPointTree_.findOnPath(o,(f,h)=>Xn(h));if(u&&!d){let f=n.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=EO(f);for(let p=0;p<h.length;++p){let g=h[p],v=g.query,C=uE(n,g);n.listenProvider_.startListening(bs(v),Ps(n,v),C.hashFn,C.onComplete)}}}!d&&c.length>0&&!r&&(u?n.listenProvider_.stopListening(bs(e),null):c.forEach(f=>{let h=n.queryToTagMap.get(Vc(f));n.listenProvider_.stopListening(bs(f),h)}))}bO(n,c)}return a}function aE(n,e,t,r){let i=kg(n,r);if(i!=null){let o=Fg(i),s=o.path,a=o.queryId,l=ze(s,e),c=new Yi(Ag(a),l,t);return Lg(n,s,c)}else return[]}function wO(n,e,t,r){let i=kg(n,r);if(i){let o=Fg(i),s=o.path,a=o.queryId,l=ze(s,e),c=We.fromObject(t),u=new Ns(Ag(a),l,c);return Lg(n,s,u)}else return[]}function Jp(n,e,t,r=!1){let i=e._path,o=null,s=!1;n.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=ze(f,i);o=o||Kn(h,p),s=s||Xn(h)});let a=n.syncPointTree_.get(i);a?(s=s||Xn(a),o=o||Kn(a,X())):(a=new bc,n.syncPointTree_=n.syncPointTree_.set(i,a));let l;o!=null?l=!0:(l=!1,o=L.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((h,p)=>{let g=Kn(p,X());g&&(o=o.updateImmediateChild(h,g))}));let c=sE(a,e);if(!c&&!e._queryParams.loadsAllData()){let f=Vc(e);m(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=DO();n.queryToTagMap.set(f,h),n.tagToQueryMap.set(h,f)}let u=Fc(n.pendingWriteTree_,i),d=dO(a,e,t,u,o,l);if(!c&&!s&&!r){let f=oE(a,e);d=d.concat(IO(n,e,f))}return d}function jc(n,e,t){let i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{let l=ze(s,e),c=Kn(a,l);if(c)return c});return Z0(i,e,o,t,!0)}function CO(n,e){let t=e._path,r=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{let d=ze(c,t);r=r||Kn(u,d)});let i=n.syncPointTree_.get(t);i?r=r||Kn(i,X()):(i=new bc,n.syncPointTree_=n.syncPointTree_.set(t,i));let o=r!=null,s=o?new nn(r,!0,!1):null,a=Fc(n.pendingWriteTree_,e._path),l=rE(i,e,a,o?s.getNode():L.EMPTY_NODE,o);return iO(l)}function no(n,e){return lE(e,n.syncPointTree_,null,Fc(n.pendingWriteTree_,X()))}function lE(n,e,t,r){if(z(n.path))return cE(n,e,t,r);{let i=e.get(X());t==null&&i!=null&&(t=Kn(i,X()));let o=[],s=H(n.path),a=n.operationForChild(s),l=e.children.get(s);if(l&&a){let c=t?t.getImmediateChild(s):null,u=X0(r,s);o=o.concat(lE(a,l,c,u))}return i&&(o=o.concat(Pg(i,n,r,t))),o}}function cE(n,e,t,r){let i=e.get(X());t==null&&i!=null&&(t=Kn(i,X()));let o=[];return e.children.inorderTraversal((s,a)=>{let l=t?t.getImmediateChild(s):null,c=X0(r,s),u=n.operationForChild(s);u&&(o=o.concat(cE(u,a,l,c)))}),i&&(o=o.concat(Pg(i,n,r,t))),o}function uE(n,e){let t=e.query,r=Ps(n,t);return{hashFn:()=>(rO(e)||L.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?_O(n,t._path,r):vO(n,t._path);{let o=kR(i,t);return Sc(n,t,null,o)}}}}function Ps(n,e){let t=Vc(e);return n.queryToTagMap.get(t)}function Vc(n){return n._path.toString()+"$"+n._queryIdentifier}function kg(n,e){return n.tagToQueryMap.get(e)}function Fg(n){let e=n.indexOf("$");return m(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new J(n.substr(0,e))}}function Lg(n,e,t){let r=n.syncPointTree_.get(e);m(r,"Missing sync point for query tag that we're tracking");let i=Fc(n.pendingWriteTree_,e);return Pg(r,t,i,null)}function EO(n){return n.fold((e,t,r)=>{if(t&&Xn(t))return[Lc(t)];{let i=[];return t&&(i=iE(t)),Oe(r,(o,s)=>{i=i.concat(s)}),i}})}function bs(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(pO())(n._repo,n._path):n}function bO(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=Vc(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}function DO(){return gO++}function IO(n,e,t){let r=e._path,i=Ps(n,e),o=uE(n,t),s=n.listenProvider_.startListening(bs(e),i,o.hashFn,o.onComplete),a=n.syncPointTree_.subtree(r);if(i)m(!Xn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,u,d)=>{if(!z(c)&&u&&Xn(u))return[Lc(u).query];{let f=[];return u&&(f=f.concat(iE(u).map(h=>h.query))),Oe(d,(h,p)=>{f=f.concat(p)}),f}});for(let c=0;c<l.length;++c){let u=l[c];n.listenProvider_.stopListening(bs(u),Ps(n,u))}}return s}var eg=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},tg=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=he(this.path_,e);return new n(this.syncTree_,t)}node(){return jc(this.syncTree_,this.path_)}},SO=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},p0=function(n,e,t){if(!n||typeof n!="object")return n;if(m(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return TO(n[".sv"],e,t);if(typeof n[".sv"]=="object")return MO(n[".sv"],e);m(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},TO=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:m(!1,"Unexpected server value: "+n)}},MO=function(n,e,t){n.hasOwnProperty("increment")||m(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&m(!1,"Unexpected increment value: "+r);let i=e.node();if(m(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},dE=function(n,e,t,r){return Vg(e,new tg(t,n),r)},jg=function(n,e,t){return Vg(n,new eg(e),t)};function Vg(n,e,t){let r=n.getPriority().val(),i=p0(r,e.getImmediateChild(".priority"),t),o;if(n.isLeafNode()){let s=n,a=p0(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new Gi(a,me(i)):n}else{let s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Gi(i))),s.forEachChild(le,(a,l)=>{let c=Vg(l,e.getImmediateChild(a),t);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}var Os=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function Bc(n,e){let t=e instanceof J?e:new J(e),r=n,i=H(t);for(;i!==null;){let o=Mn(r.node.children,i)||{children:{},childCount:0};r=new Os(i,r,o),t=ae(t),i=H(t)}return r}function jr(n){return n.node.value}function Bg(n,e){n.node.value=e,ng(n)}function fE(n){return n.node.childCount>0}function xO(n){return jr(n)===void 0&&!fE(n)}function Uc(n,e){Oe(n.node.children,(t,r)=>{e(new Os(t,n,r))})}function hE(n,e,t,r){t&&!r&&e(n),Uc(n,i=>{hE(i,e,!0,r)}),t&&r&&e(n)}function AO(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function $s(n){return new J(n.parent===null?n.name:$s(n.parent)+"/"+n.name)}function ng(n){n.parent!==null&&NO(n.parent,n.name,n)}function NO(n,e,t){let r=xO(t),i=pt(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,ng(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,ng(n))}var RO=/[\[\].#$\/\u0000-\u001F\u007F]/,PO=/[\[\].#$\u0000-\u001F\u007F]/,hp=10*1024*1024,$c=function(n){return typeof n=="string"&&n.length!==0&&!RO.test(n)},pE=function(n){return typeof n=="string"&&n.length!==0&&!PO.test(n)},OO=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),pE(n)},ks=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Pc(n)||n&&typeof n=="object"&&pt(n,".sv")},rn=function(n,e,t,r){r&&e===void 0||Hs(Ge(n,"value"),e,t)},Hs=function(n,e,t){let r=t instanceof J?new Sp(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Rr(r));if(typeof e=="function")throw new Error(n+"contains a function "+Rr(r)+" with contents = "+e.toString());if(Pc(e))throw new Error(n+"contains "+e.toString()+" "+Rr(r));if(typeof e=="string"&&e.length>hp/3&&lo(e)>hp)throw new Error(n+"contains a string greater than "+hp+" utf8 bytes "+Rr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Oe(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!$c(s)))throw new Error(n+" contains an invalid key ("+s+") "+Rr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);uP(r,s),Hs(n,a,r),dP(r)}),i&&o)throw new Error(n+' contains ".value" child '+Rr(r)+" in addition to actual children.")}},kO=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];let o=Is(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!$c(o[s]))throw new Error(n+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(cP);let i=null;for(t=0;t<e.length;t++){if(r=e[t],i!==null&&Dt(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},gE=function(n,e,t,r){if(r&&e===void 0)return;let i=Ge(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let o=[];Oe(e,(s,a)=>{let l=new J(s);if(Hs(i,a,he(t,l)),bg(l)===".priority"&&!ks(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(l)}),kO(i,o)},Ug=function(n,e,t){if(!(t&&e===void 0)){if(Pc(e))throw new Error(Ge(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ks(e))throw new Error(Ge(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},zs=function(n,e,t,r){if(!(r&&t===void 0)&&!$c(t))throw new Error(Ge(n,e)+'was an invalid key = "'+t+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},ro=function(n,e,t,r){if(!(r&&t===void 0)&&!pE(t))throw new Error(Ge(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},FO=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ro(n,e,t,r)},st=function(n,e){if(H(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},mE=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!$c(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!OO(t))throw new Error(Ge(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var rg=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Hc(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();t!==null&&!Dg(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function yE(n,e,t){Hc(n,t),vE(n,r=>Dg(r,e))}function at(n,e,t){Hc(n,t),vE(n,r=>Dt(r,e)||Dt(e,r))}function vE(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let o=i.path;e(o)?(LO(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function LO(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();Or&&Pe("event: "+t.toString()),eo(r)}}}var _E="repo_interrupt",jO=25,ig=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mc(),this.transactionQueueTree_=new Os,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function VO(n,e,t){if(n.stats_=Eg(n.repoInfo_),n.forceRestClient_||VR())n.server_=new Lp(n.repoInfo_,(r,i,o,s)=>{g0(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>m0(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{De(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ig(n.repoInfo_,e,(r,i,o,s)=>{g0(n,r,i,o,s)},r=>{m0(n,r)},r=>{BO(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=UR(n.repoInfo_,()=>new $p(n.stats_,n.server_)),n.infoData_=new jp,n.infoSyncTree_=new Ic({startListening:(r,i,o,s)=>{let a=[],l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=Us(n.infoSyncTree_,r._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),$g(n,"connected",!1),n.serverSyncTree_=new Ic({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,l)=>{let c=s(a,l);at(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function wE(n){let t=n.infoData_.getNode(new J(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Ws(n){return SO({timestamp:wE(n)})}function g0(n,e,t,r,i){n.dataUpdateCount++;let o=new J(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(i)if(r){let l=ao(t,c=>me(c));s=wO(n.serverSyncTree_,o,l,i)}else{let l=me(t);s=aE(n.serverSyncTree_,o,l,i)}else if(r){let l=ao(t,c=>me(c));s=yO(n.serverSyncTree_,o,l)}else{let l=me(t);s=Us(n.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=Xi(n,o)),at(n.eventQueue_,a,s)}function m0(n,e){$g(n,"connected",e),e===!1&&HO(n)}function BO(n,e){Oe(e,(t,r)=>{$g(n,t,r)})}function $g(n,e,t){let r=new J("/.info/"+e),i=me(t);n.infoData_.updateSnapshot(r,i);let o=Us(n.infoSyncTree_,r,i);at(n.eventQueue_,r,o)}function zc(n){return n.nextWriteId_++}function UO(n,e,t){let r=CO(n.serverSyncTree_,e);return r!=null?Promise.resolve(r):n.server_.get(e).then(i=>{let o=me(i).withIndex(e._queryParams.getIndex());Jp(n.serverSyncTree_,e,t,!0);let s;if(e._queryParams.loadsAllData())s=Us(n.serverSyncTree_,e._path,o);else{let a=Ps(n.serverSyncTree_,e);s=aE(n.serverSyncTree_,e._path,o,a)}return at(n.eventQueue_,e._path,s),Sc(n.serverSyncTree_,e,t,null,!0),o},i=>(io(n,"get for query "+De(e)+" failed: "+i),Promise.reject(new Error(i))))}function Hg(n,e,t,r,i){io(n,"set",{path:e.toString(),value:t,priority:r});let o=Ws(n),s=me(t,r),a=jc(n.serverSyncTree_,e),l=jg(s,a,o),c=zc(n),u=Og(n.serverSyncTree_,e,l,c,!0);Hc(n.eventQueue_,u),n.server_.put(e.toString(),s.val(!0),(f,h)=>{let p=f==="ok";p||Be("set at "+e+" failed: "+f);let g=Gn(n.serverSyncTree_,c,!p);at(n.eventQueue_,e,g),Jn(n,i,f,h)});let d=Wg(n,e);Xi(n,d),at(n.eventQueue_,d,[])}function $O(n,e,t,r){io(n,"update",{path:e.toString(),value:t});let i=!0,o=Ws(n),s={};if(Oe(t,(a,l)=>{i=!1,s[a]=dE(he(e,a),me(l),n.serverSyncTree_,o)}),i)Pe("update() called with empty data.  Don't do anything."),Jn(n,r,"ok",void 0);else{let a=zc(n),l=mO(n.serverSyncTree_,e,s,a);Hc(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,u)=>{let d=c==="ok";d||Be("update at "+e+" failed: "+c);let f=Gn(n.serverSyncTree_,a,!d),h=f.length>0?Xi(n,e):e;at(n.eventQueue_,h,f),Jn(n,r,c,u)}),Oe(t,c=>{let u=Wg(n,he(e,c));Xi(n,u)}),at(n.eventQueue_,e,[])}}function HO(n){io(n,"onDisconnectEvents");let e=Ws(n),t=mc();Bp(n.onDisconnect_,X(),(i,o)=>{let s=dE(i,o,n.serverSyncTree_,e);to(t,i,s)});let r=[];Bp(t,X(),(i,o)=>{r=r.concat(Us(n.serverSyncTree_,i,o));let s=Wg(n,i);Xi(n,s)}),n.onDisconnect_=mc(),at(n.eventQueue_,X(),r)}function zO(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&Vp(n.onDisconnect_,e),Jn(n,t,r,i)})}function y0(n,e,t,r){let i=me(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,s)=>{o==="ok"&&to(n.onDisconnect_,e,i),Jn(n,r,o,s)})}function WO(n,e,t,r,i){let o=me(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(s,a)=>{s==="ok"&&to(n.onDisconnect_,e,o),Jn(n,i,s,a)})}function qO(n,e,t,r){if(oa(t)){Pe("onDisconnect().update() called with empty data.  Don't do anything."),Jn(n,r,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{i==="ok"&&Oe(t,(s,a)=>{let l=me(a);to(n.onDisconnect_,he(e,s),l)}),Jn(n,r,i,o)})}function GO(n,e,t){let r;H(e._path)===".info"?r=Jp(n.infoSyncTree_,e,t):r=Jp(n.serverSyncTree_,e,t),yE(n.eventQueue_,e._path,r)}function og(n,e,t){let r;H(e._path)===".info"?r=Sc(n.infoSyncTree_,e,t):r=Sc(n.serverSyncTree_,e,t),yE(n.eventQueue_,e._path,r)}function CE(n){n.persistentConnection_&&n.persistentConnection_.interrupt(_E)}function QO(n){n.persistentConnection_&&n.persistentConnection_.resume(_E)}function io(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Pe(t,...e)}function Jn(n,e,t,r){e&&eo(()=>{if(t==="ok")e(null);else{let i=(t||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function KO(n,e,t,r,i,o){io(n,"transaction on "+e);let s={path:e,update:t,onComplete:r,status:null,order:w0(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=zg(n,e,void 0);s.currentInputSnapshot=a;let l=s.update(a.val());if(l===void 0)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{Hs("transaction failed: Data returned ",l,s.path),s.status=0;let c=Bc(n.transactionQueueTree_,e),u=jr(c)||[];u.push(s),Bg(c,u);let d;typeof l=="object"&&l!==null&&pt(l,".priority")?(d=Mn(l,".priority"),m(ks(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(jc(n.serverSyncTree_,e)||L.EMPTY_NODE).getPriority().val();let f=Ws(n),h=me(l,d),p=jg(h,a,f);s.currentOutputSnapshotRaw=h,s.currentOutputSnapshotResolved=p,s.currentWriteId=zc(n);let g=Og(n.serverSyncTree_,e,p,s.currentWriteId,s.applyLocally);at(n.eventQueue_,e,g),Wc(n,n.transactionQueueTree_)}}function zg(n,e,t){return jc(n.serverSyncTree_,e,t)||L.EMPTY_NODE}function Wc(n,e=n.transactionQueueTree_){if(e||qc(n,e),jr(e)){let t=bE(n,e);m(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&YO(n,$s(e),t)}else fE(e)&&Uc(e,t=>{Wc(n,t)})}function YO(n,e,t){let r=t.map(c=>c.currentWriteId),i=zg(n,e,r),o=i,s=i.hash();for(let c=0;c<t.length;c++){let u=t[c];m(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=ze(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),l=e;n.server_.put(l.toString(),a,c=>{io(n,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){let d=[];for(let f=0;f<t.length;f++)t[f].status=2,u=u.concat(Gn(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&d.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();qc(n,Bc(n.transactionQueueTree_,e)),Wc(n,n.transactionQueueTree_),at(n.eventQueue_,e,u);for(let f=0;f<d.length;f++)eo(d[f])}else{if(c==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{Be("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}Xi(n,e)}},s)}function Xi(n,e){let t=EE(n,e),r=$s(t),i=bE(n,t);return ZO(n,i,r),r}function ZO(n,e,t){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=ze(t,l.path),u=!1,d;if(m(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(Gn(n.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=jO)u=!0,d="maxretry",i=i.concat(Gn(n.serverSyncTree_,l.currentWriteId,!0));else{let f=zg(n,l.path,s);l.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){Hs("transaction failed: Data returned ",h,l.path);let p=me(h);typeof h=="object"&&h!=null&&pt(h,".priority")||(p=p.updatePriority(f.getPriority()));let v=l.currentWriteId,C=Ws(n),k=jg(p,f,C);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=k,l.currentWriteId=zc(n),s.splice(s.indexOf(v),1),i=i.concat(Og(n.serverSyncTree_,l.path,k,l.currentWriteId,l.applyLocally)),i=i.concat(Gn(n.serverSyncTree_,v,!0))}else u=!0,d="nodata",i=i.concat(Gn(n.serverSyncTree_,l.currentWriteId,!0))}at(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}qc(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)eo(r[a]);Wc(n,n.transactionQueueTree_)}function EE(n,e){let t,r=n.transactionQueueTree_;for(t=H(e);t!==null&&jr(r)===void 0;)r=Bc(r,t),e=ae(e),t=H(e);return r}function bE(n,e){let t=[];return DE(n,e,t),t.sort((r,i)=>r.order-i.order),t}function DE(n,e,t){let r=jr(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Uc(e,i=>{DE(n,i,t)})}function qc(n,e){let t=jr(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,Bg(e,t.length>0?t:void 0)}Uc(e,r=>{qc(n,r)})}function Wg(n,e){let t=$s(EE(n,e)),r=Bc(n.transactionQueueTree_,e);return AO(r,i=>{pp(n,i)}),pp(n,r),hE(r,i=>{pp(n,i)}),t}function pp(n,e){let t=jr(e);if(t){let r=[],i=[],o=-1;for(let s=0;s<t.length;s++)t[s].status===3||(t[s].status===1?(m(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):(m(t[s].status===0,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(Gn(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?Bg(e,void 0):t.length=o+1,at(n.eventQueue_,$s(e),i);for(let s=0;s<r.length;s++)eo(r[s])}}function XO(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function JO(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Be(`Invalid query segment '${t}' in query '${n}'`)}return e}var sg=function(n,e){let t=e1(n),r=t.namespace;t.domain==="firebase.com"&&tn(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&tn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||AR();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new lc(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new J(t.pathString)}},e1=function(n){let e="",t="",r="",i="",o="",s=!0,a="https",l=443;if(typeof n=="string"){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=XO(n.substring(u,d)));let f=JO(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(s=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let h=e.slice(0,c);if(h.toLowerCase()==="localhost")t="localhost";else if(h.split(".").length<=2)t=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),t=e.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var v0="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t1=function(){let n=0,e=[];return function(t){let r=t===n;n=t;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=v0.charAt(t%64),t=Math.floor(t/64);m(t===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=v0.charAt(e[i]);return m(s.length===20,"nextPushId: Length should be 20."),s}}();var Tc=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+De(this.snapshot.exportVal())}},Mc=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Fs=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return m(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var xc=class{constructor(e,t){this._repo=e,this._path=t}cancel(){let e=new Ne;return zO(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){st("OnDisconnect.remove",this._path);let e=new Ne;return y0(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){st("OnDisconnect.set",this._path),rn("OnDisconnect.set",e,this._path,!1);let t=new Ne;return y0(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){st("OnDisconnect.setWithPriority",this._path),rn("OnDisconnect.setWithPriority",e,this._path,!1),Ug("OnDisconnect.setWithPriority",t,!1);let r=new Ne;return WO(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){st("OnDisconnect.update",this._path),gE("OnDisconnect.update",e,this._path,!1);let t=new Ne;return qO(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}};var qe=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return z(this._path)?null:bg(this._path)}get ref(){return new lt(this._repo,this._path)}get _queryIdentifier(){let e=i0(this._queryParams),t=Cg(e);return t==="{}"?"default":t}get _queryObject(){return i0(this._queryParams)}isEqual(e){if(e=Ue(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=Dg(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+lP(this._path)}};function Gc(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function tr(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===en){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Yn)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==bn)throw new Error(r);if(typeof t!="string")throw new Error(i)}}else if(n.getIndex()===le){if(e!=null&&!ks(e)||t!=null&&!ks(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(m(n.getIndex()instanceof Ss||n.getIndex()===Tg,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Qc(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var lt=class n extends qe{constructor(e,t){super(e,t,new As,!1)}get parent(){let e=U0(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Ji=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new J(e),r=er(this.ref,e);return new n(this._node.getChild(t),r,le)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,er(this.ref,r),le)))}hasChild(e){let t=new J(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function qg(n,e){return n=Ue(n),n._checkNotDeleted("ref"),e!==void 0?er(n._root,e):n._root}function Gg(n,e){n=Ue(n),n._checkNotDeleted("refFromURL");let t=sg(e,n._repo.repoInfo_.nodeAdmin);mE("refFromURL",t);let r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&tn("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),qg(n,t.path.toString())}function er(n,e){return n=Ue(n),H(n._path)===null?FO("child","path",e,!1):ro("child","path",e,!1),new lt(n._repo,he(n._path,e))}function IE(n,e){n=Ue(n),st("push",n._path),rn("push",e,n._path,!0);let t=wE(n._repo),r=t1(t),i=er(n,r),o=er(n,r),s;return e!=null?s=Kc(o,e).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function SE(n){return st("remove",n._path),Kc(n,null)}function Kc(n,e){n=Ue(n),st("set",n._path),rn("set",e,n._path,!1);let t=new Ne;return Hg(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function TE(n,e){n=Ue(n),st("setPriority",n._path),Ug("setPriority",e,!1);let t=new Ne;return Hg(n._repo,he(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}function ME(n,e,t){if(st("setWithPriority",n._path),rn("setWithPriority",e,n._path,!1),Ug("setWithPriority",t,!1),n.key===".length"||n.key===".keys")throw"setWithPriority failed: "+n.key+" is a read-only object.";let r=new Ne;return Hg(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}function xE(n,e){gE("update",e,n._path,!1);let t=new Ne;return $O(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function AE(n){n=Ue(n);let e=new Fs(()=>{}),t=new Ls(e);return UO(n._repo,n,t).then(r=>new Ji(r,new lt(n._repo,n._path),n._queryParams.getIndex()))}var Ls=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new Tc("value",this,new Ji(e.snapshotNode,new lt(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Mc(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Ac=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Mc(this,e,t):null}createEvent(e,t){m(e.childName!=null,"Child events should have a childName.");let r=er(new lt(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Tc(e.type,this,new Ji(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function qs(n,e,t,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let l=t,c=(u,d)=>{og(n._repo,n,a),l(u,d)};c.userCallback=t.userCallback,c.context=t.context,t=c}let s=new Fs(t,o||void 0),a=e==="value"?new Ls(s):new Ac(e,s);return GO(n._repo,n,a),()=>og(n._repo,n,a)}function Yc(n,e,t,r){return qs(n,"value",e,t,r)}function Qg(n,e,t,r){return qs(n,"child_added",e,t,r)}function Kg(n,e,t,r){return qs(n,"child_changed",e,t,r)}function Yg(n,e,t,r){return qs(n,"child_moved",e,t,r)}function Zg(n,e,t,r){return qs(n,"child_removed",e,t,r)}function Xg(n,e,t){let r=null,i=t?new Fs(t):null;e==="value"?r=new Ls(i):e&&(r=new Ac(e,i)),og(n._repo,n,r)}var ct=class{},Nc=class extends ct{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){rn("endAt",this._value,e._path,!0);let t=Fp(e._queryParams,this._value,this._key);if(Qc(t),tr(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qe(e._repo,e._path,t,e._orderByCalled)}};function NE(n,e){return zs("endAt","key",e,!0),new Nc(n,e)}var ag=class extends ct{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){rn("endBefore",this._value,e._path,!1);let t=TP(e._queryParams,this._value,this._key);if(Qc(t),tr(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qe(e._repo,e._path,t,e._orderByCalled)}};function RE(n,e){return zs("endBefore","key",e,!0),new ag(n,e)}var Rc=class extends ct{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){rn("startAt",this._value,e._path,!0);let t=kp(e._queryParams,this._value,this._key);if(Qc(t),tr(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new qe(e._repo,e._path,t,e._orderByCalled)}};function PE(n=null,e){return zs("startAt","key",e,!0),new Rc(n,e)}var lg=class extends ct{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){rn("startAfter",this._value,e._path,!1);let t=SP(e._queryParams,this._value,this._key);if(Qc(t),tr(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new qe(e._repo,e._path,t,e._orderByCalled)}};function OE(n,e){return zs("startAfter","key",e,!0),new lg(n,e)}var cg=class extends ct{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new qe(e._repo,e._path,DP(e._queryParams,this._limit),e._orderByCalled)}};function kE(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new cg(n)}var ug=class extends ct{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new qe(e._repo,e._path,IP(e._queryParams,this._limit),e._orderByCalled)}};function FE(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ug(n)}var dg=class extends ct{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Gc(e,"orderByChild");let t=new J(this._path);if(z(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new Ss(t),i=Oc(e._queryParams,r);return tr(i),new qe(e._repo,e._path,i,!0)}};function LE(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ro("orderByChild","path",n,!1),new dg(n)}var fg=class extends ct{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Gc(e,"orderByKey");let t=Oc(e._queryParams,en);return tr(t),new qe(e._repo,e._path,t,!0)}};function jE(){return new fg}var hg=class extends ct{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Gc(e,"orderByPriority");let t=Oc(e._queryParams,le);return tr(t),new qe(e._repo,e._path,t,!0)}};function VE(){return new hg}var pg=class extends ct{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Gc(e,"orderByValue");let t=Oc(e._queryParams,Tg);return tr(t),new qe(e._repo,e._path,t,!0)}};function BE(){return new pg}var gg=class extends ct{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(rn("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Nc(this._value,this._key)._apply(new Rc(this._value,this._key)._apply(e))}};function UE(n,e){return zs("equalTo","key",e,!0),new gg(n,e)}function St(n,...e){let t=Ue(n);for(let r of e)t=r._apply(t);return t}lO(lt);hO(lt);var n1="FIREBASE_DATABASE_EMULATOR_HOST",mg={},r1=!1;function i1(n,e,t,r){n.repoInfo_=new lc(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function Jg(n,e,t,r,i){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||tn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pe("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let s=sg(o,i),a=s.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[n1]),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=sg(o,i),a=s.repoInfo):l=!s.repoInfo.secure;let u=i&&l?new ws(ws.OWNER):new wp(n.name,n.options,e);mE("Invalid Firebase Database URL",s),z(s.path)||tn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=s1(a,n,u,new _p(n.name,t));return new yg(d,n)}function o1(n,e){let t=mg[e];(!t||t[n.key]!==n)&&tn(`Database ${e}(${n.repoInfo_}) has already been deleted.`),CE(n),delete t[n.key]}function s1(n,e,t,r){let i=mg[e.name];i||(i={},mg[e.name]=i);let o=i[n.toURLString()];return o&&tn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new ig(n,r1,t,r),i[n.toURLString()]=o,o}var yg=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(VO(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new lt(this._repo,X())),this._rootInternal}_delete(){return this._rootInternal!==null&&(o1(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&tn("Cannot call "+e+" on a deleted database.")}};function $E(){B0.IS_TRANSPORT_INITIALIZED&&Be("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function HE(){$E(),Ds.forceDisallow()}function zE(){$E(),Hi.forceDisallow(),Ds.forceAllow()}function WE(n,e,t,r={}){n=Ue(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&tn("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&tn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ws(ws.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:Hm(r.mockUserToken,n.app.options.projectId);o=new ws(s)}i1(i,e,t,o)}function qE(n){n=Ue(n),n._checkNotDeleted("goOffline"),CE(n._repo)}function GE(n){n=Ue(n),n._checkNotDeleted("goOnline"),QO(n._repo)}function QE(n,e){E0(n,e)}function a1(n){wg(Jm),co(new ln("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return Jg(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),xn(UC,$C,n),xn(UC,$C,"esm2017")}var l1={".sv":"timestamp"};function KE(){return l1}function YE(n){return{".sv":{increment:n}}}var vg=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function ZE(n,e,t){var r;if(n=Ue(n),st("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";let i=(r=t?.applyLocally)!==null&&r!==void 0?r:!0,o=new Ne,s=(l,c,u)=>{let d=null;l?o.reject(l):(d=new Ji(u,new lt(n._repo,n._path),le),o.resolve(new vg(c,d)))},a=Yc(n,()=>{});return KO(n._repo,n._path,e,s,a,i),o.promise}Ig.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Ig.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};a1();var c1="@firebase/database-compat",u1="1.0.8";var d1=new Gr("@firebase/database-compat"),XE=function(n){let e="FIREBASE WARNING: "+n;d1.warn(e)};var f1=function(n,e,t,r){if(!(r&&t===void 0)&&typeof t!="boolean")throw new Error(Ge(n,e)+"must be a boolean.")},h1=function(n,e,t){if(!(t&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ge(n,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var em=class{constructor(e){this._delegate=e}cancel(e){M("OnDisconnect.cancel",0,1,arguments.length),Se("OnDisconnect.cancel","onComplete",e,!0);let t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){M("OnDisconnect.remove",0,1,arguments.length),Se("OnDisconnect.remove","onComplete",e,!0);let t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){M("OnDisconnect.set",1,2,arguments.length),Se("OnDisconnect.set","onComplete",t,!0);let r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){M("OnDisconnect.setWithPriority",2,3,arguments.length),Se("OnDisconnect.setWithPriority","onComplete",r,!0);let i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if(M("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,XE("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Se("OnDisconnect.update","onComplete",t,!0);let r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}};var tm=class{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return M("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var Vr=class n{constructor(e,t){this._database=e,this._delegate=t}val(){return M("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return M("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return M("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return M("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return M("DataSnapshot.child",0,1,arguments.length),e=String(e),ro("DataSnapshot.child","path",e,!1),new n(this._database,this._delegate.child(e))}hasChild(e){return M("DataSnapshot.hasChild",1,1,arguments.length),ro("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return M("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return M("DataSnapshot.forEach",1,1,arguments.length),Se("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new n(this._database,t)))}hasChildren(){return M("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return M("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return M("DataSnapshot.ref",0,0,arguments.length),new Dn(this._database,this._delegate.ref)}get ref(){return this.getRef()}},Zc=class n{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;M("Query.on",2,4,arguments.length),Se("Query.on","callback",t,!1);let s=n.getCancelAndContextArgs_("Query.on",r,i),a=(c,u)=>{t.call(s.context,new Vr(this.database,c),u)};a.userCallback=t,a.context=s.context;let l=(o=s.cancel)===null||o===void 0?void 0:o.bind(s.context);switch(e){case"value":return Yc(this._delegate,a,l),t;case"child_added":return Qg(this._delegate,a,l),t;case"child_removed":return Zg(this._delegate,a,l),t;case"child_changed":return Kg(this._delegate,a,l),t;case"child_moved":return Yg(this._delegate,a,l),t;default:throw new Error(Ge("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if(M("Query.off",0,3,arguments.length),h1("Query.off",e,!0),Se("Query.off","callback",t,!0),_u("Query.off","context",r,!0),t){let i=()=>{};i.userCallback=t,i.context=r,Xg(this._delegate,e,i)}else Xg(this._delegate,e)}get(){return AE(this._delegate).then(e=>new Vr(this.database,e))}once(e,t,r,i){M("Query.once",1,4,arguments.length),Se("Query.once","callback",t,!0);let o=n.getCancelAndContextArgs_("Query.once",r,i),s=new Ne,a=(c,u)=>{let d=new Vr(this.database,c);t&&t.call(o.context,d,u),s.resolve(d)};a.userCallback=t,a.context=o.context;let l=c=>{o.cancel&&o.cancel.call(o.context,c),s.reject(c)};switch(e){case"value":Yc(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Qg(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Zg(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Kg(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":Yg(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(Ge("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return M("Query.limitToFirst",1,1,arguments.length),new n(this.database,St(this._delegate,kE(e)))}limitToLast(e){return M("Query.limitToLast",1,1,arguments.length),new n(this.database,St(this._delegate,FE(e)))}orderByChild(e){return M("Query.orderByChild",1,1,arguments.length),new n(this.database,St(this._delegate,LE(e)))}orderByKey(){return M("Query.orderByKey",0,0,arguments.length),new n(this.database,St(this._delegate,jE()))}orderByPriority(){return M("Query.orderByPriority",0,0,arguments.length),new n(this.database,St(this._delegate,VE()))}orderByValue(){return M("Query.orderByValue",0,0,arguments.length),new n(this.database,St(this._delegate,BE()))}startAt(e=null,t){return M("Query.startAt",0,2,arguments.length),new n(this.database,St(this._delegate,PE(e,t)))}startAfter(e=null,t){return M("Query.startAfter",0,2,arguments.length),new n(this.database,St(this._delegate,OE(e,t)))}endAt(e=null,t){return M("Query.endAt",0,2,arguments.length),new n(this.database,St(this._delegate,NE(e,t)))}endBefore(e=null,t){return M("Query.endBefore",0,2,arguments.length),new n(this.database,St(this._delegate,RE(e,t)))}equalTo(e,t){return M("Query.equalTo",1,2,arguments.length),new n(this.database,St(this._delegate,UE(e,t)))}toString(){return M("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return M("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(M("Query.isEqual",1,1,arguments.length),!(e instanceof n)){let t="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(t)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){let i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,Se(e,"cancel",i.cancel,!0),i.context=r,_u(e,"context",i.context,!0);else if(t)if(typeof t=="object"&&t!==null)i.context=t;else if(typeof t=="function")i.cancel=t;else throw new Error(Ge(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new Dn(this.database,new lt(this._delegate._repo,this._delegate._path))}},Dn=class n extends Zc{constructor(e,t){super(e,new qe(t._repo,t._path,new As,!1)),this.database=e,this._delegate=t}getKey(){return M("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return M("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new n(this.database,er(this._delegate,e))}getParent(){M("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new n(this.database,e):null}getRoot(){return M("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}set(e,t){M("Reference.set",1,2,arguments.length),Se("Reference.set","onComplete",t,!0);let r=Kc(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if(M("Reference.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,XE("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}st("Reference.update",this._delegate._path),Se("Reference.update","onComplete",t,!0);let r=xE(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){M("Reference.setWithPriority",2,3,arguments.length),Se("Reference.setWithPriority","onComplete",r,!0);let i=ME(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){M("Reference.remove",0,1,arguments.length),Se("Reference.remove","onComplete",e,!0);let t=SE(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){M("Reference.transaction",1,3,arguments.length),Se("Reference.transaction","transactionUpdate",e,!1),Se("Reference.transaction","onComplete",t,!0),f1("Reference.transaction","applyLocally",r,!0);let i=ZE(this._delegate,e,{applyLocally:r}).then(o=>new tm(o.committed,new Vr(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){M("Reference.setPriority",1,2,arguments.length),Se("Reference.setPriority","onComplete",t,!0);let r=TE(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){M("Reference.push",0,2,arguments.length),Se("Reference.push","onComplete",t,!0);let r=IE(this._delegate,e),i=r.then(s=>new n(this.database,s));t&&i.then(()=>t(null),s=>t(s));let o=new n(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return st("Reference.onDisconnect",this._delegate._path),new em(new xc(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var Br=class{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:HE,forceLongPolling:zE}}useEmulator(e,t,r={}){WE(this._delegate,e,t,r)}ref(e){if(M("database.ref",0,1,arguments.length),e instanceof Dn){let t=Gg(this._delegate,e.toString());return new Dn(this,t)}else{let t=qg(this._delegate,e);return new Dn(this,t)}}refFromURL(e){M("database.refFromURL",1,1,arguments.length);let r=Gg(this._delegate,e);return new Dn(this,r)}goOffline(){return M("database.goOffline",0,0,arguments.length),qE(this._delegate)}goOnline(){return M("database.goOnline",0,0,arguments.length),GE(this._delegate)}};Br.ServerValue={TIMESTAMP:KE(),increment:n=>YE(n)};function p1({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:o,nodeAdmin:s=!1}){wg(t);let a=new wu("database-standalone"),l=new sa("auth-internal",a);l.setComponent(new ln("auth-internal",()=>r,"PRIVATE"));let c;return i&&(c=new sa("app-check-internal",a),c.setComponent(new ln("app-check-internal",()=>i,"PRIVATE"))),{instance:new Br(Jg(n,l,c,e,s),n),namespace:o}}var g1=Object.freeze({__proto__:null,initStandalone:p1});var m1=Br.ServerValue;function y1(n){n.INTERNAL.registerComponent(new ln("database-compat",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Br(i,r)},"PUBLIC").setServiceProps({Reference:Dn,Query:Zc,Database:Br,DataSnapshot:Vr,enableLogging:QE,INTERNAL:g1,ServerValue:m1}).setMultipleInstances(!0)),n.registerVersion(c1,u1)}y1(Qe);function Gs(n,e,t="on",r=ho){return new Y(i=>{let o=null;return o=n[t](e,(s,a)=>{r.schedule(()=>{i.next({snapshot:s,prevKey:a})}),t==="once"&&r.schedule(()=>i.complete())},s=>{r.schedule(()=>i.error(s))}),t==="on"?{unsubscribe(){o!=null&&n.off(e,o)}}:{unsubscribe(){}}}).pipe(N(i=>{let{snapshot:o,prevKey:s}=i,a=null;return o.exists()&&(a=o.key),{type:e,payload:o,prevKey:s,key:a}}),mo())}function v1(n){return typeof n=="string"}function _1(n){return typeof n.exportVal=="function"}function rb(n){return n==null}function ib(n){return typeof n.set=="function"}function JE(n,e){return ib(e)?e:n.ref(e)}function ob(n,e){if(v1(n))return e.stringCase();if(ib(n))return e.firebaseCase();if(_1(n))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof n}`)}function sb(n){return(rb(n)||n.length===0)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function ab(n,e,t){e=sb(e);let r=e.map(i=>Gs(n,i,"on",t));return oi(...r)}function w1(n,e,t){let r=ab(n,e).pipe(li((i,o)=>[...i,o],[]));return E1(n,r,t)}function C1(n,e){return Gs(n,"value","on",e).pipe(N(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}function E1(n,e,t){return C1(n,t).pipe(zu(e),N(([i,o])=>{let s=i.lastKeyToLoad,a=o.map(l=>l.key);return{actions:o,lastKeyToLoad:s,loadedKeys:a}}),Uu(i=>i.loadedKeys.indexOf(i.lastKeyToLoad)===-1),N(i=>i.actions))}function eb(n,e){return function(r,i){return ob(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function b1(n){return function(t){return t?ob(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function D1(n,e,t){return Gs(n,"value","once",t).pipe(ge(r=>{let i=[A(r)];return e.forEach(o=>i.push(Gs(n,o,"on",t))),oi(...i).pipe(li(S1,[]))}),ju())}function lb(n,e){let t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function I1(n,e){if(rb(e))return 0;{let t=lb(n,e);return t===-1?n.length:t+1}}function S1(n,e){let{payload:t,prevKey:r,key:i}=e,o=lb(n,i),s=I1(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{let c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,c],!1})}return n;case"child_added":if(o>-1)(n[o-1]?.key||null)!==r&&(n=n.filter(l=>l.payload.key!==t.key),n.splice(s,0,e));else{if(r==null)return[e,...n];n=n.slice(),n.splice(s,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(o>-1){let a=n.splice(o,1)[0];return n=n.slice(),n.splice(s,0,a),n}return n;default:return n}}function tb(n,e,t){return e=sb(e),D1(n,e,t)}function T1(n,e){let t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:eb(r,"update"),set:eb(r,"set"),push:i=>r.push(i),remove:b1(r),snapshotChanges(i){return tb(n,i,t).pipe(En)},stateChanges(i){return ab(n,i,t).pipe(En)},auditTrail(i){return w1(n,i,t).pipe(En)},valueChanges(i,o){return tb(n,i,t).pipe(N(a=>a.map(l=>o&&o.idField?_e(E({},l.payload.val()),{[o.idField]:l.key}):l.payload.val())),En)}}}function nb(n,e){return function(){return Gs(n,"value","on",e)}}function M1(n,e){return{query:n,snapshotChanges(){return nb(n,e.schedulers.outsideAngular)().pipe(En)},update(t){return n.ref.update(t)},set(t){return n.ref.set(t)},remove(){return n.ref.remove()},valueChanges(){return nb(n,e.schedulers.outsideAngular)().pipe(En,N(r=>r.payload.exists()?r.payload.val():null))}}}var x1=new R("angularfire2.realtimeDatabaseURL"),A1=new R("angularfire2.database.use-emulator"),nm=(()=>{class n{schedulers;database;constructor(t,r,i,o,s,a,l,c,u,d,f,h,p,g,v){this.schedulers=a;let C=l,k=ps(t,s,r);c&&ap(k,s,u,f,h,p,d,g),this.database=oc(`${k.name}.database.${i}`,"AngularFireDatabase",k.name,()=>{let S=s.runOutsideAngular(()=>k.database(i||void 0));return C&&S.useEmulator(...C),S},[C])}list(t,r){let i=this.schedulers.ngZone.runOutsideAngular(()=>JE(this.database,t)),o=i;return r&&(o=r(i)),T1(o,this)}object(t){let r=this.schedulers.ngZone.runOutsideAngular(()=>JE(this.database,t));return M1(r,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(_(Bi),_(Ui,8),_(x1,8),_(Ye),_(ne),_(nc),_(A1,8),_(BC,8),_(tp,8),_(np,8),_(rp,8),_(ip,8),_(op,8),_(sp,8),_(Nr,8))};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),cb=(()=>{class n{constructor(){Qe.registerVersion("angularfire",Vi.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Yt({type:n});static \u0275inj=Kt({providers:[nm]})}return n})();var Xc=(()=>{class n{constructor(t){this.db=t,this.OWNER_ID=2,this.testFirebaseConnection()}testFirebaseConnection(){this.db.database.ref(".info/connected").on("value",t=>{console.log("Firebase connection state:",t.val())}),this.db.database.ref("items").once("value").then(t=>{console.log("Direct Firebase access test:"),console.log("Total items in database:",t.numChildren());let r=t.val(),i=Object.values(r).filter(o=>o.OWNER_ID===2);console.log("Items with OWNER_ID 2:",i.length),console.log("Sample items:",i.slice(0,2))}).catch(t=>{console.error("Firebase access error:",t)})}getItems(){return console.log("Fetching items for OWNER_ID:",this.OWNER_ID),this.db.list("items",t=>t.orderByChild("OWNER_ID").equalTo(this.OWNER_ID)).snapshotChanges().pipe(be(t=>{let r=t.map(i=>E({key:i.payload.key},i.payload.val()));console.log("Total items received:",r.length),r.forEach(i=>{(!i.CATEGORY_NAME_EN||i.CATEGORY_NAME_EN.trim()==="")&&console.warn("Item with missing/empty category:",{key:i.key,OWNER_ID:i.OWNER_ID,CATEGORY_NAME_EN:i.CATEGORY_NAME_EN,name:i.ITEM_NAME_EN})})}),N(t=>t.map(r=>Object.assign(new fs,E({key:r.payload.key},r.payload.val())))))}getAllItems(){return this.db.list("items").snapshotChanges().pipe(N(t=>t.map(r=>Object.assign(new fs,E({key:r.payload.key},r.payload.val())))))}static{this.\u0275fac=function(r){return new(r||n)(_(nm))}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var R1=["itemScroller"];function P1(n,e){if(n&1&&fe(0,"img",23),n&2){let t=Ie().$implicit;te("src",t.ITEM_PHOTO,Fo)("alt",t.ITEM_NAME_EN||t.ITEM_NAME_AR)}}function O1(n,e){if(n&1&&(Bf(0),I(1,"div",21),Le(2,P1,1,2,"img",22),O(),Uf()),n&2){let t=e.$implicit;G(2),te("ngIf",t.ITEM_PHOTO&&t.ITEM_PHOTO.trim()!=="")}}var db=(()=>{class n{constructor(t,r){this.router=t,this.itemsService=r,this.allItems=[],this.currentIndex=0}ngOnInit(){this.itemsService.getAllItems().subscribe(t=>{this.allItems=t})}ngAfterViewInit(){this.startInfiniteScroll()}ngOnDestroy(){this.autoScrollInterval&&clearInterval(this.autoScrollInterval)}startInfiniteScroll(){let t=this.itemScrollerRef?.nativeElement;if(!t)return;this.autoScrollInterval&&clearInterval(this.autoScrollInterval);let r=()=>{let i=t.querySelectorAll(".scroller-image-box");if(!i.length)return;let o=i[0],s=parseFloat(getComputedStyle(t).gap||"0"),l=window.innerWidth<=600?1:2,c=(o.offsetWidth+s)*l;t.scrollLeft+c>=t.scrollWidth/2?t.scrollLeft=0:t.scrollBy({left:c,behavior:"smooth"})};this.autoScrollInterval=setInterval(r,2500)}goToCategory(t){this.router.navigate(["/category"],{queryParams:{type:t}})}scrollImages(t){let r=this.itemScrollerRef?.nativeElement;if(!r)return;let i=r.querySelectorAll(".scroller-image-box");if(!i.length)return;let s=window.innerWidth<=600?1:2,a=i[0],l=parseFloat(getComputedStyle(r).gap||"0"),c=a.offsetWidth+l,u=i.length-s;t==="right"?this.currentIndex=Math.min(this.currentIndex+s,u):this.currentIndex=Math.max(this.currentIndex-s,0),r.scrollTo({left:this.currentIndex*c,behavior:"smooth"})}static{this.\u0275fac=function(r){return new(r||n)(ue(Wn),ue(Xc))}}static{this.\u0275cmp=Ln({type:n,selectors:[["app-menu"]],viewQuery:function(r,i){if(r&1&&Vo(R1,5),r&2){let o;Si(o=Ti())&&(i.itemScrollerRef=o.first)}},standalone:!0,features:[Bn],decls:32,vars:1,consts:[["itemScroller",""],[1,"main-outer"],[1,"main"],[1,"menu-container"],[1,"hero-section"],[1,"center-title"],[1,"menu-word"],[1,"res-social"],[1,"res-name"],[1,"social"],["href","https://facebook.com","target","_blank","rel","noopener"],[1,"fab","fa-facebook-f"],["href","https://instagram.com","target","_blank","rel","noopener"],[1,"fab","fa-instagram"],[1,"item-scroller-section"],[1,"item-scroller-track"],[4,"ngFor","ngForOf"],[1,"big-titles-section"],[1,"big-title",3,"click"],["src","assets/images/resturant-icon.png","alt","My Image"],["src","assets/images/coffeh2.png","alt","My Image",1,"coffeh-image"],[1,"scroller-image-box"],["class","scroller-image",3,"src","alt",4,"ngIf"],[1,"scroller-image",3,"src","alt"]],template:function(r,i){if(r&1){let o=Ii();I(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div")(6,"span",6),re(7,"ONLINE"),O(),fe(8,"br"),I(9,"span",6),re(10,"MENU"),O()()()(),I(11,"div",7)(12,"span",8),re(13,"\u0645\u064A\u0651 \u0648 \u0641\u064A\u0651"),O(),I(14,"div",9)(15,"a",10),fe(16,"i",11),O(),I(17,"a",12),fe(18,"i",13),O()()(),I(19,"div",14)(20,"div",15,0),Le(22,O1,3,1,"ng-container",16),O()(),I(23,"div",17)(24,"div",18),Ze("click",function(){return vn(o),_n(i.goToCategory("restaurant"))}),fe(25,"img",19),I(26,"span"),re(27,"restaurant"),O()(),I(28,"div",18),Ze("click",function(){return vn(o),_n(i.goToCategory("caffeh"))}),fe(29,"img",20),I(30,"span"),re(31,"cafe"),O()()()()()()}r&2&&(G(22),te("ngForOf",i.allItems.concat(i.allItems)))},dependencies:[zo,Ol,kl],styles:['.menu-container[_ngcontent-%COMP%]{min-height:100vh;width:100%;background:#e9c10d1a;display:flex;flex-direction:column;align-items:center;gap:10px;padding:2rem 1rem;box-sizing:border-box}.hero-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:1rem}.menu-title[_ngcontent-%COMP%]{font-size:clamp(3.5rem,12vw,4rem);text-align:center;text-transform:uppercase;font-weight:800;color:#000;width:20px}.center-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.menu-word[_ngcontent-%COMP%]{display:block;font-size:4rem;font-weight:900;color:#222;text-transform:uppercase;line-height:30px;font-family:Caprasimo,serif}.res-social[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:90%;border:solid rgb(143,138,138) 1px;border-radius:25px;padding:1rem}.res-name[_ngcontent-%COMP%]{font-family:Caprasimo,serif;font-size:2rem;font-weight:900;color:#fff;letter-spacing:.18em;text-align:center;display:inline-block;padding:.5em;margin-bottom:.5rem;background:linear-gradient(135deg,#f80,#ffb347);border-radius:2.5em 2.5em 1.5em 1.5em;box-shadow:0 6px 32px #ff88002e,0 2px #fff,0 8px 24px #ffcc3321;position:relative;text-shadow:0 2px 8px rgba(255,136,0,.18),0 1px 0 #fff;border:3px solid #ffb347;overflow:hidden;transition:box-shadow .3s,transform .3s;list-style:5px}.res-name[_ngcontent-%COMP%]:before{content:"";position:absolute;top:13%;left:12%;width:76%;height:28%;background:linear-gradient(90deg,#ffffff38,#ffffff0d);border-radius:50%;pointer-events:none;z-index:1;filter:blur(.5px)}.res-name[_ngcontent-%COMP%]:after{content:"";position:absolute;left:20%;bottom:-10px;width:60%;height:8px;background:radial-gradient(ellipse at center,#fffbe6 60%,transparent 100%);opacity:.38;border-radius:50%;z-index:0}.res-name[_ngcontent-%COMP%]:hover{box-shadow:0 12px 48px #ff880038,0 2px #fff,0 8px 32px #ffcc332e;transform:scale(1.06) rotate(-2deg)}.social[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center;align-items:center;margin-top:.5rem}.social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:1.8rem;width:3.2rem;height:3.2rem;border-radius:50%;background:linear-gradient(135deg,#fff,#f8f9fa);border:3px solid transparent;box-shadow:0 4px 15px #0000001a,0 2px 8px #0000000d;transition:all .35s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;border-radius:50%;padding:3px;background:linear-gradient(135deg,#ddd,#eee);-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:exclude;mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);mask-composite:exclude;transition:all .35s ease}.social[_ngcontent-%COMP%]   a[href*=facebook][_ngcontent-%COMP%]{color:#1877f2}.social[_ngcontent-%COMP%]   a[href*=facebook][_ngcontent-%COMP%]:before{background:linear-gradient(135deg,#1877f2,#42a5f5)}.social[_ngcontent-%COMP%]   a[href*=instagram][_ngcontent-%COMP%]{color:#e91e63}.social[_ngcontent-%COMP%]   a[href*=instagram][_ngcontent-%COMP%]:before{background:linear-gradient(135deg,#fd5949,#d6249f,#285aeb)}.social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#fff,#fafafa);transform:scale(1.15) translateY(-3px) rotate(5deg);box-shadow:0 8px 25px #00000026,0 4px 12px #0000001a}.social[_ngcontent-%COMP%]   a[href*=facebook][_ngcontent-%COMP%]:hover{color:#1565c0;box-shadow:0 8px 25px #1877f24d,0 4px 12px #1877f226}.social[_ngcontent-%COMP%]   a[href*=instagram][_ngcontent-%COMP%]:hover{color:#c2185b;box-shadow:0 8px 25px #e91e634d,0 4px 12px #e91e6326}.scroller-container[_ngcontent-%COMP%]{width:100%;max-width:1400px;overflow:hidden;padding:2rem 0}.scroller-track[_ngcontent-%COMP%]{display:flex;animation:scroll 40s linear infinite}.scroll-item[_ngcontent-%COMP%]{flex:0 0 300px;height:200px;margin:0 1rem;border-radius:15px;overflow:hidden;box-shadow:0 10px 30px #0003}.scroll-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.categories-grid[_ngcontent-%COMP%]{display:grid;width:100%;max-width:1200px;margin:0 auto;padding:0 1rem;gap:2rem;box-sizing:border-box}@media screen and (min-width: 1201px){.categories-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:2.5rem}}@media screen and (min-width: 901px) and (max-width: 1200px){.categories-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr);max-width:900px}}@media screen and (min-width: 601px) and (max-width: 900px){.categories-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);max-width:600px;gap:1.5rem}}@media screen and (min-width: 401px) and (max-width: 600px){.categories-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:1rem;padding:0 .75rem}}@media screen and (max-width:680px){.categories-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;max-width:280px;gap:1rem;padding:0 .5rem}}@media screen and (max-width: 400px){.categories-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;max-width:280px;gap:1rem;padding:0 .5rem}}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;height:100%;overflow-x:hidden}.card-title[_ngcontent-%COMP%]{position:relative;z-index:2;color:#100f0f;font-size:1.4rem;font-weight:900;text-transform:uppercase;letter-spacing:2px;text-align:center;padding:1rem;transition:all .3s ease;text-shadow:2px 2px 4px rgba(0,0,0,.3)}.category-card[_ngcontent-%COMP%]:hover   .card-title[_ngcontent-%COMP%]{color:#4ecca3;transform:scale(1.05);letter-spacing:3px;text-shadow:0 0 10px rgba(78,204,163,.3),2px 2px 4px rgba(0,0,0,.4)}.category-card[_ngcontent-%COMP%]:hover   .card-title[_ngcontent-%COMP%]:before, .category-card[_ngcontent-%COMP%]:hover   .card-title[_ngcontent-%COMP%]:after{width:50px;background:#66fcb1;box-shadow:0 0 20px #4ecca3b3}.loader-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:120px}.loader[_ngcontent-%COMP%]{width:48px;height:48px;border:5px solid #393E46;border-top:5px solid #4ECCA3;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.no-categories[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;color:#4ecca3;font-size:1.2rem;font-weight:600;text-transform:uppercase;letter-spacing:2px}.no-categories-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:.5rem;animation:_ngcontent-%COMP%_bounce 1.5s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.item-scroller-section[_ngcontent-%COMP%]{width:80%;overflow:hidden;box-sizing:border-box;padding:1rem 0;margin-top:3rem}.item-scroller-track[_ngcontent-%COMP%]{display:flex;gap:1.5rem;overflow-x:auto;scroll-behavior:smooth;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;padding:0;scrollbar-width:none;-ms-overflow-style:none}.item-scroller-track[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.scroller-image-box[_ngcontent-%COMP%]{flex:0 0 calc(50% - .75rem);max-width:calc(50% - .75rem);min-width:140px;height:28vw;max-height:210px;min-height:90px;border-radius:30px;overflow:hidden;background:#fff;box-shadow:0 4px 18px #21cc931a;display:flex;align-items:center;justify-content:center;scroll-snap-align:start}.big-titles-section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:4vw;margin:3rem 0 2rem;margin-top:10px;flex-wrap:wrap}.big-title[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;border:black 1px solid;padding:2rem;border-radius:40px;width:250px;max-width:250px}.big-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;font-weight:900;font-family:Caprasimo,serif;text-transform:uppercase;font-size:30px;text-align:center}img.coffeh-image[_ngcontent-%COMP%]{width:200px;height:200px}@media screen and (max-width: 768px){.res-name[_ngcontent-%COMP%]{font-size:1.4rem;padding:.3em}.social[_ngcontent-%COMP%]{gap:.5rem}.social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:2.8rem;height:2.8rem;font-size:1.6rem}.card-title[_ngcontent-%COMP%]{font-size:1.2rem}.scroller-image[_ngcontent-%COMP%]{flex:0 0 280px;height:240px}.item-scroller-section[_ngcontent-%COMP%]:before, .item-scroller-section[_ngcontent-%COMP%]:after{width:80px}@keyframes stepByStepScroll{0%{transform:translate(0)}8.33%{transform:translate(0)}16.66%{transform:translate(-592px)}25%{transform:translate(-592px)}33.33%{transform:translate(-1184px)}41.66%{transform:translate(-1184px)}50%{transform:translate(-1776px)}58.33%{transform:translate(-1776px)}66.66%{transform:translate(-2368px)}75%{transform:translate(-2368px)}83.33%{transform:translate(-2960px)}91.66%{transform:translate(-2960px)}to{transform:translate(-3552px)}}}@media screen and (max-width: 480px){.res-name[_ngcontent-%COMP%]{font-size:1.2rem;letter-spacing:.1em}.social[_ngcontent-%COMP%]{gap:.5rem}.social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;font-size:1.4rem}.card-title[_ngcontent-%COMP%]{font-size:1.1rem;letter-spacing:1px}.scroller-image[_ngcontent-%COMP%]{flex:0 0 250px;height:200px}@keyframes stepByStepScroll{0%{transform:translate(0)}8.33%{transform:translate(0)}16.66%{transform:translate(-532px)}25%{transform:translate(-532px)}33.33%{transform:translate(-1064px)}41.66%{transform:translate(-1064px)}50%{transform:translate(-1596px)}58.33%{transform:translate(-1596px)}66.66%{transform:translate(-2128px)}75%{transform:translate(-2128px)}83.33%{transform:translate(-2660px)}91.66%{transform:translate(-2660px)}to{transform:translate(-3192px)}}}.big-title[_ngcontent-%COMP%]:hover{text-shadow:0 4px 24px #4ECCA3,0 1px 0 #fff;transform:scale(1.06) translateY(-3px);transition:transform .2s,text-shadow .2s;cursor:pointer}@media (max-width: 346px){.big-title[_ngcontent-%COMP%]{width:200px}.res-name[_ngcontent-%COMP%]{font-size:1rem;letter-spacing:.1em;padding-top:6px}.social[_ngcontent-%COMP%]{gap:.2rem}.social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:2rem;height:2rem;font-size:1rem}}.scroller-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}@media (max-width: 600px){.item-scroller-track[_ngcontent-%COMP%]{justify-content:center}.scroller-image-box[_ngcontent-%COMP%]{flex:0 0 70vw;max-width:70vw;min-width:80px;height:45vw;min-height:80px;max-height:110px;margin:0 auto;padding:0;box-sizing:border-box;border-radius:25px;overflow:hidden;background:#fff;display:flex;align-items:center;justify-content:center;scroll-snap-align:center;background-color:transparent}.scroller-image[_ngcontent-%COMP%]{border-radius:25px;width:100%!important;height:100%!important;object-fit:cover!important;display:block;margin:0;padding:0;max-width:100%!important;max-height:100%!important}}@media (max-width: 480px){.scroller-image-box[_ngcontent-%COMP%]{height:32vw;max-height:100px;min-height:50px}}@media (max-width: 350px){.scroller-image-box[_ngcontent-%COMP%]{height:40vw;max-height:60px;min-height:40px}}@media (min-width: 1200px){.scroller-image-box[_ngcontent-%COMP%]{height:220px;max-height:200px;min-height:160px}}@media (max-width: 1199px){.scroller-image-box[_ngcontent-%COMP%]{height:150px;max-height:150px;min-height:100px}}@media (max-width:850px){.scroller-image-box[_ngcontent-%COMP%]{height:130px;max-height:130px;min-height:90px}}@media (max-width:700px){.scroller-image-box[_ngcontent-%COMP%]{height:120px;max-height:120px;min-height:90px}}']})}}return n})();var k1=["carousel"],F1=["menuBanner"],L1=(n,e)=>({"background-image":n,"background-position":e}),j1=n=>({"single-item":n});function V1(n,e){n&1&&(I(0,"span"),re(1,"Good food, good mood."),O())}function B1(n,e){n&1&&(I(0,"span"),re(1,"Coffee is always a good idea."),O())}function U1(n,e){if(n&1&&fe(0,"img",38),n&2){let t=Ie().$implicit;te("src",t.icon,Fo)}}function $1(n,e){if(n&1){let t=Ii();I(0,"div",35),Ze("click",function(){let i=vn(t).$implicit,o=Ie(2);return _n(o.onCarouselCategoryClick(i.name))}),Le(1,U1,1,1,"img",36),I(2,"div",37),re(3),O()()}if(n&2){let t=e.$implicit,r=Ie(2);Ir("active",r.openedCategory===t.name),G(),te("ngIf",t.icon&&t.icon.trim()!==""),G(2),Sr(t.name)}}function H1(n,e){if(n&1){let t=Ii();I(0,"div",28)(1,"button",29),Ze("click",function(){vn(t);let i=Ie();return _n(i.scrollCarousel("left"))}),pl(),I(2,"svg",5),fe(3,"path",30),O()(),gf(),I(4,"div",31,1),Le(6,$1,4,4,"div",32),O(),I(7,"button",33),Ze("click",function(){vn(t);let i=Ie();return _n(i.scrollCarousel("right"))}),pl(),I(8,"svg",5),fe(9,"path",34),O()()()}if(n&2){let t=Ie();G(6),te("ngForOf",t.categories)}}function z1(n,e){if(n&1&&(I(0,"div",41),re(1),O()),n&2){let t=Ie(2);G(),Mi(" ",t.selectedLanguage==="ar"?"\u0644\u0627 \u062A\u0648\u062C\u062F \u0641\u0626\u0627\u062A":"No categories"," ")}}function W1(n,e){if(n&1&&(I(0,"div",41),re(1),O()),n&2){let t=Ie(5);G(),Mi(" ",t.selectedLanguage==="ar"?"\u0644\u0627 \u062A\u0648\u062C\u062F \u0639\u0646\u0627\u0635\u0631":"No items"," ")}}function q1(n,e){n&1&&(I(0,"div",52),fe(1,"div",53),I(2,"span"),re(3,"Loading items..."),O()())}function G1(n,e){if(n&1&&fe(0,"img",63),n&2){let t=Ie().$implicit;te("src",t.ITEM_PHOTO,Fo)}}function Q1(n,e){if(n&1&&(I(0,"div",56),Le(1,G1,1,1,"img",57),I(2,"div",58)(3,"h3",59),re(4),O(),I(5,"p",60),re(6),O(),I(7,"div",61)(8,"span",62),re(9,"$"),O(),re(10),O()()()),n&2){let t=e.$implicit,r=Ie(3).$implicit,i=Ie(3);te("ngClass",dw(5,j1,r.items.length===1)),G(),te("ngIf",t.ITEM_PHOTO&&t.ITEM_PHOTO.trim()!==""),G(3),Sr(i.getItemName(t)),G(2),Sr(i.getItemDescription(t)),G(4),Mi(" ",t.ITEM_PRICE,".00 ")}}function K1(n,e){if(n&1&&(I(0,"div",54),Le(1,Q1,11,7,"div",55),O()),n&2){let t=Ie(2).$implicit;G(),te("ngForOf",t.items)}}function Y1(n,e){if(n&1&&(I(0,"div",49),Le(1,W1,2,1,"div",39)(2,q1,4,0,"div",50)(3,K1,2,1,"div",51),O()),n&2){let t=Ie().$implicit,r=Ie(3);G(),te("ngIf",t.items.length===0),G(),te("ngIf",r.loading),G(),te("ngIf",!r.loading)}}function Z1(n,e){if(n&1&&(I(0,"div",44)(1,"div",45)(2,"span",46),re(3),O(),I(4,"span",47),re(5,"\u25BC"),O()(),Le(6,Y1,4,3,"div",48),O()),n&2){let t=e.$implicit,r=Ie(3);te("id","cat-"+r.slugify(t.name)),G(3),Sr(t.name),G(),Ir("open",r.openedCategory===t.name),G(2),te("ngIf",r.openedCategory===t.name)}}function X1(n,e){if(n&1&&(I(0,"div",42),Le(1,Z1,7,5,"div",43),O()),n&2){let t=Ie(2);G(),te("ngForOf",t.categories)}}function J1(n,e){if(n&1&&(I(0,"div"),Le(1,z1,2,1,"div",39)(2,X1,2,1,"div",40),O()),n&2){let t=Ie();G(),te("ngIf",t.categories.length===0),G(),te("ngIf",t.categories.length>0)}}function ek(n,e){n&1&&(I(0,"div",64),fe(1,"div",53),I(2,"span"),re(3,"Loading"),O()())}function tk(n,e){n&1&&fe(0,"div",65)}var fb=(()=>{class n{constructor(t,r,i,o){this.itemsService=t,this.languageService=r,this.route=i,this.router=o,this.items=[],this.categories=[],this.selectedLanguage="en",this.selectedType="restaurant",this.openedCategory=null,this.loading=!0,this.backArrowBlack=!1,this.afterMenuBanner=!1,this.atStart=!0,this.atEnd=!1}ngOnInit(){this.languageService.language$.subscribe(t=>{this.selectedLanguage=t,this.setCategories(),this.openedCategory=null}),this.route.queryParams.subscribe(t=>{this.selectedType=t.type||"restaurant",this.loadItems()})}ngAfterViewInit(){this.onWindowScroll()}loadItems(){this.loading=!0,this.itemsService.getItems().subscribe(t=>{this.items=t.filter(r=>r.TYPE===this.selectedType),this.setCategories(),this.loading=!1})}setCategories(){let t={};this.items.forEach(r=>{let i=this.selectedLanguage==="ar"?r.CATEGORY_NAME_AR:r.CATEGORY_NAME_EN;i&&!t[i]&&(t[i]={name:i,icon:r.CATEGORY_ICON,items:[]}),i&&t[i].items.push(r)}),this.categories=Object.values(t)}toggleCategory(t){this.openedCategory=this.openedCategory===t?null:t}getItemName(t){return this.selectedLanguage==="ar"?t.ITEM_NAME_AR:t.ITEM_NAME_EN}getItemDescription(t){return this.selectedLanguage==="ar"?t.DESCRIPTION_AR:t.DESCRIPTION_EN}onLanguageChange(t){let r=t.target;this.selectedLanguage=r.value,this.languageService.setLanguage(this.selectedLanguage)}scrollCarousel(t){let r=this.carouselRef?.nativeElement;r&&r.scrollBy({left:t==="left"?-120:120,behavior:"smooth"})}onCarouselCategoryClick(t){this.openedCategory=t,setTimeout(()=>{let r=document.getElementById("cat-"+this.slugify(t));if(r){let i=document.querySelector(".top-fixed-buttons"),o=i?i.offsetHeight:112,s=r.getBoundingClientRect(),a=window.pageYOffset||document.documentElement.scrollTop,l=s.top+a-o;window.scrollTo({top:l,behavior:"smooth"})}},400)}slugify(t){return t.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")}goBackToMenu(){this.router.navigate([""])}onWindowScroll(){if(this.menuBannerRef){console.log(this.afterMenuBanner);let t=this.menuBannerRef.nativeElement.getBoundingClientRect().bottom;this.afterMenuBanner=t<=0}}static{this.\u0275fac=function(r){return new(r||n)(ue(Xc),ue(ec),ue(Hn),ue(Wn))}}static{this.\u0275cmp=Ln({type:n,selectors:[["app-categoryview"]],viewQuery:function(r,i){if(r&1&&(Vo(k1,5),Vo(F1,5)),r&2){let o;Si(o=Ti())&&(i.carouselRef=o.first),Si(o=Ti())&&(i.menuBannerRef=o.first)}},hostBindings:function(r,i){r&1&&Ze("scroll",function(){return i.onWindowScroll()},!1,_l)},standalone:!0,features:[Bn],decls:35,vars:19,consts:[["menuBanner",""],["carousel",""],[1,"category-view"],[1,"top-fixed-buttons"],["aria-label","Back to menu",1,"back-arrow-btn",3,"click"],["width","22","height","22","viewBox","0 0 22 22","fill","none"],["d","M14 18L8 11L14 4","stroke-width","2.2","stroke-linecap","round","stroke-linejoin","round"],[1,"language-selector-wrapper"],["for","language-select",1,"language-label"],["id","language-select",1,"language-select",3,"change","value"],["value","en"],["value","ar"],[1,"menu-banner",3,"ngStyle"],[4,"ngIf"],[1,"wrapper"],["class","category-carousel-wrapper",4,"ngIf"],[1,"type-address-phone"],[1,"business-type"],[1,"contact-info"],[1,"business-address"],[1,"fas","fa-map-marker-alt","location-icon"],[1,"address-text"],[1,"contact-separator"],[1,"business-phone"],[1,"fas","fa-phone-alt","phone-icon"],[1,"phone-text"],["class","categories-loader",4,"ngIf"],["class","categories-grid",4,"ngIf"],[1,"category-carousel-wrapper"],[1,"carousel-arrow","left",3,"click"],["d","M14 18L8 11L14 4","stroke","#fff","stroke-width","2.2","stroke-linecap","round","stroke-linejoin","round"],[1,"category-carousel"],["class","carousel-category-box",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-arrow","right",3,"click"],["d","M8 4L14 11L8 18","stroke","#fff","stroke-width","2.2","stroke-linecap","round","stroke-linejoin","round"],[1,"carousel-category-box",3,"click"],["alt","icon","class","carousel-category-icon",3,"src",4,"ngIf"],[1,"carousel-category-name"],["alt","icon",1,"carousel-category-icon",3,"src"],["class","empty-message",4,"ngIf"],["class","categories-list",4,"ngIf"],[1,"empty-message"],[1,"categories-list"],["class","category-card",3,"id",4,"ngFor","ngForOf"],[1,"category-card",3,"id"],[1,"category-header"],[1,"category-title"],[1,"dropdown-arrow"],["class","items-section",4,"ngIf"],[1,"items-section"],["class","items-loader",4,"ngIf"],["class","items-grid",4,"ngIf"],[1,"items-loader"],[1,"spinner"],[1,"items-grid"],["class","item-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"item-card",3,"ngClass"],["alt","item","class","item-image",3,"src",4,"ngIf"],[1,"item-info"],[1,"item-name"],[1,"item-description"],[1,"item-price"],[1,"currency"],["alt","item",1,"item-image",3,"src"],[1,"categories-loader"],[1,"categories-grid"]],template:function(r,i){if(r&1){let o=Ii();I(0,"div",2)(1,"div",3)(2,"button",4),Ze("click",function(){return vn(o),_n(i.goBackToMenu())}),pl(),I(3,"svg",5),fe(4,"path",6),O()(),gf(),I(5,"div",7)(6,"label",8),re(7,"\u{1F310} Language:"),O(),I(8,"select",9),Ze("change",function(a){return vn(o),_n(i.onLanguageChange(a))}),I(9,"option",10),re(10,"English"),O(),I(11,"option",11),re(12,"Arabic"),O()()()(),I(13,"div",12,0),Le(15,V1,2,0,"span",13)(16,B1,2,0,"span",13),O(),I(17,"div",14),Le(18,H1,10,1,"div",15),I(19,"div",16)(20,"span",17),re(21),O(),I(22,"div",18)(23,"div",19),fe(24,"i",20),I(25,"a",21),re(26,"Eatvite Restaurant, Bliss, Lebanon"),O()(),fe(27,"span",22),I(28,"div",23),fe(29,"i",24),I(30,"a",25),re(31,"76006748"),O()()()(),Le(32,J1,3,2,"div",13),O()(),Le(33,ek,4,0,"div",26)(34,tk,1,0,"div",27)}r&2&&(G(),Ir("white-bg",i.afterMenuBanner),G(),Ir("black-bg",i.afterMenuBanner),G(2),Tl("stroke",i.afterMenuBanner?"#fff":"#222"),G(),Ir("lang-shadow",i.afterMenuBanner),G(3),te("value",i.selectedLanguage),G(5),te("ngStyle",Ml(16,L1,i.selectedType==="restaurant"?"url(https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=1500&q=80)":"url(../../assets/images/cofe-back.jpg)",i.selectedType==="coffeh"?"bottom center":"center")),G(2),te("ngIf",i.selectedType==="restaurant"),G(),te("ngIf",i.selectedType==="caffeh"),G(2),te("ngIf",i.categories.length>0),G(3),Sr(i.selectedType),G(11),te("ngIf",!i.loading),G(),te("ngIf",i.loading),G(),te("ngIf",!i.loading))},dependencies:[zo,Pl,Ol,kl,Nw],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#0a0a0a,#1a1a2e);color:#999595;min-height:100vh}.category-view[_ngcontent-%COMP%]{position:relative;min-height:100vh;max-width:100vw;box-sizing:border-box}.bg-particles[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;background:radial-gradient(circle at 20% 50%,rgba(33,204,147,.1) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(78,204,163,.1) 0%,transparent 50%),radial-gradient(circle at 40% 80%,rgba(33,204,147,.05) 0%,transparent 50%);animation:_ngcontent-%COMP%_particleFloat 20s ease-in-out infinite}@keyframes _ngcontent-%COMP%_particleFloat{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-20px) rotate(180deg)}}.menu-banner[_ngcontent-%COMP%]{background-size:cover;background-position:center;background-repeat:no-repeat;max-width:100%;box-sizing:border-box;height:60vh;min-height:400px;position:relative;display:flex;align-items:flex-end;justify-content:center}@supports (width: 100vw){.menu-banner[_ngcontent-%COMP%]{position:relative;width:100vw;height:60vh;min-height:400px;overflow:hidden;left:calc(-50vw + 50%);margin-left:0;margin-right:0}}.banner-overlay[_ngcontent-%COMP%], .banner-content[_ngcontent-%COMP%]{display:none}.menu-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:2;color:#fff;font-size:1.5rem;font-weight:700;background:#0006;padding:.7em;border-radius:1em 1em 0 0;margin-bottom:2rem;letter-spacing:.05em;box-shadow:0 4px 24px #0000002e;text-align:center}.category-title[_ngcontent-%COMP%]{font-size:clamp(2.5rem,6vw,4rem);font-weight:900;font-family:Inter,Helvetica Neue,Arial,sans-serif;margin:2.5rem 0 2rem;text-align:left;letter-spacing:-.02em;position:relative;background:linear-gradient(135deg,#595a5a,#0a0a0a,#313836,#464747,#131615);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;background-size:200% 200%;animation:_ngcontent-%COMP%_gradientShift 4s ease-in-out infinite;filter:drop-shadow(0 4px 8px rgba(33,204,147,.3)) drop-shadow(0 8px 16px rgba(78,204,163,.2)) drop-shadow(0 12px 24px rgba(0,213,170,.1))}@keyframes _ngcontent-%COMP%_gradientShift{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.category-subtitle[_ngcontent-%COMP%]{display:none}.main-content[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto}.subcategories-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.6rem}.categories-loader[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;min-height:80px;margin-bottom:1rem}.categories-loader[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:5px solid #e0e0e0;border-top:5px solid #21cc93;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;box-shadow:0 0 24px #21cc9326}.categories-loader[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#21cc93;font-weight:600;font-size:1.1rem;letter-spacing:1px}.expand-icon[_ngcontent-%COMP%]{font-size:1.2rem;color:#21cc93;transition:transform .3s ease;filter:drop-shadow(0 0 10px rgba(33,204,147,.3))}.expand-icon.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.items-container[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .5s ease;padding:0 1.5rem}.items-container.expanded[_ngcontent-%COMP%]{max-height:2000px;padding:0 1.5rem .8rem}.items-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.2rem;justify-content:start;padding-left:1rem;padding-right:1rem;box-sizing:border-box}.item-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0;width:100%;gap:.4rem}.single-item[_ngcontent-%COMP%]{width:25%}.item-image[_ngcontent-%COMP%]{height:180px;position:relative}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s cubic-bezier(.4,0,.2,1)}.item-card[_ngcontent-%COMP%]:hover   .item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.08)!important}.item-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5px}.item-name[_ngcontent-%COMP%]{color:#000;font-size:1.3rem;text-transform:capitalize}.item-price[_ngcontent-%COMP%]{font-size:1.3rem;color:#313836}.item-description[_ngcontent-%COMP%]{font-size:1.2rem;color:#313836;padding:.6rem .8rem;padding-left:0;word-wrap:break-word;overflow-wrap:break-word;letter-spacing:.01em}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem;background:#ffffff05;border-radius:20px;border:1px solid rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);margin:2rem 0}.empty-state-icon[_ngcontent-%COMP%]{font-size:4rem;color:#21cc934d;margin-bottom:1.5rem;filter:drop-shadow(0 0 20px rgba(33,204,147,.2))}.empty-state-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#fffc;margin-bottom:.5rem}.empty-state-message[_ngcontent-%COMP%]{font-size:1rem;color:#21cc93;line-height:1.5;text-shadow:0 0 10px rgba(33,204,147,.3)}.empty-items[_ngcontent-%COMP%]{text-align:center;padding:2rem 1rem;color:#fff9;background:#ffffff05;border-radius:15px;margin-top:.8rem;border:1px solid rgba(255,255,255,.05)}.empty-items-icon[_ngcontent-%COMP%]{font-size:2.5rem;color:#21cc9333;margin-bottom:1rem}.empty-items-message[_ngcontent-%COMP%]{font-size:.95rem;color:#ffffff80}.no-categories[_ngcontent-%COMP%], .empty-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;color:#21cc93;font-size:1.25rem;font-weight:700;letter-spacing:1px;padding:2.5rem 1rem 2rem;background:#21cc9312;border-radius:18px;margin:1.5rem auto;box-shadow:0 2px 16px #21cc9314;text-align:center;min-height:80px;max-width:400px}.no-categories[_ngcontent-%COMP%]:before, .empty-message[_ngcontent-%COMP%]:before{content:"\\1f615";font-size:2.2rem;margin-bottom:.5rem;opacity:.85;display:block}.loading-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;gap:1rem}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:3px solid rgba(33,204,147,.3);border-top:3px solid #21cc93;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;box-shadow:0 0 30px #21cc934d,0 0 60px #4ecca333}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.category-card[_ngcontent-%COMP%]{background:#ffffff12;border-radius:18px;box-shadow:0 4px 18px #21cc9314,0 1.5px 8px #4ecca30a;border:1.5px solid rgba(33,204,147,.13);margin-bottom:1.2rem;overflow:hidden;transition:box-shadow .25s,transform .25s;padding-left:1rem;padding-right:1rem;position:relative;width:90%}.category-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;cursor:pointer;padding-bottom:.5rem;border-bottom:1px solid rgba(33,204,147,.08)}.category-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;object-fit:cover;background:#f8f9fa;box-shadow:0 2px 8px #21cc9314}.category-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#000;letter-spacing:.04em;flex:1;text-shadow:0 2px 8px rgba(33,204,147,.13)}.dropdown-arrow[_ngcontent-%COMP%]{font-size:1.2rem;color:#000;transition:transform .3s;margin-left:.5rem}.dropdown-arrow.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.banner-content[_ngcontent-%COMP%]{padding:0 1rem}.empty-state[_ngcontent-%COMP%]{padding:2rem 1rem}.empty-state-icon[_ngcontent-%COMP%]{font-size:3rem}.language-selector-wrapper[_ngcontent-%COMP%]{z-index:1000;background:#fff;border-radius:12px;box-shadow:0 2px 12px #4ecca31a;padding:.5rem 1.2rem;display:flex;align-items:center;gap:.7rem;height:3rem;cursor:pointer}.language-label[_ngcontent-%COMP%]{font-size:1rem;color:#4ecca3;font-weight:600;letter-spacing:1px;cursor:pointer}.language-select[_ngcontent-%COMP%]{border:1.5px solid #4ECCA3;border-radius:8px;padding:.4rem 1.2rem;font-size:1rem;color:#222;background:#f8f9fa;font-weight:500;outline:none;transition:border .2s;cursor:pointer}.language-select[_ngcontent-%COMP%]:focus{border-color:#393e46;cursor:pointer}.language-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#222;background:#fff;cursor:pointer}.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;padding-left:4rem;padding-top:2.5rem}.type-address-phone[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.business-type[_ngcontent-%COMP%]{color:#000;font-size:2rem;text-transform:capitalize;font-family:Caprasimo,Segoe UI,Arial,sans-serif}.type-address-phone[_ngcontent-%COMP%]{display:flex;flex-direction:column}.business-address[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em}.location-icon[_ngcontent-%COMP%]{color:#f80;font-size:1.2em}.contact-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5em}.contact-separator[_ngcontent-%COMP%]{display:inline-block;width:1px;height:1.2em;background:#ccc;margin:0 .6em;vertical-align:middle}.business-phone[_ngcontent-%COMP%], .business-address[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.phone-icon[_ngcontent-%COMP%]{color:#21cc93;font-size:1.1em}.address-text[_ngcontent-%COMP%], .phone-text[_ngcontent-%COMP%]{font-size:17px;color:#363738;cursor:pointer}.items-loader[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;min-height:80px;margin-bottom:1rem}.items-loader[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e0e0e0;border-top:4px solid #21cc93;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:.5rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.items-loader[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#21cc93;font-weight:600;font-size:1rem;letter-spacing:1px}@media (max-width: 600px){.language-selector-wrapper[_ngcontent-%COMP%]{top:.7rem;right:.5rem;padding:.3rem .7rem;gap:.4rem;border-radius:8px;font-size:.95rem}.language-label[_ngcontent-%COMP%]{font-size:.95rem}.language-select[_ngcontent-%COMP%]{font-size:.95rem;padding:.3rem .7rem}}@media (max-width:556px){.wrapper[_ngcontent-%COMP%]{padding-left:2rem}}@media (max-width: 480px){.items-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.3rem}.subcategory-info[_ngcontent-%COMP%]{gap:.5rem}.subcategory-icon[_ngcontent-%COMP%]{width:40px;height:40px}.subcategory-name[_ngcontent-%COMP%]{font-size:1.2rem}.subcategories-container[_ngcontent-%COMP%]{gap:.5rem}.empty-items[_ngcontent-%COMP%]{padding:1.5rem 1rem}.empty-items-icon[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width:444px){.type-address-phone[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5em}.contact-separator[_ngcontent-%COMP%]{display:none}}@media (max-width: 370px){.language-selector-wrapper[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end;gap:.2rem;padding:.2rem .4rem;height:60px;right:.1rem;top:.2rem}.language-label[_ngcontent-%COMP%], .language-select[_ngcontent-%COMP%]{font-size:.85rem}.language-select[_ngcontent-%COMP%]{font-size:15px;height:30px}}@media (max-width: 714px){.item-card[_ngcontent-%COMP%]{flex-direction:column!important;align-items:stretch!important;gap:.5rem;padding:.5rem;margin-top:1rem;border-radius:5px;box-shadow:0 4px 18px #21cc9326,0 1.5px 8px #4ecca312;width:100%}.item-image[_ngcontent-%COMP%]{width:100%!important;height:100px!important;margin-bottom:.3rem}.item-info[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:.2rem;padding:0}.item-description[_ngcontent-%COMP%]{width:100%;font-size:.98rem;word-break:break-word;overflow-wrap:anywhere;white-space:normal;margin-top:.2rem}}@media (max-width: 340px){.category-card[_ngcontent-%COMP%]{width:98%!important;padding-left:1rem;padding-right:1rem;border-radius:10px;font-size:.92rem}.category-header[_ngcontent-%COMP%]{gap:1rem;padding-bottom:.3rem}.category-title[_ngcontent-%COMP%]{font-size:1.06rem}.category-icon[_ngcontent-%COMP%]{width:35px;height:35px}.dropdown-arrow[_ngcontent-%COMP%]{font-size:1rem;margin-left:.2rem;display:inline-block}}.category-carousel-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin:2rem 0 1.5rem;gap:.5rem;position:sticky;z-index:100;top:112px;background:inherit;background-color:#fff}.category-carousel[_ngcontent-%COMP%]{display:flex;overflow-x:auto;scroll-behavior:smooth;gap:1rem;padding:.5rem;max-width:90vw;scrollbar-width:none;-ms-overflow-style:none;scroll-snap-type:x mandatory}category-carousel[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.carousel-category-box[_ngcontent-%COMP%]{background:#ffffff21;border-radius:5px;box-shadow:0 2px 6px #0000001a,0 1px 3px #21cc930a;border:2px solid transparent;width:450px;min-width:200px;max-width:450px;padding:.7rem .5rem .5rem;display:flex;flex-direction:column;align-items:center;cursor:pointer;transition:border .2s,box-shadow .2s,background .2s;-webkit-user-select:none;user-select:none;scroll-snap-align:center}.carousel-category-icon[_ngcontent-%COMP%]{width:48px;height:48px;object-fit:cover;border-radius:10px;margin-bottom:.5rem;background:#fff}.carousel-category-name[_ngcontent-%COMP%]{font-size:1rem;color:#454444;font-weight:300;text-align:center;margin-top:.2rem;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:90px;font-family:Inter,Segoe UI,Arial,sans-serif}.carousel-arrow[_ngcontent-%COMP%]{background:#00000073;color:#fff;border:none;border-radius:50%;width:2rem;height:1.7rem;font-size:1rem;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background .2s;box-shadow:0 2px 8px #21cc931a}.carousel-arrow[_ngcontent-%COMP%]:hover{background:#000000b3}.carousel-category-box.active[_ngcontent-%COMP%]{background:#000}.carousel-category-box.active[_ngcontent-%COMP%]   .carousel-category-name[_ngcontent-%COMP%]{color:#fff}.carousel-arrow.right[_ngcontent-%COMP%]{margin-right:1rem}@media (max-width: 600px){.category-carousel-wrapper[_ngcontent-%COMP%]{margin:1rem 0}.carousel-category-box[_ngcontent-%COMP%]{width:400px}.carousel-category-icon[_ngcontent-%COMP%]{width:36px;height:36px}.carousel-category-name[_ngcontent-%COMP%]{font-size:.92rem;max-width:70px}.carousel-arrow[_ngcontent-%COMP%]{width:1.7rem;height:1.7rem;font-size:1rem}}.back-arrow-btn[_ngcontent-%COMP%]{z-index:1000;background:#fff;border:none;border-radius:12px;width:2.7rem;height:2rem;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 12px #21cc931a;cursor:pointer;transition:background .2s;padding:0;color:#222}.back-arrow-btn[_ngcontent-%COMP%]:hover{background:#e6fcf5}.top-fixed-buttons[_ngcontent-%COMP%]{position:fixed;width:100%;height:80px;padding:1rem;top:0;z-index:1100;display:flex;align-items:center;justify-content:space-between;gap:1.2rem}.top-fixed-buttons.white-bg[_ngcontent-%COMP%]{background:#ffffffeb;box-shadow:0 4px 12px #2526262e,0 6px 12px #0000001a;border-radius:16px}.back-arrow-btn.black-bg[_ngcontent-%COMP%]{background:#111!important}.back-arrow-btn.black-bg[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#fff!important}.language-selector-wrapper.lang-shadow[_ngcontent-%COMP%]{box-shadow:0 4px 12px #21cc932e,0 6px 12px #0000001a;border-radius:12px;background:#fff}']})}}return n})();var hb=[{path:"",component:db,title:"Menu"},{path:"category",component:fb,title:"Category"}];var K=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(K||{}),on="*";function pb(n,e=null){return{type:K.Sequence,steps:n,options:e}}function rm(n){return{type:K.Style,styles:n,offset:null}}var nr=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Qs=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Jc="!";function gb(n){return new y(3e3,!1)}function nk(){return new y(3100,!1)}function rk(){return new y(3101,!1)}function ik(n){return new y(3001,!1)}function ok(n){return new y(3003,!1)}function sk(n){return new y(3004,!1)}function ak(n,e){return new y(3005,!1)}function lk(){return new y(3006,!1)}function ck(){return new y(3007,!1)}function uk(n,e){return new y(3008,!1)}function dk(n){return new y(3002,!1)}function fk(n,e,t,r,i){return new y(3010,!1)}function hk(){return new y(3011,!1)}function pk(){return new y(3012,!1)}function gk(){return new y(3200,!1)}function mk(){return new y(3202,!1)}function yk(){return new y(3013,!1)}function vk(n){return new y(3014,!1)}function _k(n){return new y(3015,!1)}function wk(n){return new y(3016,!1)}function Ck(n,e){return new y(3404,!1)}function Ek(n){return new y(3502,!1)}function bk(n){return new y(3503,!1)}function Dk(){return new y(3300,!1)}function Ik(n){return new y(3504,!1)}function Sk(n){return new y(3301,!1)}function Tk(n,e){return new y(3302,!1)}function Mk(n){return new y(3303,!1)}function xk(n,e){return new y(3400,!1)}function Ak(n){return new y(3401,!1)}function Nk(n){return new y(3402,!1)}function Rk(n,e){return new y(3505,!1)}function rr(n){switch(n.length){case 0:return new nr;case 1:return n[0];default:return new Qs(n)}}function xb(n,e,t=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),u=c==s,d=u&&a||new Map;l.forEach((f,h)=>{let p=h,g=f;if(h!=="offset")switch(p=n.normalizePropertyName(p,i),g){case Jc:g=t.get(h);break;case on:g=r.get(h);break;default:g=n.normalizeStyleValue(h,p,g,i);break}d.set(p,g)}),u||o.push(d),a=d,s=c}),i.length)throw Ek(i);return o}function Sm(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&im(t,"start",n)));break;case"done":n.onDone(()=>r(t&&im(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&im(t,"destroy",n)));break}}function im(n,e,t){let r=t.totalTime,i=!!t.disabled,o=Tm(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),s=n._data;return s!=null&&(o._data=s),o}function Tm(n,e,t,r,i="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function dt(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function mb(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var Pk=typeof document>"u"?null:document.documentElement;function Mm(n){let e=n.parentNode||n.host||null;return e===Pk?null:e}function Ok(n){return n.substring(1,6)=="ebkit"}var Ur=null,yb=!1;function kk(n){Ur||(Ur=Fk()||{},yb=Ur.style?"WebkitAppearance"in Ur.style:!1);let e=!0;return Ur.style&&!Ok(n)&&(e=n in Ur.style,!e&&yb&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ur.style)),e}function Fk(){return typeof document<"u"?document.body:null}function Ab(n,e){for(;e;){if(e===n)return!0;e=Mm(e)}return!1}function Nb(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var xm=(()=>{class n{validateStyleProperty(t){return kk(t)}matchesElement(t,r){return!1}containsElement(t,r){return Ab(t,r)}getParentElement(t){return Mm(t)}query(t,r,i){return Nb(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,a=[],l){return new nr(i,o)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac})}}return n})(),zr=class{static{this.NOOP=new xm}},Wr=class{};var Lk=1e3,Rb="{{",jk="}}",Pb="ng-enter",um="ng-leave",eu="ng-trigger",ou=".ng-trigger",vb="ng-animating",dm=".ng-animating";function In(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:fm(parseFloat(e[1]),e[2])}function fm(n,e){switch(e){case"s":return n*Lk;default:return n}}function su(n,e,t){return n.hasOwnProperty("duration")?n:Vk(n,e,t)}function Vk(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,o=0,s="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(gb(n)),{duration:0,delay:0,easing:""};i=fm(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=fm(parseFloat(l),a[4]));let c=a[5];c&&(s=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(nk()),a=!0),o<0&&(e.push(rk()),a=!0),a&&e.splice(l,0,gb(n))}return{duration:i,delay:o,easing:s}}function Bk(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function sn(n,e,t){e.forEach((r,i)=>{let o=Am(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r})}function Hr(n,e){e.forEach((t,r)=>{let i=Am(r);n.style[i]=""})}function Ks(n){return Array.isArray(n)?n.length==1?n[0]:pb(n):n}function Uk(n,e,t){let r=e.params||{},i=Ob(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(ik(o))})}var hm=new RegExp(`${Rb}\\s*(.+?)\\s*${jk}`,"g");function Ob(n){let e=[];if(typeof n=="string"){let t;for(;t=hm.exec(n);)e.push(t[1]);hm.lastIndex=0}return e}function Zs(n,e,t){let r=`${n}`,i=r.replace(hm,(o,s)=>{let a=e[s];return a==null&&(t.push(ok(s)),a=""),a.toString()});return i==r?n:i}var $k=/-+([a-z0-9])/g;function Am(n){return n.replace($k,(...e)=>e[1].toUpperCase())}function Hk(n,e){return n===0||e===0}function zk(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,Nm(n,a)))}}return e}function ut(n,e,t){switch(e.type){case K.Trigger:return n.visitTrigger(e,t);case K.State:return n.visitState(e,t);case K.Transition:return n.visitTransition(e,t);case K.Sequence:return n.visitSequence(e,t);case K.Group:return n.visitGroup(e,t);case K.Animate:return n.visitAnimate(e,t);case K.Keyframes:return n.visitKeyframes(e,t);case K.Style:return n.visitStyle(e,t);case K.Reference:return n.visitReference(e,t);case K.AnimateChild:return n.visitAnimateChild(e,t);case K.AnimateRef:return n.visitAnimateRef(e,t);case K.Query:return n.visitQuery(e,t);case K.Stagger:return n.visitStagger(e,t);default:throw sk(e.type)}}function Nm(n,e){return window.getComputedStyle(n)[e]}var Wk=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),au=class extends Wr{normalizePropertyName(e,t){return Am(e)}normalizeStyleValue(e,t,r,i){let o="",s=r.toString().trim();if(Wk.has(t)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(ak(e,r))}return s+o}};var lu="*";function qk(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>Gk(r,t,e)):t.push(n),t}function Gk(n,e,t){if(n[0]==":"){let l=Qk(n,t);if(typeof l=="function"){e.push(l);return}n=l}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(_k(n)),e;let i=r[1],o=r[2],s=r[3];e.push(_b(i,s));let a=i==lu&&s==lu;o[0]=="<"&&!a&&e.push(_b(s,i))}function Qk(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(wk(n)),"* => *"}}var tu=new Set(["true","1"]),nu=new Set(["false","0"]);function _b(n,e){let t=tu.has(n)||nu.has(n),r=tu.has(e)||nu.has(e);return(i,o)=>{let s=n==lu||n==i,a=e==lu||e==o;return!s&&t&&typeof i=="boolean"&&(s=i?tu.has(n):nu.has(n)),!a&&r&&typeof o=="boolean"&&(a=o?tu.has(e):nu.has(e)),s&&a}}var kb=":self",Kk=new RegExp(`s*${kb}s*,?`,"g");function Fb(n,e,t,r){return new pm(n).build(e,t,r)}var wb="",pm=class{constructor(e){this._driver=e}build(e,t,r){let i=new gm(t);return this._resetContextStyleTimingState(i),ut(this,Ks(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=wb,e.collectedStyles=new Map,e.collectedStyles.set(wb,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(lk()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==K.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,o.push(this.visitState(l,t))}),l.name=c}else if(a.type==K.Transition){let l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,s.push(l)}else t.errors.push(ck())}),{type:K.Trigger,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Ob(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&t.errors.push(uk(e.name,[...o.values()]))}return{type:K.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=ut(this,Ks(e.animation),t),i=qk(e.expr,t.errors);return{type:K.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:$r(e.options)}}visitSequence(e,t){return{type:K.Sequence,steps:e.steps.map(r=>ut(this,r,t)),options:$r(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,o=e.steps.map(s=>{t.currentTime=r;let a=ut(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:K.Group,steps:o,options:$r(e.options)}}visitAnimate(e,t){let r=Jk(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:rm({});if(o.type==K.Keyframes)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let c={};r.easing&&(c.easing=r.easing),s=rm(c)}t.currentTime+=r.duration+r.delay;let l=this.visitStyle(s,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:K.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===on?r.push(a):t.errors.push(dk(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(Rb)>=0){o=!0;break}}}),{type:K.Style,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l),d=!0;u&&(o!=i&&o>=u.startTime&&i<=u.endTime&&(t.errors.push(fk(l,u.startTime,u.endTime,o,i)),d=!1),o=u.startTime),d&&c.set(l,{startTime:o,endTime:i}),t.options&&Uk(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:K.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(hk()),r;let i=1,o=0,s=[],a=!1,l=!1,c=0,u=e.steps.map(C=>{let k=this._makeStyleAst(C,t),S=k.offset!=null?k.offset:Xk(k.styles),$=0;return S!=null&&(o++,$=k.offset=S),l=l||$<0||$>1,a=a||$<c,c=$,s.push($),k});l&&t.errors.push(pk()),a&&t.errors.push(gk());let d=e.steps.length,f=0;o>0&&o<d?t.errors.push(mk()):o==0&&(f=i/(d-1));let h=d-1,p=t.currentTime,g=t.currentAnimateTimings,v=g.duration;return u.forEach((C,k)=>{let S=f>0?k==h?1:f*k:s[k],$=S*v;t.currentTime=p+g.delay+$,g.duration=$,this._validateStyleAst(C,t),C.offset=S,r.styles.push(C)}),r}visitReference(e,t){return{type:K.Reference,animation:ut(this,Ks(e.animation),t),options:$r(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:K.AnimateChild,options:$r(e.options)}}visitAnimateRef(e,t){return{type:K.AnimateRef,animation:this.visitReference(e.animation,t),options:$r(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=Yk(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,dt(t.collectedStyles,t.currentQuerySelector,new Map);let a=ut(this,Ks(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:K.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:$r(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(yk());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:su(e.timings,t.errors,!0);return{type:K.Stagger,animation:ut(this,Ks(e.animation),t),timings:r,options:null}}};function Yk(n){let e=!!n.split(/\s*,\s*/).find(t=>t==kb);return e&&(n=n.replace(Kk,"")),n=n.replace(/@\*/g,ou).replace(/@\w+/g,t=>ou+"-"+t.slice(1)).replace(/:animating/g,dm),[n,e]}function Zk(n){return n?E({},n):null}var gm=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function Xk(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function Jk(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=su(n,e).duration;return om(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=om(0,0,"");return o.dynamic=!0,o.strValue=t,o}let i=su(t,e);return om(i.duration,i.delay,i.easing)}function $r(n){return n?(n=E({},n),n.params&&(n.params=Zk(n.params))):n={},n}function om(n,e,t){return{duration:n,delay:e,easing:t}}function Rm(n,e,t,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var Xs=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},eF=1,tF=":enter",nF=new RegExp(tF,"g"),rF=":leave",iF=new RegExp(rF,"g");function Lb(n,e,t,r,i,o=new Map,s=new Map,a,l,c=[]){return new mm().buildKeyframes(n,e,t,r,i,o,s,a,l,c)}var mm=class{buildKeyframes(e,t,r,i,o,s,a,l,c,u=[]){c=c||new Xs;let d=new ym(e,t,c,i,o,u,[]);d.options=l;let f=l.delay?In(l.delay):0;d.currentTimeline.delayNextStep(f),d.currentTimeline.setStyles([s],null,d.errors,l),ut(this,r,d);let h=d.timelines.filter(p=>p.containsAnimation());if(h.length&&a.size){let p;for(let g=h.length-1;g>=0;g--){let v=h[g];if(v.element===t){p=v;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return h.length?h.map(p=>p.buildKeyframes()):[Rm(t,[],[],[],0,f,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let o=i?.delay;if(o){let s=typeof o=="number"?o:In(Zs(o,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime,s=r.duration!=null?In(r.duration):null,a=r.delay!=null?In(r.delay):null;return s!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),ut(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==K.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=cu);let s=In(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>ut(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,o=e.options&&e.options.delay?In(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),ut(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?Zs(r,t.params,t.errors):r;return su(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let o=e.style;o.type==K.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?In(i.delay):0;o&&(t.previousNode.type===K.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=cu);let s=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;let d=t.createSubContext(e.options,c);o&&d.delayNextStep(o),c===t.element&&(l=d.currentTimeline),ut(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let f=d.currentTimeline.currentTime;s=Math.max(s,f)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime;break}let u=t.currentTimeline;l&&u.delayNextStep(l);let d=u.currentTime;ut(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}},cu={},ym=class n{constructor(e,t,r,i,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=cu,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new uu(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=In(r.duration)),r.delay!=null&&(i.delay=In(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Zs(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,o=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=cu,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new vm(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(nF,"."+this._enterClassName),e=e.replace(iF,"."+this._leaveClassName);let l=r!=1,c=this._driver.query(this.element,e,l);r!==0&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!o&&a.length==0&&s.push(vk(t)),a}},uu=class n{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=eF,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||on),this._currentKeyframe.set(t,on);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let o=i&&i.params||{},s=oF(e,this._globalTimelineStyles);for(let[a,l]of s){let c=Zs(l,o,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??on),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((u,d)=>{u===Jc?e.add(d):u===on&&t.add(d)}),r||c.set("offset",l/this.duration),i.push(c)});let o=[...e.values()],s=[...t.values()];if(r){let a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return Rm(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},vm=class extends uu{constructor(e,t,r,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=r+t,a=t/s,l=new Map(e[0]);l.set("offset",0),o.push(l);let c=new Map(e[0]);c.set("offset",Cb(a)),o.push(c);let u=e.length-1;for(let d=1;d<=u;d++){let f=new Map(e[d]),h=f.get("offset"),p=t+h*r;f.set("offset",Cb(p/s)),o.push(f)}r=s,t=0,i="",e=o}return Rm(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function Cb(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function oF(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let o of r)t.set(o,on)}else for(let[o,s]of i)t.set(o,s)}),t}function Eb(n,e,t,r,i,o,s,a,l,c,u,d,f){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:f}}var sm={},du=class{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return sF(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,s,a,l,c,u){let d=[],f=this.ast.options&&this.ast.options.params||sm,h=a&&a.params||sm,p=this.buildStyles(r,h,d),g=l&&l.params||sm,v=this.buildStyles(i,g,d),C=new Set,k=new Map,S=new Map,$=i==="void",we={params:jb(g,f),delay:this.ast.options?.delay},ye=u?[]:Lb(e,t,this.ast.animation,o,s,p,v,we,c,d),ve=0;return ye.forEach(xe=>{ve=Math.max(xe.duration+xe.delay,ve)}),d.length?Eb(t,this._triggerName,r,i,$,p,v,[],[],k,S,ve,d):(ye.forEach(xe=>{let an=xe.element,Sn=dt(k,an,new Set);xe.preStyleProps.forEach(ir=>Sn.add(ir));let Pm=dt(S,an,new Set);xe.postStyleProps.forEach(ir=>Pm.add(ir)),an!==t&&C.add(an)}),Eb(t,this._triggerName,r,i,$,p,v,ye,[...C.values()],k,S,ve))}};function sF(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}function jb(n,e){let t=E({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var _m=class{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=jb(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Zs(s,i,t));let l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),r.set(a,s)})}),r}};function aF(n,e,t){return new wm(n,e,t)}var wm=class{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new _m(i.style,o,r))}),bb(this.states,"true","1"),bb(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new du(e,i,this.states))}),this.fallbackTransition=lF(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(s=>s.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function lF(n,e,t){let r=[(s,a)=>!0],i={type:K.Sequence,steps:[],options:null},o={type:K.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new du(n,o,e)}function bb(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var cF=new Xs,Cm=class{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let r=[],i=[],o=Fb(this._driver,t,r,i);if(r.length)throw bk(r);i.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,t,r){let i=e.element,o=xb(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],o=this._animations.get(e),s,a=new Map;if(o?(s=Lb(this._driver,t,o,Pb,um,new Map,new Map,r,cF,i),s.forEach(u=>{let d=dt(a,u.element,new Map);u.postStyleProps.forEach(f=>d.set(f,null))})):(i.push(Dk()),s=[]),i.length)throw Ik(i);a.forEach((u,d)=>{u.forEach((f,h)=>{u.set(h,this._driver.computeStyle(d,h,on))})});let l=s.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),c=rr(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw Sk(e);return t}listen(e,t,r,i){let o=Tm(t,"","","");return Sm(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},Db="ng-animate-queued",uF=".ng-animate-queued",am="ng-animate-disabled",dF=".ng-animate-disabled",fF="ng-star-inserted",hF=".ng-star-inserted",pF=[],Vb={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},gF={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Vt="__ng_removed",Js=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=yF(i),r){let o=e,{value:s}=o,a=Lm(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Ys="void",lm=new Js(Ys),Em=class{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Tt(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw Tk(r,t);if(r==null||r.length==0)throw Mk(t);if(!vF(r))throw xk(r,t);let o=dt(this._elementListeners,e,[]),s={name:t,phase:r,callback:i};o.push(s);let a=dt(this._engine.statesByElement,e,new Map);return a.has(t)||(Tt(e,eu),Tt(e,eu+"-"+t),a.set(t,lm)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw Ak(e);return t}trigger(e,t,r,i=!0){let o=this._getTrigger(t),s=new ea(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Tt(e,eu),Tt(e,eu+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),c=new Js(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=lm),!(c.value===Ys)&&l.value===c.value){if(!CF(l.params,c.params)){let g=[],v=o.matchStyles(l.value,l.params,g),C=o.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{Hr(e,v),sn(e,C)})}return}let f=dt(this._engine.playersByElement,e,[]);f.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let h=o.matchTransition(l.value,c.value,e,c.params),p=!1;if(!h){if(!i)return;h=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:l,toState:c,player:s,isFallbackTransition:p}),p||(Tt(e,Db),s.onStart(()=>{oo(e,Db)})),s.onDone(()=>{let g=this.players.indexOf(s);g>=0&&this.players.splice(g,1);let v=this._engine.playersByElement.get(e);if(v){let C=v.indexOf(s);C>=0&&v.splice(C,1)}}),this.players.push(s),f.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,ou,!0);r.forEach(i=>{if(i[Vt])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let u=this.trigger(e,c,Ys,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),r&&rr(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let l=this._triggers.get(s).fallbackTransition,c=r.get(s)||lm,u=new Js(Ys),d=new ea(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let o=e[Vt];(!o||o===Vb)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Tt(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let l=Tm(o,r.triggerName,r.fromState.value,r.toState.value);l._data=e,Sm(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},bm=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r,i){this.bodyNode=e,this.driver=t,this._normalizer=r,this.scheduler=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new Em(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let l=i.get(a);if(l){let c=r.indexOf(l);r.splice(c+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}}return t}trigger(e,t,r,i){if(ru(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!ru(t))return;let o=t[Vt];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Tt(e,am)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),oo(e,am))}removeNode(e,t,r){if(ru(t)){this.scheduler?.notify();let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[Vt]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return ru(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,ou,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,dm,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return rr(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Vt];if(t&&t.setForRemoval){if(e[Vt]=Vb,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(am)&&this.markElementAsDisabled(e,!1),this.driver.query(e,dF,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Tt(i,fF)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?rr(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw Nk(e)}_flushAnimations(e,t){let r=new Xs,i=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(b=>{u.add(b);let T=this.driver.query(b,uF,!0);for(let x=0;x<T.length;x++)u.add(T[x])});let d=this.bodyNode,f=Array.from(this.statesByElement.keys()),h=Tb(f,this.collectedEnterElements),p=new Map,g=0;h.forEach((b,T)=>{let x=Pb+g++;p.set(T,x),b.forEach(Z=>Tt(Z,x))});let v=[],C=new Set,k=new Set;for(let b=0;b<this.collectedLeaveElements.length;b++){let T=this.collectedLeaveElements[b],x=T[Vt];x&&x.setForRemoval&&(v.push(T),C.add(T),x.hasAnimation?this.driver.query(T,hF,!0).forEach(Z=>C.add(Z)):k.add(T))}let S=new Map,$=Tb(f,Array.from(C));$.forEach((b,T)=>{let x=um+g++;S.set(T,x),b.forEach(Z=>Tt(Z,x))}),e.push(()=>{h.forEach((b,T)=>{let x=p.get(T);b.forEach(Z=>oo(Z,x))}),$.forEach((b,T)=>{let x=S.get(T);b.forEach(Z=>oo(Z,x))}),v.forEach(b=>{this.processLeaveNode(b)})});let we=[],ye=[];for(let b=this._namespaceList.length-1;b>=0;b--)this._namespaceList[b].drainQueuedTransitions(t).forEach(x=>{let Z=x.player,Ae=x.element;if(we.push(Z),this.collectedEnterElements.length){let Ve=Ae[Vt];if(Ve&&Ve.setForMove){if(Ve.previousTriggersValues&&Ve.previousTriggersValues.has(x.triggerName)){let or=Ve.previousTriggersValues.get(x.triggerName),ft=this.statesByElement.get(x.element);if(ft&&ft.has(x.triggerName)){let ta=ft.get(x.triggerName);ta.value=or,ft.set(x.triggerName,ta)}}Z.destroy();return}}let Bt=!d||!this.driver.containsElement(d,Ae),et=S.get(Ae),Tn=p.get(Ae),pe=this._buildInstruction(x,r,Tn,et,Bt);if(pe.errors&&pe.errors.length){ye.push(pe);return}if(Bt){Z.onStart(()=>Hr(Ae,pe.fromStyles)),Z.onDestroy(()=>sn(Ae,pe.toStyles)),i.push(Z);return}if(x.isFallbackTransition){Z.onStart(()=>Hr(Ae,pe.fromStyles)),Z.onDestroy(()=>sn(Ae,pe.toStyles)),i.push(Z);return}let Fm=[];pe.timelines.forEach(Ve=>{Ve.stretchStartingKeyframe=!0,this.disabledNodes.has(Ve.element)||Fm.push(Ve)}),pe.timelines=Fm,r.append(Ae,pe.timelines);let Wb={instruction:pe,player:Z,element:Ae};s.push(Wb),pe.queriedElements.forEach(Ve=>dt(a,Ve,[]).push(Z)),pe.preStyleProps.forEach((Ve,or)=>{if(Ve.size){let ft=l.get(or);ft||l.set(or,ft=new Set),Ve.forEach((ta,yu)=>ft.add(yu))}}),pe.postStyleProps.forEach((Ve,or)=>{let ft=c.get(or);ft||c.set(or,ft=new Set),Ve.forEach((ta,yu)=>ft.add(yu))})});if(ye.length){let b=[];ye.forEach(T=>{b.push(Rk(T.triggerName,T.errors))}),we.forEach(T=>T.destroy()),this.reportError(b)}let ve=new Map,xe=new Map;s.forEach(b=>{let T=b.element;r.has(T)&&(xe.set(T,T),this._beforeAnimationBuild(b.player.namespaceId,b.instruction,ve))}),i.forEach(b=>{let T=b.element;this._getPreviousPlayers(T,!1,b.namespaceId,b.triggerName,null).forEach(Z=>{dt(ve,T,[]).push(Z),Z.destroy()})});let an=v.filter(b=>Mb(b,l,c)),Sn=new Map;Sb(Sn,this.driver,k,c,on).forEach(b=>{Mb(b,l,c)&&an.push(b)});let ir=new Map;h.forEach((b,T)=>{Sb(ir,this.driver,new Set(b),l,Jc)}),an.forEach(b=>{let T=Sn.get(b),x=ir.get(b);Sn.set(b,new Map([...T?.entries()??[],...x?.entries()??[]]))});let mu=[],Om=[],km={};s.forEach(b=>{let{element:T,player:x,instruction:Z}=b;if(r.has(T)){if(u.has(T)){x.onDestroy(()=>sn(T,Z.toStyles)),x.disabled=!0,x.overrideTotalTime(Z.totalTime),i.push(x);return}let Ae=km;if(xe.size>1){let et=T,Tn=[];for(;et=et.parentNode;){let pe=xe.get(et);if(pe){Ae=pe;break}Tn.push(et)}Tn.forEach(pe=>xe.set(pe,Ae))}let Bt=this._buildAnimation(x.namespaceId,Z,ve,o,ir,Sn);if(x.setRealPlayer(Bt),Ae===km)mu.push(x);else{let et=this.playersByElement.get(Ae);et&&et.length&&(x.parentPlayer=rr(et)),i.push(x)}}else Hr(T,Z.fromStyles),x.onDestroy(()=>sn(T,Z.toStyles)),Om.push(x),u.has(T)&&i.push(x)}),Om.forEach(b=>{let T=o.get(b.element);if(T&&T.length){let x=rr(T);b.setRealPlayer(x)}}),i.forEach(b=>{b.parentPlayer?b.syncPlayerEvents(b.parentPlayer):b.destroy()});for(let b=0;b<v.length;b++){let T=v[b],x=T[Vt];if(oo(T,um),x&&x.hasAnimation)continue;let Z=[];if(a.size){let Bt=a.get(T);Bt&&Bt.length&&Z.push(...Bt);let et=this.driver.query(T,dm,!0);for(let Tn=0;Tn<et.length;Tn++){let pe=a.get(et[Tn]);pe&&pe.length&&Z.push(...pe)}}let Ae=Z.filter(Bt=>!Bt.destroyed);Ae.length?_F(this,T,Ae):this.processLeaveNode(T)}return v.length=0,mu.forEach(b=>{this.players.push(b),b.onDone(()=>{b.destroy();let T=this.players.indexOf(b);this.players.splice(T,1)}),b.play()}),mu}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let l=!o||o==Ys;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||s.push(c)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,r){let i=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let l of t.timelines){let c=l.element,u=c!==o,d=dt(r,c,[]);this._getPreviousPlayers(c,u,s,a,t.toState).forEach(h=>{let p=h.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),h.destroy(),d.push(h)})}Hr(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,s){let a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,f=t.timelines.map(p=>{let g=p.element;u.add(g);let v=g[Vt];if(v&&v.removedBeforeQueried)return new nr(p.duration,p.delay);let C=g!==l,k=wF((r.get(g)||pF).map(ve=>ve.getRealPlayer())).filter(ve=>{let xe=ve;return xe.element?xe.element===g:!1}),S=o.get(g),$=s.get(g),we=xb(this._normalizer,p.keyframes,S,$),ye=this._buildPlayer(p,we,k);if(p.subTimeline&&i&&d.add(g),C){let ve=new ea(e,a,g);ve.setRealPlayer(ye),c.push(ve)}return ye});c.forEach(p=>{dt(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>mF(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Tt(p,vb));let h=rr(f);return h.onDestroy(()=>{u.forEach(p=>oo(p,vb)),sn(l,t.toStyles)}),d.forEach(p=>{dt(i,p,[]).push(h)}),h}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new nr(e.duration,e.delay)}},ea=class{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new nr,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Sm(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){dt(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function mF(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function yF(n){return n??null}function ru(n){return n&&n.nodeType===1}function vF(n){return n=="start"||n=="done"}function Ib(n,e){let t=n.style.display;return n.style.display=e??"none",t}function Sb(n,e,t,r,i){let o=[];t.forEach(l=>o.push(Ib(l)));let s=[];r.forEach((l,c)=>{let u=new Map;l.forEach(d=>{let f=e.computeStyle(c,d,i);u.set(d,f),(!f||f.length==0)&&(c[Vt]=gF,s.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>Ib(l,o[a++])),s}function Tb(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),o=new Map;function s(a){if(!a)return r;let l=o.get(a);if(l)return l;let c=a.parentNode;return t.has(c)?l=c:i.has(c)?l=r:l=s(c),o.set(a,l),l}return e.forEach(a=>{let l=s(a);l!==r&&t.get(l).push(a)}),t}function Tt(n,e){n.classList?.add(e)}function oo(n,e){n.classList?.remove(e)}function _F(n,e,t){rr(t).onDone(()=>n.processLeaveNode(e))}function wF(n){let e=[];return Bb(n,e),e}function Bb(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Qs?Bb(r.players,e):e.push(r)}}function CF(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function Mb(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}var so=class{constructor(e,t,r,i){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(o,s)=>{},this._transitionEngine=new bm(e.body,t,r,i),this._timelineEngine=new Cm(e.body,t,r),this._transitionEngine.onRemovalComplete=(o,s)=>this.onRemovalComplete(o,s)}registerTrigger(e,t,r,i,o){let s=e+"-"+i,a=this._triggerCache[s];if(!a){let l=[],c=[],u=Fb(this._driver,o,l,c);if(l.length)throw Ck(i,l);c.length&&void 0,a=aF(i,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[o,s]=mb(r),a=i;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if(r.charAt(0)=="@"){let[s,a]=mb(r);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function EF(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=cm(e[0]),e.length>1&&(r=cm(e[e.length-1]))):e instanceof Map&&(t=cm(e)),t||r?new Dm(n,t,r):null}var Dm=class n{static{this.initialStylesByElement=new WeakMap}constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=n.initialStylesByElement.get(e);i||n.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&sn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(sn(this._element,this._initialStyles),this._endStyles&&(sn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Hr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Hr(this._element,this._endStyles),this._endStyles=null),sn(this._element,this._initialStyles),this._state=3)}};function cm(n){let e=null;return n.forEach((t,r)=>{bF(r)&&(e=e||new Map,e.set(r,t))}),e}function bF(n){return n==="display"||n==="position"}var fu=class{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Nm(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},hu=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Ab(e,t)}getParentElement(e){return Mm(e)}query(e,t,r){return Nb(e,t,r)}computeStyle(e,t,r){return Nm(e,t)}animate(e,t,r,i,o,s=[]){let a=i==0?"both":"forwards",l={duration:r,delay:i,fill:a};o&&(l.easing=o);let c=new Map,u=s.filter(h=>h instanceof fu);Hk(r,i)&&u.forEach(h=>{h.currentSnapshot.forEach((p,g)=>c.set(g,p))});let d=Bk(t).map(h=>new Map(h));d=zk(e,d,c);let f=EF(e,d);return new fu(e,d,l,f)}};var iu="@",Ub="@.disabled",pu=class{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==iu&&t==Ub?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Im=class extends pu{constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==iu?t.charAt(1)=="."&&t==Ub?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if(t.charAt(0)==iu){let i=DF(e),o=t.slice(1),s="";return o.charAt(0)!=iu&&([o,s]=IF(o)),this.engine.listen(this.namespaceId,i,o,s,a=>{let l=a._data||-1;this.factory.scheduleListenerCallback(l,r,a)})}return this.delegate.listen(e,t,r)}};function DF(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function IF(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var gu=class{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,o)=>{let s=o?.parentNode(i);s&&o.removeChild(s,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,u=c.get(i);if(!u){let d=()=>c.delete(i);u=new pu(r,i,this.engine,d),c.set(i,u)}return u}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,e,c.name,c)};return t.data.animation.forEach(a),new Im(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var TF=(()=>{class n extends so{constructor(t,r,i){super(t,r,i,w(To,{optional:!0}))}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(_(Je),_(zr),_(Wr))}}static{this.\u0275prov=D({token:n,factory:n.\u0275fac})}}return n})();function MF(){return new au}function xF(n,e,t){return new gu(n,e,t)}var $b=[{provide:Wr,useFactory:MF},{provide:so,useClass:TF},{provide:vr,useFactory:xF,deps:[Ll,so,ne]}],AF=[{provide:zr,useFactory:()=>new hu},{provide:wf,useValue:"BrowserAnimations"},...$b],o4=[{provide:zr,useClass:xm},{provide:wf,useValue:"NoopAnimations"},...$b];function Hb(){return Il("NgEagerAnimations"),[...AF]}var zb={firebase:{apiKey:"AIzaSyAUZRwZhO4o87uY712_rPyCIVMAYQjmDc8",authDomain:"maywfaymenu.firebaseapp.com",databaseURL:"https://maywfaymenu-default-rtdb.firebaseio.com",projectId:"maywfaymenu",storageBucket:"maywfaymenu.firebasestorage.app",messagingSenderId:"981257128372",appId:"1:981257128372:web:82270c9ccc4473fd2f4ae1",measurementId:"G-12FQFLT9S0"}};Bw(bC,{providers:[CC(hb),Hb(),nf(VC.initializeApp(zb.firebase),cb)]}).catch(n=>console.error("Error:",n));
