<div class="category-view">
  <!-- Animated background particles -->
  <div class="bg-particles" id="particles"></div>
  
  <div class="menu-banner">
    <img src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=2000"
         alt="Delicious Food Banner"
         class="banner-image">
  </div>

  <div class="main-content">
    <h1 class="category-title">{{ categoryName }}</h1>
    
    <!-- Show subcategories if they exist and not loading -->
    <div class="subcategories-container" *ngIf="!loading && subcategories && subcategories.length > 0">
      <div class="subcategory-card" *ngFor="let subcategory of subcategories">
        <div class="subcategory-header" (click)="toggleSubcategory(subcategory)">
          <div class="subcategory-info">
            <img *ngIf="subcategory.icon"
                 [src]="subcategory.icon"
                 [alt]="subcategory.name"
                 class="subcategory-icon">
            <h2 class="subcategory-name">{{ subcategory.name }}</h2>
          </div>
          <i class="fas fa-chevron-down expand-icon"
             [class.expanded]="subcategory.isExpanded"></i>
        </div>
        
        <div class="items-container"
             [class.expanded]="subcategory.isExpanded">
          <!-- Show items if they exist -->
          <div class="items-grid" *ngIf="subcategory.items && subcategory.items.length > 0">
            <div class="item-card" *ngFor="let item of subcategory.items">
              <div class="item-image" *ngIf="item.ITEM_PHOTO">
                <img [src]="item.ITEM_PHOTO" [alt]="item.ITEM_NAME">
              </div>
              <div class="item-content">
                <h3 class="item-name">{{ item.ITEM_NAME }}</h3>
                <p class="price">${{ item.ITEM_PRICE }}</p>
                <p class="description" *ngIf="item.DESCRIPTION">{{ item.DESCRIPTION }}</p>
              </div>
            </div>
          </div>
          
          <!-- Show empty items message if no items -->
          <div class="empty-items" *ngIf="!subcategory.items || subcategory.items.length === 0">
            <i class="fas fa-glass-martini-alt empty-items-icon"></i>
            <p class="empty-items-message">No items available in this category</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Show empty subcategories message if no subcategories -->
    <div class="empty-state" *ngIf="!loading && (!subcategories || subcategories.length === 0)">
      <i class="fas fa-utensils empty-state-icon"></i>
      <h3 class="empty-state-title">No Subcategories Available</h3>
      <p class="empty-state-message">There are currently no subcategories in this section. </p>
    </div>

    <!-- Loading spinner -->
    <div class="loading-spinner" *ngIf="loading">
      <div class="spinner"></div>
      <p>Loading delicious items...</p>
    </div>
  </div>
</div>